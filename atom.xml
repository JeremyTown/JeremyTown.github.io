<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>YourğŸŒæˆ‘çš„â¤ï¸</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-07-23T07:19:40.893Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Jeremy</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Git æŒ‡å—</title>
    <link href="http://yoursite.com/2019/05/26/git/"/>
    <id>http://yoursite.com/2019/05/26/git/</id>
    <published>2019-05-25T16:00:00.000Z</published>
    <updated>2019-07-23T07:19:40.893Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="1-è·å–-Git-ä»“åº“"><a href="#1-è·å–-Git-ä»“åº“" class="headerlink" title="1. è·å– Git ä»“åº“"></a>1. è·å– Git ä»“åº“</h2><h3 id="åœ¨ç°æœ‰ç›®å½•ä¸­åˆå§‹åŒ–ä»“åº“"><a href="#åœ¨ç°æœ‰ç›®å½•ä¸­åˆå§‹åŒ–ä»“åº“" class="headerlink" title="åœ¨ç°æœ‰ç›®å½•ä¸­åˆå§‹åŒ–ä»“åº“"></a>åœ¨ç°æœ‰ç›®å½•ä¸­åˆå§‹åŒ–ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><h3 id="å…‹éš†ç°æœ‰çš„ä»“åº“"><a href="#å…‹éš†ç°æœ‰çš„ä»“åº“" class="headerlink" title="å…‹éš†ç°æœ‰çš„ä»“åº“"></a>å…‹éš†ç°æœ‰çš„ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/libgit2/libgit2 mylibgit</span><br></pre></td></tr></table></figure><h2 id="2-è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“"><a href="#2-è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“" class="headerlink" title="2. è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“"></a>2. è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“</h2><h3 id="æ£€æŸ¥å½“å‰æ–‡ä»¶çŠ¶æ€"><a href="#æ£€æŸ¥å½“å‰æ–‡ä»¶çŠ¶æ€" class="headerlink" title="æ£€æŸ¥å½“å‰æ–‡ä»¶çŠ¶æ€"></a>æ£€æŸ¥å½“å‰æ–‡ä»¶çŠ¶æ€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><h3 id="è·Ÿè¸ªæ–°æ–‡ä»¶"><a href="#è·Ÿè¸ªæ–°æ–‡ä»¶" class="headerlink" title="è·Ÿè¸ªæ–°æ–‡ä»¶"></a>è·Ÿè¸ªæ–°æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add README</span><br><span class="line">git status</span><br></pre></td></tr></table></figure><h3 id="æš‚å­˜å·²ä¿®æ”¹æ–‡ä»¶"><a href="#æš‚å­˜å·²ä¿®æ”¹æ–‡ä»¶" class="headerlink" title="æš‚å­˜å·²ä¿®æ”¹æ–‡ä»¶"></a>æš‚å­˜å·²ä¿®æ”¹æ–‡ä»¶</h3><h3 id="çŠ¶æ€ç®€è§ˆ"><a href="#çŠ¶æ€ç®€è§ˆ" class="headerlink" title="çŠ¶æ€ç®€è§ˆ"></a>çŠ¶æ€ç®€è§ˆ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git status --short</span><br><span class="line">git status -s</span><br></pre></td></tr></table></figure><h3 id="å¿½ç•¥æ–‡ä»¶"><a href="#å¿½ç•¥æ–‡ä»¶" class="headerlink" title="å¿½ç•¥æ–‡ä»¶"></a>å¿½ç•¥æ–‡ä»¶</h3><p>ä½¿ç”¨ .gitignore æ–‡ä»¶</p><ul><li>æ‰€æœ‰ç©ºè¡Œæˆ–è€…ä»¥ ï¼ƒ å¼€å¤´çš„è¡Œéƒ½ä¼šè¢« Git å¿½ç•¥ã€‚</li><li>å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ glob æ¨¡å¼åŒ¹é…ã€‚</li><li>åŒ¹é…æ¨¡å¼å¯ä»¥ä»¥ï¼ˆ/ï¼‰å¼€å¤´é˜²æ­¢é€’å½’ã€‚</li><li>åŒ¹é…æ¨¡å¼å¯ä»¥ä»¥ï¼ˆ/ï¼‰ç»“å°¾æŒ‡å®šç›®å½•ã€‚</li><li>è¦å¿½ç•¥æŒ‡å®šæ¨¡å¼ä»¥å¤–çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯ä»¥åœ¨æ¨¡å¼å‰åŠ ä¸ŠæƒŠå¹å·ï¼ˆ!ï¼‰å–åã€‚</li></ul><p>glob æ¨¡å¼</p><ul><li>æ˜Ÿå·ï¼ˆ*ï¼‰åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªä»»æ„å­—ç¬¦ï¼›</li><li>[abc] åŒ¹é…ä»»ä½•ä¸€ä¸ªåˆ—åœ¨æ–¹æ‹¬å·ä¸­çš„å­—ç¬¦ï¼›</li><li>é—®å·ï¼ˆ?ï¼‰åªåŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦ï¼›</li><li>å¦‚æœåœ¨æ–¹æ‹¬å·ä¸­ä½¿ç”¨çŸ­åˆ’çº¿åˆ†éš”ä¸¤ä¸ªå­—ç¬¦ï¼Œè¡¨ç¤ºæ‰€æœ‰åœ¨è¿™ä¸¤ä¸ªå­—ç¬¦èŒƒå›´å†…çš„éƒ½å¯ä»¥åŒ¹é…ï¼›</li><li>ä½¿ç”¨ä¸¤ä¸ªæ˜Ÿå·ï¼ˆ*) è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸­é—´ç›®å½•ã€‚</li></ul><h3 id="æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„ä¿®æ”¹"><a href="#æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„ä¿®æ”¹" class="headerlink" title="æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„ä¿®æ”¹"></a>æŸ¥çœ‹å·²æš‚å­˜å’Œæœªæš‚å­˜çš„ä¿®æ”¹</h3><ul><li>æŸ¥çœ‹å°šæœªæš‚å­˜çš„æ–‡ä»¶æ›´æ–°äº†å“ªäº›éƒ¨åˆ†</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹å·²æš‚å­˜çš„å°†è¦æ·»åŠ åˆ°ä¸‹æ¬¡æäº¤é‡Œçš„å†…å®¹</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git diff --staged</span><br><span class="line">git diff --cached</span><br></pre></td></tr></table></figure><h3 id="æäº¤æ›´æ–°"><a href="#æäº¤æ›´æ–°" class="headerlink" title="æäº¤æ›´æ–°"></a>æäº¤æ›´æ–°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">"first commit"</span></span><br></pre></td></tr></table></figure><h3 id="è·³è¿‡ä½¿ç”¨æš‚å­˜åŒºåŸŸ"><a href="#è·³è¿‡ä½¿ç”¨æš‚å­˜åŒºåŸŸ" class="headerlink" title="è·³è¿‡ä½¿ç”¨æš‚å­˜åŒºåŸŸ"></a>è·³è¿‡ä½¿ç”¨æš‚å­˜åŒºåŸŸ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -a -m <span class="string">"second commit"</span></span><br></pre></td></tr></table></figure><h3 id="ç§»é™¤æ–‡ä»¶"><a href="#ç§»é™¤æ–‡ä»¶" class="headerlink" title="ç§»é™¤æ–‡ä»¶"></a>ç§»é™¤æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm [file_name]</span><br></pre></td></tr></table></figure><p>æŠŠæ–‡ä»¶ä» Git ä»“åº“ä¸­åˆ é™¤ï¼Œæ–‡ä»¶ä¿ç•™åœ¨å½“å‰å·¥ä½œç›®å½•ä¸­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached [file_name]</span><br></pre></td></tr></table></figure><h3 id="ç§»åŠ¨æ–‡ä»¶"><a href="#ç§»åŠ¨æ–‡ä»¶" class="headerlink" title="ç§»åŠ¨æ–‡ä»¶"></a>ç§»åŠ¨æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git mv file_from file_to</span><br></pre></td></tr></table></figure><h2 id="3-æŸ¥çœ‹æäº¤å†å²"><a href="#3-æŸ¥çœ‹æäº¤å†å²" class="headerlink" title="3. æŸ¥çœ‹æäº¤å†å²"></a>3. æŸ¥çœ‹æäº¤å†å²</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> -p -2 <span class="comment"># -p æ˜¾ç¤ºæ¯æ¬¡æäº¤çš„å†…å®¹å·®å¼‚ï¼Œ-2 ä»…æ˜¾ç¤ºæœ€è¿‘ä¸¤æ¬¡æäº¤</span></span><br><span class="line">git <span class="built_in">log</span> --<span class="built_in">stat</span> <span class="comment"># æŸ¥çœ‹æäº¤çš„ç®€ç•¥çš„ç»Ÿè®¡ä¿¡æ¯</span></span><br><span class="line">git <span class="built_in">log</span> --oneline <span class="comment"># å°†æ¯ä¸ªæäº¤æ”¾åœ¨ä¸€è¡Œæ˜¾ç¤º</span></span><br><span class="line">git <span class="built_in">log</span> --short</span><br><span class="line">git <span class="built_in">log</span> --full</span><br><span class="line">git <span class="built_in">log</span> --fuller</span><br><span class="line">git <span class="built_in">log</span> --pretty=online</span><br><span class="line">git <span class="built_in">log</span> --pretty=format:<span class="string">"%h - %an, %ar : %s"</span> --graph <span class="comment"># å®šåˆ¶è¦æ˜¾ç¤ºçš„è®°å½•æ ¼å¼</span></span><br></pre></td></tr></table></figure><p><code>git log</code> å¸¸ç”¨é€‰é¡¹</p><table><thead><tr><th align="right">é€‰é¡¹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="right">-p</td><td align="left">æŒ‰è¡¥ä¸æ ¼å¼æ˜¾ç¤ºæ¯ä¸ªæ›´æ–°ä¹‹é—´çš„å·®å¼‚</td></tr><tr><td align="right">â€“stat</td><td align="left">æ˜¾ç¤ºæ¯æ¬¡æ›´æ–°çš„æ–‡ä»¶ä¿®æ”¹ç»Ÿè®¡ä¿¡æ¯ã€‚</td></tr><tr><td align="right">â€“shortstat</td><td align="left">åªæ˜¾ç¤º â€“stat ä¸­æœ€åçš„è¡Œæ•°ä¿®æ”¹æ·»åŠ ç§»é™¤ç»Ÿè®¡ã€‚</td></tr><tr><td align="right">â€“name-only</td><td align="left">ä»…åœ¨æäº¤ä¿¡æ¯åæ˜¾ç¤ºå·²ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•ã€‚</td></tr><tr><td align="right">â€“name-status</td><td align="left">æ˜¾ç¤ºæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤çš„æ–‡ä»¶æ¸…å•ã€‚</td></tr><tr><td align="right">â€“abbrev-commit</td><td align="left">ä»…æ˜¾ç¤º SHA-1 çš„å‰å‡ ä¸ªå­—ç¬¦ï¼Œè€Œéæ‰€æœ‰çš„ 40 ä¸ªå­—ç¬¦ã€‚</td></tr><tr><td align="right">â€“relative-date</td><td align="left">ä½¿ç”¨è¾ƒçŸ­çš„ç›¸å¯¹æ—¶é—´æ˜¾ç¤ºï¼ˆæ¯”å¦‚ï¼Œâ€œ2 weeks agoâ€ï¼‰ã€‚</td></tr><tr><td align="right">â€“graph</td><td align="left">æ˜¾ç¤º ASCII å›¾å½¢è¡¨ç¤ºçš„åˆ†æ”¯åˆå¹¶å†å²ã€‚</td></tr><tr><td align="right">â€“pretty</td><td align="left">ä½¿ç”¨å…¶ä»–æ ¼å¼æ˜¾ç¤ºå†å²æäº¤ä¿¡æ¯ã€‚å¯ç”¨çš„é€‰é¡¹åŒ…æ‹¬ onelineï¼Œshortï¼Œfullï¼Œfuller å’Œ formatï¼ˆåè·ŸæŒ‡å®šæ ¼å¼ï¼‰ã€‚</td></tr></tbody></table><p><code>git log --pretty=format</code> å¸¸ç”¨çš„é€‰é¡¹</p><table><thead><tr><th align="right">é€‰é¡¹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="right">%H</td><td align="left">æäº¤å¯¹è±¡ï¼ˆcommitï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td></tr><tr><td align="right">%h</td><td align="left">æäº¤å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td></tr><tr><td align="right">%T</td><td align="left">æ ‘å¯¹è±¡ï¼ˆtreeï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td></tr><tr><td align="right">%t</td><td align="left">æ ‘å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td></tr><tr><td align="right">%P</td><td align="left">çˆ¶å¯¹è±¡ï¼ˆparentï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸²</td></tr><tr><td align="right">%p</td><td align="left">çˆ¶å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸²</td></tr><tr><td align="right">%an</td><td align="left">ä½œè€…ï¼ˆauthorï¼‰çš„åå­—</td></tr><tr><td align="right">%ae</td><td align="left">ä½œè€…çš„ç”µå­é‚®ä»¶åœ°å€</td></tr><tr><td align="right">%ad</td><td align="left">ä½œè€…ä¿®è®¢æ—¥æœŸï¼ˆå¯ä»¥ç”¨ â€“date= é€‰é¡¹å®šåˆ¶æ ¼å¼ï¼‰</td></tr><tr><td align="right">%ar</td><td align="left">ä½œè€…ä¿®è®¢æ—¥æœŸï¼ŒæŒ‰å¤šä¹…ä»¥å‰çš„æ–¹å¼æ˜¾ç¤º</td></tr><tr><td align="right">%cn</td><td align="left">æäº¤è€…ï¼ˆcommitterï¼‰çš„åå­—</td></tr><tr><td align="right">%ce</td><td align="left">æäº¤è€…çš„ç”µå­é‚®ä»¶åœ°å€</td></tr><tr><td align="right">%cd</td><td align="left">æäº¤æ—¥æœŸ</td></tr><tr><td align="right">%cr</td><td align="left">æäº¤æ—¥æœŸï¼ŒæŒ‰å¤šä¹…ä»¥å‰çš„æ–¹å¼æ˜¾ç¤º</td></tr><tr><td align="right">%s</td><td align="left">æäº¤è¯´æ˜</td></tr></tbody></table><h3 id="é™åˆ¶è¾“å‡ºé•¿åº¦"><a href="#é™åˆ¶è¾“å‡ºé•¿åº¦" class="headerlink" title="é™åˆ¶è¾“å‡ºé•¿åº¦"></a>é™åˆ¶è¾“å‡ºé•¿åº¦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --since=2.weeks</span><br></pre></td></tr></table></figure><p>é™åˆ¶ <code>git log</code> è¾“å‡ºçš„é€‰é¡¹</p><table><thead><tr><th align="right">é€‰é¡¹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="right">-(n)</td><td align="left">ä»…æ˜¾ç¤ºæœ€è¿‘çš„ n æ¡æäº¤</td></tr><tr><td align="right">â€“since, â€“after</td><td align="left">ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹åçš„æäº¤</td></tr><tr><td align="right">â€“until, â€“before</td><td align="left">ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹å‰çš„æäº¤</td></tr><tr><td align="right">â€“author</td><td align="left">ä»…æ˜¾ç¤ºæŒ‡å®šä½œè€…ç›¸å…³çš„æäº¤</td></tr><tr><td align="right">â€“committer</td><td align="left">ä»…æ˜¾ç¤ºæŒ‡å®šæäº¤è€…ç›¸å…³çš„æäº¤</td></tr><tr><td align="right">â€“grep</td><td align="left">ä»…æ˜¾ç¤ºå«æŒ‡å®šå…³é”®å­—çš„æäº¤</td></tr><tr><td align="right">-S</td><td align="left">ä»…æ˜¾ç¤ºæ·»åŠ æˆ–ç§»é™¤äº†æŸä¸ªå…³é”®å­—çš„æäº¤</td></tr></tbody></table><h2 id="4-æ’¤æ¶ˆæ“ä½œ"><a href="#4-æ’¤æ¶ˆæ“ä½œ" class="headerlink" title="4. æ’¤æ¶ˆæ“ä½œ"></a>4. æ’¤æ¶ˆæ“ä½œ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend</span><br></pre></td></tr></table></figure><h3 id="å–æ¶ˆæš‚å­˜çš„æ–‡ä»¶"><a href="#å–æ¶ˆæš‚å­˜çš„æ–‡ä»¶" class="headerlink" title="å–æ¶ˆæš‚å­˜çš„æ–‡ä»¶"></a>å–æ¶ˆæš‚å­˜çš„æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># git reset HEAD &lt;file&gt; ...</span></span><br><span class="line">git reset HEAD CONTRIBUTING.md</span><br></pre></td></tr></table></figure><h3 id="æ’¤æ¶ˆå¯¹æ–‡ä»¶çš„ä¿®æ”¹"><a href="#æ’¤æ¶ˆå¯¹æ–‡ä»¶çš„ä¿®æ”¹" class="headerlink" title="æ’¤æ¶ˆå¯¹æ–‡ä»¶çš„ä¿®æ”¹"></a>æ’¤æ¶ˆå¯¹æ–‡ä»¶çš„ä¿®æ”¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># git checkout -- &lt;file&gt;</span></span><br><span class="line">git checkout -- CONTRIBUTING.md</span><br></pre></td></tr></table></figure><h2 id="5-è¿œç¨‹ä»“åº“çš„ä½¿ç”¨"><a href="#5-è¿œç¨‹ä»“åº“çš„ä½¿ç”¨" class="headerlink" title="5. è¿œç¨‹ä»“åº“çš„ä½¿ç”¨"></a>5. è¿œç¨‹ä»“åº“çš„ä½¿ç”¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/schacon/ticgit</span><br><span class="line">git remote</span><br><span class="line">git remote -v</span><br><span class="line">git remote add pb https://github.com/paulboone/ticgit</span><br><span class="line">git fetch pb</span><br></pre></td></tr></table></figure><h3 id="ä»è¿œç¨‹ä»“åº“ä¸­æŠ“å–ä¸æ‹‰å–"><a href="#ä»è¿œç¨‹ä»“åº“ä¸­æŠ“å–ä¸æ‹‰å–" class="headerlink" title="ä»è¿œç¨‹ä»“åº“ä¸­æŠ“å–ä¸æ‹‰å–"></a>ä»è¿œç¨‹ä»“åº“ä¸­æŠ“å–ä¸æ‹‰å–</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch [remote-name]</span><br></pre></td></tr></table></figure><h3 id="æ¨é€åˆ°è¿œç¨‹ä»“åº“"><a href="#æ¨é€åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="æ¨é€åˆ°è¿œç¨‹ä»“åº“"></a>æ¨é€åˆ°è¿œç¨‹ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹è¿œç¨‹ä»“åº“"><a href="#æŸ¥çœ‹è¿œç¨‹ä»“åº“" class="headerlink" title="æŸ¥çœ‹è¿œç¨‹ä»“åº“"></a>æŸ¥çœ‹è¿œç¨‹ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># git remote show [remote-name]</span></span><br><span class="line">git remote show origin</span><br></pre></td></tr></table></figure><h3 id="è¿œç¨‹ä»“åº“çš„ç§»é™¤ä¸é‡å‘½å"><a href="#è¿œç¨‹ä»“åº“çš„ç§»é™¤ä¸é‡å‘½å" class="headerlink" title="è¿œç¨‹ä»“åº“çš„ç§»é™¤ä¸é‡å‘½å"></a>è¿œç¨‹ä»“åº“çš„ç§»é™¤ä¸é‡å‘½å</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote rename pb paul</span><br><span class="line">git remote rm paul</span><br></pre></td></tr></table></figure><h2 id="6-æ‰“æ ‡ç­¾"><a href="#6-æ‰“æ ‡ç­¾" class="headerlink" title="6. æ‰“æ ‡ç­¾"></a>6. æ‰“æ ‡ç­¾</h2><h3 id="åˆ—å‡ºæ ‡ç­¾"><a href="#åˆ—å‡ºæ ‡ç­¾" class="headerlink" title="åˆ—å‡ºæ ‡ç­¾"></a>åˆ—å‡ºæ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git tag</span><br><span class="line">git tag -l <span class="string">'v1.8.5*'</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºæ ‡ç­¾"><a href="#åˆ›å»ºæ ‡ç­¾" class="headerlink" title="åˆ›å»ºæ ‡ç­¾"></a>åˆ›å»ºæ ‡ç­¾</h3><h3 id="é™„æ³¨æ ‡ç­¾"><a href="#é™„æ³¨æ ‡ç­¾" class="headerlink" title="é™„æ³¨æ ‡ç­¾"></a>é™„æ³¨æ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git tag -a v1.4 -m <span class="string">'my version 1.4'</span></span><br><span class="line">git tag</span><br><span class="line">git show v1.4 <span class="comment"># æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯ä¸å¯¹åº”çš„æäº¤ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><h3 id="è½»é‡æ ‡ç­¾"><a href="#è½»é‡æ ‡ç­¾" class="headerlink" title="è½»é‡æ ‡ç­¾"></a>è½»é‡æ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git tag v1.4-lw</span><br><span class="line">git tag</span><br></pre></td></tr></table></figure><h3 id="åæœŸæ‰“æ ‡ç­¾"><a href="#åæœŸæ‰“æ ‡ç­¾" class="headerlink" title="åæœŸæ‰“æ ‡ç­¾"></a>åæœŸæ‰“æ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line">git tag -a v1.2 &lt;éƒ¨åˆ†æ ¡éªŒå’Œ&gt; <span class="comment"># git tag -a v1.2 9fceb02</span></span><br></pre></td></tr></table></figure><h3 id="å…±äº«æ ‡ç­¾"><a href="#å…±äº«æ ‡ç­¾" class="headerlink" title="å…±äº«æ ‡ç­¾"></a>å…±äº«æ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push origin v1.5</span><br><span class="line">git push origin --tags <span class="comment"># ä¸€æ¬¡æ€§æ¨é€å…¨éƒ¨æ ‡ç­¾</span></span><br></pre></td></tr></table></figure><h3 id="æ£€å‡ºæ ‡ç­¾"><a href="#æ£€å‡ºæ ‡ç­¾" class="headerlink" title="æ£€å‡ºæ ‡ç­¾"></a>æ£€å‡ºæ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ git checkout -b [branchname] [tagname] åœ¨ç‰¹å®šçš„æ ‡ç­¾ä¸Šåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯</span></span><br><span class="line">git checkout -b version2 v2.0.0</span><br></pre></td></tr></table></figure><h2 id="7-Git-åˆ«å"><a href="#7-Git-åˆ«å" class="headerlink" title="7. Git åˆ«å"></a>7. Git åˆ«å</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git config --global alias.co checkout</span><br><span class="line">git config --global alias.br branch</span><br><span class="line">git config --global alias.ci commit</span><br><span class="line">git config --global alias.st status</span><br><span class="line">git config --global alias.unstage <span class="string">'reset HEAD --'</span></span><br><span class="line">git config --global alias.last <span class="string">'log -1 HEAD'</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼Œåœ¨å‘½ä»¤å‰é¢åŠ å…¥ ! ç¬¦å·</span></span><br><span class="line">git config --global alias.visual <span class="string">'!gitk'</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;1-è·å–-Git-ä»“åº“&quot;&gt;&lt;a href=&quot;#1-è·å–-Git-ä»“åº“&quot; class=&quot;headerlink&quot; title=&quot;1. è·å– Git ä»“åº“&quot;&gt;&lt;/a&gt;1. è·å– Git ä»“åº“&lt;/h2&gt;&lt;h3 id=&quot;åœ¨ç°æœ‰ç›®å½•ä¸­åˆå§‹
      
    
    </summary>
    
      <category term="tools" scheme="http://yoursite.com/categories/tools/"/>
    
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Prometheus + Grafana</title>
    <link href="http://yoursite.com/2019/02/27/promethues/"/>
    <id>http://yoursite.com/2019/02/27/promethues/</id>
    <published>2019-02-27T11:59:14.000Z</published>
    <updated>2019-07-23T07:16:50.815Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="å®‰è£…-GO"><a href="#å®‰è£…-GO" class="headerlink" title="å®‰è£… GO"></a>å®‰è£… GO</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# yum -y install go</span><br><span class="line">[root@mysqlnode05 go]# go version</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-prometheus"><a href="#å®‰è£…-prometheus" class="headerlink" title="å®‰è£… prometheus"></a>å®‰è£… prometheus</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# tar -zxvf prometheus-2.7.1.linux-amd64.tar.gz</span><br><span class="line">[root@master ~]# mv prometheus-2.7.1.linux-amd64 /appdata/prometheus</span><br><span class="line">[root@master ~]# cd /appdata/prometheus/</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹prometheus.ymlæ–‡ä»¶ï¼Œé…ç½®targetså…¶ä¸­çš„IPå’Œç«¯å£åˆ™æ˜¯å¯¹åº”çš„exporterçš„ç›‘å¬ç«¯å£</span></span><br><span class="line">[root@master ~]# vim prometheus.yml</span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line"><span class="attr">  scrape_interval:</span>     <span class="number">15</span><span class="string">s</span> <span class="comment"># Set the scrape interval to every 15 seconds. Default is every 1 minute.</span></span><br><span class="line"><span class="attr">  evaluation_interval:</span> <span class="number">15</span><span class="string">s</span> <span class="comment"># Evaluate rules every 15 seconds. The default is every 1 minute.</span></span><br><span class="line">  <span class="comment"># scrape_timeout is set to the global default (10s).</span></span><br><span class="line"><span class="attr">alerting:</span></span><br><span class="line"><span class="attr">  alertmanagers:</span></span><br><span class="line"><span class="attr">  - static_configs:</span></span><br><span class="line"><span class="attr">    - targets:</span></span><br><span class="line">      <span class="comment"># - alertmanager:9093</span></span><br><span class="line"><span class="attr">rule_files:</span></span><br><span class="line">  <span class="comment"># - "first_rules.yml"</span></span><br><span class="line">  <span class="comment"># - "second_rules.yml"</span></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="comment"># The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.</span></span><br><span class="line"><span class="attr">  - job_name:</span> <span class="string">'prometheus'</span></span><br><span class="line"><span class="attr">    static_configs:</span></span><br><span class="line"><span class="attr">    - targets:</span> <span class="string">['192.168.41.131:9090']</span></span><br><span class="line"><span class="attr">  - job_name:</span> <span class="string">'master'</span></span><br><span class="line"><span class="attr">    static_configs:</span></span><br><span class="line"><span class="attr">      - targets:</span> <span class="string">['192.168.41.131:9100']</span></span><br><span class="line"><span class="attr">        labels:</span></span><br><span class="line"><span class="attr">          instance:</span> <span class="string">master</span></span><br><span class="line"><span class="attr">  - job_name:</span> <span class="string">'slave'</span></span><br><span class="line"><span class="attr">    static_configs:</span></span><br><span class="line"><span class="attr">      - targets:</span> <span class="string">['192.168.41.132:9100']</span></span><br><span class="line"><span class="attr">        labels:</span></span><br><span class="line"><span class="attr">          instance:</span> <span class="string">slave</span></span><br><span class="line"><span class="attr">  - job_name:</span> <span class="string">'mysql-master'</span></span><br><span class="line"><span class="attr">    static_configs:</span></span><br><span class="line"><span class="attr">      - targets:</span> <span class="string">['192.168.41.131:9104']</span></span><br><span class="line"><span class="attr">        labels:</span></span><br><span class="line"><span class="attr">          instance:</span> <span class="string">master</span></span><br><span class="line"><span class="attr">  - job_name:</span> <span class="string">'mysql-slave'</span></span><br><span class="line"><span class="attr">    static_configs:</span></span><br><span class="line"><span class="attr">      - targets:</span> <span class="string">['192.168.41.132:9104']</span></span><br><span class="line"><span class="attr">        labels:</span></span><br><span class="line"><span class="attr">          instance:</span> <span class="string">slave</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨å¹¶é€šè¿‡webè®¿é—®</span></span><br><span class="line">[root@master ~]# /appdata/prometheus/prometheus --config.file /appdata/prometheus/prometheus.yml &gt;&gt; /appdata/prometheus/prometheus.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-mysqld-exporter"><a href="#å®‰è£…-mysqld-exporter" class="headerlink" title="å®‰è£… mysqld_exporter"></a>å®‰è£… mysqld_exporter</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# tar -zxvf mysqld_exporter-0.11.0.linux-amd64.tar.gz</span><br><span class="line">[root@master ~]# cp mysqld_exporter-0.11.0.linux-amd64/mysqld_exporter /appdata/prometheus/</span><br><span class="line">[root@master ~]# mysql -uroot -p</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºä¸“ç”¨ç”¨æˆ·</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> create user <span class="string">'prometheus'</span>@<span class="string">'%'</span> identified by <span class="string">'xxxxxx'</span>;</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> grant REPLICATION CLIENT,PROCESS,SELECT ON *.* TO <span class="string">'prometheus'</span>@<span class="string">'%'</span>;</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> flush privileges;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºexporteré…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@master ~]# vim /appdata/prometheus/.my.cnf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">user=mysql_prome</span><br><span class="line">password=Aa123456789</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨mysqld_exporter</span></span><br><span class="line">[root@master ~]# /appdata/prometheus/mysqld_exporter --config.my-cnf /appdata/prometheus/.my.cnf &gt;&gt; /appdata/prometheus/mysqld_exporter.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-node-exporter"><a href="#å®‰è£…-node-exporter" class="headerlink" title="å®‰è£… node_exporter"></a>å®‰è£… node_exporter</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# tar -zxvf node_exporter-0.17.0.linux-amd64.tar.gz</span><br><span class="line">[root@master ~]# cp node_exporter-0.17.0.linux-amd64/node_exporter /appdata/prometheus/</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨node_exporter</span></span><br><span class="line">[root@master ~]# /appdata/prometheus/node_exporter &gt;&gt; /appdata/prometheus/node_exporter.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹-target-status"><a href="#æŸ¥çœ‹-target-status" class="headerlink" title="æŸ¥çœ‹ target status"></a>æŸ¥çœ‹ target status</h2><p>æµè§ˆå™¨è®¿é—® <a href="http://192.168.31.131:9090" target="_blank" rel="noopener">http://192.168.31.131:9090</a></p><h2 id="å®‰è£…-grafana"><a href="#å®‰è£…-grafana" class="headerlink" title="å®‰è£… grafana"></a>å®‰è£… grafana</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# wget https://dl.grafana.com/oss/release/grafana-6.0.0-1.x86_64.rpm </span><br><span class="line">[root@master ~]# yum -y install grafana-6.0.0-1.x86_64.rpm</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨grafana</span></span><br><span class="line">[root@master ~]# systemctl enable grafana-server</span><br><span class="line">[root@master ~]# systemctl start grafana-server</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ æ•°æ®æº"><a href="#æ·»åŠ æ•°æ®æº" class="headerlink" title="æ·»åŠ æ•°æ®æº"></a>æ·»åŠ æ•°æ®æº</h2><p>æµè§ˆå™¨è®¿é—® <a href="http://192.168.31.131:3000" target="_blank" rel="noopener">http://192.168.31.131:3000</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;



&lt;h2 id=&quot;å®‰è£…-GO&quot;&gt;&lt;a href=&quot;#å®‰è£…-GO&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£… GO&quot;&gt;&lt;/a&gt;å®‰è£… GO&lt;/h2&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;
      
    
    </summary>
    
      <category term="monitor" scheme="http://yoursite.com/categories/monitor/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="prometheus" scheme="http://yoursite.com/tags/prometheus/"/>
    
      <category term="grafana" scheme="http://yoursite.com/tags/grafana/"/>
    
  </entry>
  
  <entry>
    <title>MySQL å®‰è£…æŒ‡å—</title>
    <link href="http://yoursite.com/2019/02/18/mysql/"/>
    <id>http://yoursite.com/2019/02/18/mysql/</id>
    <published>2019-02-17T16:00:00.000Z</published>
    <updated>2019-07-23T07:16:33.687Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="1-å®‰è£…å¹¶åˆå§‹åŒ–æ•°æ®åº“"><a href="#1-å®‰è£…å¹¶åˆå§‹åŒ–æ•°æ®åº“" class="headerlink" title="1. å®‰è£…å¹¶åˆå§‹åŒ–æ•°æ®åº“"></a>1. å®‰è£…å¹¶åˆå§‹åŒ–æ•°æ®åº“</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]<span class="comment"># ls</span></span><br><span class="line">mysql-8.0.15-linux-glibc2.12-x86_64.tar.xz</span><br><span class="line">[root@master ~]<span class="comment"># tar -Jxf mysql-8.0.15-linux-glibc2.12-x86_64.tar.xz</span></span><br><span class="line">[root@master ~]<span class="comment"># ls</span></span><br><span class="line">mysql-8.0.15-linux-glibc2.12-x86_64  mysql-8.0.15-linux-glibc2.12-x86_64.tar.xz</span><br><span class="line">[root@master ~]<span class="comment"># mkdir /appdata </span></span><br><span class="line">[root@master ~]<span class="comment"># mv mysql-8.0.15-linux-glibc2.12-x86_64 /appdata/mysql</span></span><br><span class="line">[root@master ~]<span class="comment"># cd /appdata/mysql/bin</span></span><br><span class="line">[root@master bin]<span class="comment"># ./mysqld --verbose --help</span></span><br><span class="line">[root@master bin]<span class="comment"># ./mysqld --initialize --user=mysql</span></span><br><span class="line">2019-02-17T13:24:47.271942Z 0 [Warning] [MY-011070] [Server] <span class="string">'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'</span> is deprecated and will be removed <span class="keyword">in</span> a future release.</span><br><span class="line">2019-02-17T13:24:47.272022Z 0 [System] [MY-013169] [Server] /appdata/mysql/bin/mysqld (mysqld 8.0.15) initializing of server <span class="keyword">in</span> progress as process 9517</span><br><span class="line">2019-02-17T13:24:49.230753Z 5 [Note] [MY-010454] [Server] A temporary password is generated <span class="keyword">for</span> root@localhost: fYd00.&lt;Ucx:0</span><br><span class="line">2019-02-17T13:24:50.553995Z 0 [System] [MY-013170] [Server] /appdata/mysql/bin/mysqld (mysqld 8.0.15) initializing of server has completed</span><br></pre></td></tr></table></figure><h1 id="2-ç¼–è¾‘è‡ªå®šä¹‰é…ç½®æ–‡ä»¶"><a href="#2-ç¼–è¾‘è‡ªå®šä¹‰é…ç½®æ–‡ä»¶" class="headerlink" title="2. ç¼–è¾‘è‡ªå®šä¹‰é…ç½®æ–‡ä»¶"></a>2. ç¼–è¾‘è‡ªå®šä¹‰é…ç½®æ–‡ä»¶</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/my.cnf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">port=3306</span><br><span class="line">basedir=/appdata/mysql</span><br><span class="line">datadir=/appdata/mysql/data</span><br><span class="line">socket=/appdata/mysql/data/mysql.sock</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">server-id=1</span><br><span class="line">binlog_format=MIXED</span><br><span class="line">gtid_mode = on</span><br><span class="line">enforce_gtid_consistency = 1</span><br><span class="line">log_slave_updates = 1</span><br><span class="line">max_allowed_packet = 128M</span><br><span class="line">interactive_timeout = 28800000</span><br><span class="line">wait_timeout = 28800000</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">socket=/appdata/mysql/data/mysql.sock</span><br></pre></td></tr></table></figure><h1 id="3-å¯åŠ¨MySQL"><a href="#3-å¯åŠ¨MySQL" class="headerlink" title="3. å¯åŠ¨MySQL"></a>3. å¯åŠ¨MySQL</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# cp /appdata/mysql/support-files/mysql.server /etc/init.d/</span><br><span class="line">[root@master ~]# vim /etc/init.d/mysql.server</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">basedir=/appdata/mysql</span><br><span class="line">datadir=/appdata/mysql/data</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# /etc/init.d/mysql.server start</span><br></pre></td></tr></table></figure><h1 id="4-è®¾ç½®ä¸»ä»åŒæ­¥"><a href="#4-è®¾ç½®ä¸»ä»åŒæ­¥" class="headerlink" title="4. è®¾ç½®ä¸»ä»åŒæ­¥"></a>4. è®¾ç½®ä¸»ä»åŒæ­¥</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# mysql -uroot -pfYd00.&lt;Ucx:0</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER USER root@'localhost' IDENTIFIED BY 'Abc123';</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; CREATE USER replication@'%' IDENTIFIED WITH 'mysql_native_password' BY 'replication';</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; grant replication slave on *.* to replication@'%';</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; ALTER TABLE mysql.slave_master_info ENGINE=InnoDB;</span><br><span class="line">Query OK, 0 rows affected (0.07 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; ALTER TABLE mysql.slave_relay_log_info ENGINE=InnoDB;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; reset slave;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; CHANGE MASTER TO MASTER_HOST="slave.example.com",MASTER_USER='replication',MASTER_PASSWORD="replication",MASTER_AUTO_POSITION=1;</span><br><span class="line">Query OK, 0 rows affected, 2 warnings (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; start slave;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show slave status\G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">               Slave_IO_State: Waiting for master to send event</span><br><span class="line">                  Master_Host: slave.example.com</span><br><span class="line">                  Master_User: replication</span><br><span class="line">                  Master_Port: 3306</span><br><span class="line">                Connect_Retry: 60</span><br><span class="line">              Master_Log_File: mysql-bin.000015</span><br><span class="line">          Read_Master_Log_Pos: 1567</span><br><span class="line">               Relay_Log_File: master-relay-bin.000003</span><br><span class="line">                Relay_Log_Pos: 456</span><br><span class="line">        Relay_Master_Log_File: mysql-bin.000015</span><br><span class="line">             Slave_IO_Running: Yes</span><br><span class="line">            Slave_SQL_Running: Yes</span><br></pre></td></tr></table></figure><h1 id="5-é—®é¢˜å¤„ç†"><a href="#5-é—®é¢˜å¤„ç†" class="headerlink" title="5. é—®é¢˜å¤„ç†"></a>5. é—®é¢˜å¤„ç†</h1><blockquote><p>Error_code: MY-002061</p></blockquote><ul><li>ä¸å…¼å®¹çš„å˜åŒ–ï¼š åœ¨caching_sha2_passwordå’Œ sha256_passwordè®¤è¯æ’ä»¶æä¾›æ¯”æ›´å®‰å…¨çš„å¯†ç åŠ å¯† mysql_native_passwordæ’ä»¶ï¼Œå¹¶ caching_sha2_passwordæä¾›äº†æ¯”æ›´å¥½çš„æ€§èƒ½sha256_passwordã€‚ç”±äºè¿™äº›ä¼˜è¶Šçš„å®‰å…¨æ€§å’Œæ€§èƒ½ç‰¹æ€§ caching_sha2_passwordï¼Œå®ƒç°åœ¨æ˜¯é¦–é€‰çš„èº«ä»½éªŒè¯æ’ä»¶ï¼Œè€Œä¸”ä¹Ÿæ˜¯é»˜è®¤çš„èº«ä»½éªŒè¯æ’ä»¶è€Œä¸æ˜¯ mysql_native_passwordã€‚æ­¤æ›´æ”¹ä¼šå½±å“æœåŠ¡å™¨å’Œlibmysqlclientå®¢æˆ·ç«¯åº“ï¼š<ul><li>å¯¹äºæœåŠ¡å™¨ï¼Œdefault_authentication_plugin ç³»ç»Ÿå˜é‡çš„é»˜è®¤å€¼ ä»æ›´æ”¹ mysql_native_passwordä¸º caching_sha2_passwordã€‚</li><li>è¯¥libmysqlclientåº“å°†å…¶ caching_sha2_passwordè§†ä¸ºé»˜è®¤çš„èº«ä»½éªŒè¯æ’ä»¶è€Œä¸æ˜¯ mysql_native_passwordã€‚</li><li>æ­¤æ›´æ”¹ä»…å½±å“ç”¨äºåˆ›å»ºæ–°MySQLå¸æˆ·çš„èº«ä»½éªŒè¯æ’ä»¶ã€‚å¯¹äºå·²å‡çº§å®‰è£…ä¸­å·²å­˜åœ¨çš„å¸æˆ·ï¼Œå…¶èº«ä»½éªŒè¯æ’ä»¶ä¿æŒä¸å˜ã€‚</li><li>ä½¿ç”¨ç»è¿‡èº«ä»½éªŒè¯çš„å¸æˆ·çš„å®¢æˆ·ç«¯ caching_sha2_passwordå¿…é¡»ä½¿ç”¨å®‰å…¨è¿æ¥ï¼ˆä½¿ç”¨TCPä½¿ç”¨TLS / SSLå‡­æ®ï¼ŒUnixå¥—æ¥å­—æ–‡ä»¶æˆ–å…±äº«å†…å­˜åˆ¶ä½œï¼‰ï¼Œæˆ–ä½¿ç”¨RSAå¯†é’¥å¯¹æ”¯æŒå¯†ç äº¤æ¢çš„æœªåŠ å¯†è¿æ¥ã€‚æ­¤å®‰å…¨è¦æ±‚ä¸é€‚ç”¨ mysql_native_passswordï¼Œå› æ­¤äº¤æ¢æœº caching_sha2_passwordå¯èƒ½éœ€è¦å…¶ä»–é…ç½®ï¼ˆè¯·å‚é˜… ç¼“å­˜SHA-2å¯æ’å…¥èº«ä»½éªŒè¯ï¼‰ã€‚ä½†æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQL 8.0ä¸­çš„å®¢æˆ·ç«¯è¿æ¥æ›´å–œæ¬¢ä½¿ç”¨TLS / SSLï¼Œå› æ­¤å·²æ»¡è¶³è¯¥é¦–é€‰é¡¹çš„å®¢æˆ·ç«¯å¯èƒ½ä¸éœ€è¦å…¶ä»–é…ç½®ã€‚</li><li>å› ä¸ºcaching_sha2_passwordç°åœ¨ä¹Ÿæ˜¯libmysqlclientå®¢æˆ·ç«¯åº“ä¸­çš„é»˜è®¤èº«ä»½éªŒè¯æ’ä»¶ï¼Œæ‰€ä»¥ èº«ä»½éªŒè¯éœ€è¦åœ¨å®¢æˆ·ç«¯/æœåŠ¡å™¨åè®®ä¸­è¿›è¡Œé¢å¤–çš„å¾€è¿”ï¼Œä»¥ä¾¿ä»MySQL 8.0å®¢æˆ·ç«¯è¿æ¥åˆ°ä½¿ç”¨mysql_native_passwordï¼ˆä»¥å‰çš„é»˜è®¤èº«ä»½éªŒè¯æ’ä»¶ï¼‰çš„å¸æˆ· ï¼Œé™¤éè°ƒç”¨å®¢æˆ·ç«¯ç¨‹åºä¸€ä¸ª â€“default-auth=mysql_native_password é€‰æ‹©ã€‚</li><li>ä¸å…¼å®¹ï¼šå°šæœªæ›´æ–°çš„å®¢æˆ·ç«¯å’Œè¿æ¥å™¨ caching_sha2_password æ— æ³•è¿æ¥åˆ°é€šè¿‡èº«ä»½éªŒè¯çš„å¸æˆ·ï¼Œcaching_sha2_password å› ä¸ºä»–ä»¬æ— æ³•å°†æ­¤æ’ä»¶è¯†åˆ«ä¸ºæœ‰æ•ˆã€‚è¦è§£å†³æ­¤é—®é¢˜ï¼Œè¯·libmysqlclientä»MySQL 8.0.4æˆ–æ›´é«˜ç‰ˆæœ¬é‡æ–°é“¾æ¥å®¢æˆ·ç«¯ ï¼Œæˆ–è·å–å¯è¯†åˆ«çš„æ›´æ–°è¿æ¥å™¨ caching_sha2_passwordã€‚</li><li>ä¸å…¼å®¹ï¼šå°šæœªæ›´æ–°çš„å®¢æˆ·ç«¯å’Œè¿æ¥å™¨ caching_sha2_passwordå¯èƒ½æ— æ³•è¿æ¥åˆ°é…ç½®caching_sha2_passwordä¸ºé»˜è®¤èº«ä»½éªŒè¯æ’ä»¶çš„MySQL 8.0æœåŠ¡å™¨ ï¼Œç”šè‡³ä½¿ç”¨æœªé€šè¿‡èº«ä»½éªŒè¯çš„å¸æˆ·caching_sha2_passwordã€‚å‡ºç°æ­¤é—®é¢˜çš„åŸå› æ˜¯æœåŠ¡å™¨ä¸ºå®¢æˆ·ç«¯æŒ‡å®šå…¶é»˜è®¤èº«ä»½éªŒè¯æ’ä»¶çš„åç§°ã€‚å¦‚æœå®¢æˆ·ç«¯æˆ–è¿æ¥å™¨åŸºäºæœªæ­£å¸¸å¤„ç†æ— æ³•è¯†åˆ«çš„é»˜è®¤èº«ä»½éªŒè¯æ’ä»¶çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨åè®®å®ç°ï¼Œåˆ™å¯èƒ½ä¼šå¤±è´¥å¹¶æ˜¾ç¤ºé”™è¯¯ã€‚</li></ul></li></ul><blockquote><p>ERROR 1872 (HY000): Slave failed to initialize relay log info structure from the repository</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h1 id=&quot;1-å®‰è£…å¹¶åˆå§‹åŒ–æ•°æ®åº“&quot;&gt;&lt;a href=&quot;#1-å®‰è£…å¹¶åˆå§‹åŒ–æ•°æ®åº“&quot; class=&quot;headerlink&quot; title=&quot;1. å®‰è£…å¹¶åˆå§‹åŒ–æ•°æ®åº“&quot;&gt;&lt;/a&gt;1. å®‰è£…å¹¶åˆå§‹åŒ–æ•°æ®åº“&lt;/h1&gt;&lt;figure class=&quot;h
      
    
    </summary>
    
      <category term="database" scheme="http://yoursite.com/categories/database/"/>
    
    
      <category term="mysql" scheme="http://yoursite.com/tags/mysql/"/>
    
      <category term="replication" scheme="http://yoursite.com/tags/replication/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes ç¦»çº¿å®‰è£…</title>
    <link href="http://yoursite.com/2019/02/07/k8s/"/>
    <id>http://yoursite.com/2019/02/07/k8s/</id>
    <published>2019-02-06T17:31:26.000Z</published>
    <updated>2019-07-23T07:16:12.800Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/hosts</span><br><span class="line">192.168.61.11 node1</span><br><span class="line">192.168.61.12 node2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line"></span><br><span class="line">setenforce 0</span><br><span class="line">vim /etc/selinux/config</span><br><span class="line"></span><br><span class="line">SELINUX=disabled</span><br><span class="line"></span><br><span class="line">vim /etc/sysctl.d/k8s.conf</span><br><span class="line"></span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line">net.ipv4.ip_forward = 1</span><br><span class="line"></span><br><span class="line">modprobe br_netfilter</span><br><span class="line">sysctl -p /etc/sysctl.d/k8s.conf</span><br></pre></td></tr></table></figure><h2 id="kube-proxyå¼€å¯ipvsçš„å‰ç½®æ¡ä»¶"><a href="#kube-proxyå¼€å¯ipvsçš„å‰ç½®æ¡ä»¶" class="headerlink" title="kube-proxyå¼€å¯ipvsçš„å‰ç½®æ¡ä»¶"></a>kube-proxyå¼€å¯ipvsçš„å‰ç½®æ¡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/sysconfig/modules/ipvs.modules &lt;&lt;EOF</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">modprobe -- ip_vs</span><br><span class="line">modprobe -- ip_vs_rr</span><br><span class="line">modprobe -- ip_vs_wrr</span><br><span class="line">modprobe -- ip_vs_sh</span><br><span class="line">modprobe -- nf_conntrack_ipv4</span><br><span class="line">EOF</span><br><span class="line">chmod 755 /etc/sysconfig/modules/ipvs.modules &amp;&amp; bash /etc/sysconfig/modules/ipvs.modules &amp;&amp; lsmod | grep -e ip_vs -e nf_conntrack_ipv4</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ˜¯å¦å·²ç»æ­£ç¡®åŠ è½½æ‰€éœ€çš„å†…æ ¸æ¨¡å—</span></span><br><span class="line">lsmod | grep -e ip_vs -e nf_conntrack_ipv4</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a>å®‰è£…Docker</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"># Step 2: æ·»åŠ è½¯ä»¶æºä¿¡æ¯</span><br><span class="line">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"># Step 3: æ›´æ–°å¹¶å®‰è£… Docker-CE</span><br><span class="line">sudo yum makecache fast</span><br><span class="line"></span><br><span class="line">yum list docker-ce.x86_64  --showduplicates |sort -r</span><br><span class="line"></span><br><span class="line">yum makecache fast</span><br><span class="line"></span><br><span class="line">yum install -y --setopt=obsoletes=0 \</span><br><span class="line">  docker-ce-18.06.1.ce-3.el7</span><br><span class="line"></span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -nvL</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…kubeadmå’Œkubelet"><a href="#å®‰è£…kubeadmå’Œkubelet" class="headerlink" title="å®‰è£…kubeadmå’Œkubelet"></a>å®‰è£…kubeadmå’Œkubelet</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">repo_gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">yum install -y kubelet kubeadm kubectl</span><br><span class="line">systemctl <span class="built_in">enable</span> kubelet &amp;&amp; systemctl start kubelet</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kubelet â€“help</span><br><span class="line"></span><br><span class="line">cat /etc/systemd/system/kubelet.service.d/10-kubeadm.conf</span><br><span class="line"></span><br><span class="line">vim /etc/sysconfig/kubelet</span><br><span class="line"></span><br><span class="line">KUBELET_EXTRA_ARGS=--fail-swap-on=false</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨kubeadm-initåˆå§‹åŒ–é›†ç¾¤"><a href="#ä½¿ç”¨kubeadm-initåˆå§‹åŒ–é›†ç¾¤" class="headerlink" title="ä½¿ç”¨kubeadm initåˆå§‹åŒ–é›†ç¾¤"></a>ä½¿ç”¨kubeadm initåˆå§‹åŒ–é›†ç¾¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">kubeadm config images list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">images=(kube-apiserver:v1.13.3 kube-controller-manager:v1.13.3 kube-scheduler:v1.13.3 kube-proxy:v1.13.3 pause:3.1 etcd:3.2.24)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> imageName <span class="keyword">in</span> <span class="variable">$&#123;images[@]&#125;</span> ; <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">  docker pull mirrorgooglecontainers/<span class="variable">$imageName</span></span><br><span class="line">  docker tag mirrorgooglecontainers/<span class="variable">$imageName</span> k8s.gcr.io/<span class="variable">$imageName</span></span><br><span class="line">  docker rmi mirrorgooglecontainers/<span class="variable">$imageName</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> docker pull coredns/coredns:1.2.6</span><br><span class="line"> docker tag coredns/coredns:1.2.6  k8s.gcr.io/coredns:1.2.6</span><br><span class="line"> docker rmi coredns/coredns:1.2.6</span><br><span class="line"></span><br><span class="line">kubeadm init \</span><br><span class="line">  --kubernetes-version=v1.13.0 \</span><br><span class="line">  --pod-network-cidr=10.244.0.0/16 \</span><br><span class="line">  --apiserver-advertise-address=192.168.41.132 \</span><br><span class="line">  --ignore-preflight-errors=Swap</span><br><span class="line"><span class="comment"># running with swap on is not supported. Please disable swap</span></span><br><span class="line"><span class="comment"># æ·»åŠ --ignore-preflight-errors=Swapå‚æ•°å¿½ç•¥è¿™ä¸ªé”™è¯¯</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mkdir -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">  sudo cp -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">  sudo chown $(id -u):$(id -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"></span><br><span class="line">kubeadm join 192.168.41.132:6443 --token e4xr2p.xvfc3dr6a4dvz8se --discovery-token-ca-cert-hash sha256:7f99258581c9118551ec500b61bf3d732ed6e31799e5074fc5f75b784633410a</span><br><span class="line"></span><br><span class="line">kubectl get cs</span><br><span class="line"></span><br><span class="line"><span class="comment"># é›†ç¾¤åˆå§‹åŒ–å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œæ¸…ç†</span></span><br><span class="line">kubeadm reset</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…Pod-Network"><a href="#å®‰è£…Pod-Network" class="headerlink" title="å®‰è£…Pod Network"></a>å®‰è£…Pod Network</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/k8s/</span><br><span class="line"><span class="built_in">cd</span> ~/k8s</span><br><span class="line">wget https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br><span class="line">kubectl apply -f  kube-flannel.yml</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/sp
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="docker" scheme="http://yoursite.com/tags/docker/"/>
    
      <category term="Kubernetes" scheme="http://yoursite.com/tags/Kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>MySQL ç»„å¤åˆ¶</title>
    <link href="http://yoursite.com/2019/01/30/mgr/"/>
    <id>http://yoursite.com/2019/01/30/mgr/</id>
    <published>2019-01-30T04:24:39.000Z</published>
    <updated>2019-07-23T07:16:27.273Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="1-éƒ¨ç½²ç»„å¤åˆ¶å®ä¾‹"><a href="#1-éƒ¨ç½²ç»„å¤åˆ¶å®ä¾‹" class="headerlink" title="1. éƒ¨ç½²ç»„å¤åˆ¶å®ä¾‹"></a>1. éƒ¨ç½²ç»„å¤åˆ¶å®ä¾‹</h2><p>å‡å®šMySQL Serverå·²ä¸‹è½½å¹¶è§£å‹ç¼©åˆ°åä¸ºçš„ç›®å½•ä¸­mysql-8.0ã€‚ä»¥ä¸‹è¿‡ç¨‹ä½¿ç”¨ä¸€å°ç‰©ç†è®¡ç®—æœºï¼Œå› æ­¤æ¯ä¸ªMySQLæœåŠ¡å™¨å®ä¾‹éƒ½éœ€è¦è¯¥å®ä¾‹çš„ç‰¹å®šæ•°æ®ç›®å½•ã€‚åœ¨åä¸ºçš„ç›®å½•ä¸­åˆ›å»ºæ•°æ®ç›®å½•data å¹¶åˆå§‹åŒ–æ¯ä¸ªç›®å½•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir data</span><br><span class="line">mysql-8.0/bin/mysqld --initialize-insecure --basedir=$PWD/mysql-8.0 --datadir=$PWD/data/s1</span><br><span class="line">mysql-8.0/bin/mysqld --initialize-insecure --basedir=$PWD/mysql-8.0 --datadir=$PWD/data/s2</span><br><span class="line">mysql-8.0/bin/mysqld --initialize-insecure --basedir=$PWD/mysql-8.0 --datadir=$PWD/data/s3</span><br></pre></td></tr></table></figure><p>é‡Œé¢data/s1ï¼Œdata/s2ï¼Œ data/s3æ˜¯ä¸€ä¸ªåˆå§‹åŒ–çš„æ•°æ®ç›®å½•ï¼ŒåŒ…å«äº†MySQLç³»ç»Ÿæ•°æ®åº“å’Œç›¸å…³è¡¨ç­‰ç­‰</p><blockquote><p>â€“initialize-insecureåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå®ƒä»…ç”¨äºç®€åŒ–æ•™ç¨‹ã€‚</p></blockquote><h2 id="2-é…ç½®ç»„å¤åˆ¶å®ä¾‹"><a href="#2-é…ç½®ç»„å¤åˆ¶å®ä¾‹" class="headerlink" title="2. é…ç½®ç»„å¤åˆ¶å®ä¾‹"></a>2. é…ç½®ç»„å¤åˆ¶å®ä¾‹</h2><h3 id="ç»„Replication-Serverè®¾ç½®"><a href="#ç»„Replication-Serverè®¾ç½®" class="headerlink" title="ç»„Replication Serverè®¾ç½®"></a>ç»„Replication Serverè®¾ç½®</h3><p>è¦å®‰è£…å’Œä½¿ç”¨ç»„å¤åˆ¶æ’ä»¶ï¼Œå¿…é¡»æ­£ç¡®é…ç½®MySQL Serverå®ä¾‹ã€‚å»ºè®®å°†é…ç½®å­˜å‚¨åœ¨å®ä¾‹çš„é…ç½®æ–‡ä»¶ä¸­ã€‚ä»¥ä¸‹æ˜¯ç»„ä¸­ç¬¬ä¸€ä¸ªå®ä¾‹çš„é…ç½®ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ç§°ä¸ºs1ã€‚ä»¥ä¸‹éƒ¨åˆ†æ˜¾ç¤ºäº†ç¤ºä¾‹æœåŠ¡å™¨é…ç½®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># server configuration</span><br><span class="line">datadir=&lt;full_path_to_data&gt;/data/s1</span><br><span class="line">basedir=&lt;full_path_to_bin&gt;/mysql-8.0/</span><br><span class="line"></span><br><span class="line">port=24801</span><br><span class="line">socket=&lt;full_path_to_sock_dir&gt;/s1.sock</span><br></pre></td></tr></table></figure><p>è¿™äº›è®¾ç½®å°†MySQLæœåŠ¡å™¨é…ç½®ä¸ºä½¿ç”¨å…ˆå‰åˆ›å»ºçš„æ•°æ®ç›®å½•ä»¥åŠæœåŠ¡å™¨åº”æ‰“å¼€çš„ç«¯å£å¹¶å¼€å§‹ä¾¦å¬ä¼ å…¥è¿æ¥ã€‚</p><blockquote><p>ä½¿ç”¨éé»˜è®¤ç«¯å£24801æ˜¯å› ä¸ºåœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä¸‰ä¸ªæœåŠ¡å™¨å®ä¾‹ä½¿ç”¨ç›¸åŒçš„ä¸»æœºåã€‚åœ¨å…·æœ‰ä¸‰å°ä¸åŒæœºå™¨çš„è®¾ç½®ä¸­ï¼Œè¿™ä¸æ˜¯å¿…éœ€çš„ã€‚</p></blockquote><p>ç»„å¤åˆ¶éœ€è¦æˆå‘˜ä¹‹é—´çš„ç½‘ç»œè¿æ¥ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªæˆå‘˜å¿…é¡»èƒ½å¤Ÿè§£ææ‰€æœ‰å…¶ä»–æˆå‘˜çš„ç½‘ç»œåœ°å€ã€‚ä¾‹å¦‚ï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‰€æœ‰ä¸‰ä¸ªå®ä¾‹éƒ½åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼Œå› æ­¤ä¸ºäº†ç¡®ä¿æˆå‘˜å¯ä»¥ç›¸äº’è”ç³»ï¼Œæ‚¨å¯ä»¥åœ¨é€‰é¡¹æ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼Œä¾‹å¦‚ report_host=127.0.0.1ã€‚</p><h3 id="å¤åˆ¶æ¡†æ¶"><a href="#å¤åˆ¶æ¡†æ¶" class="headerlink" title="å¤åˆ¶æ¡†æ¶"></a>å¤åˆ¶æ¡†æ¶</h3><p>ä»¥ä¸‹è®¾ç½®æ ¹æ®MySQLç»„å¤åˆ¶è¦æ±‚é…ç½®å¤åˆ¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">server_id=1</span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce_gtid_consistency=ON</span><br><span class="line">binlog_checksum=NONE</span><br></pre></td></tr></table></figure><p>è¿™äº›è®¾ç½®å°†æœåŠ¡å™¨é…ç½®ä¸ºä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦ç¼–å·1ï¼Œä»¥å¯ç”¨å…¨å±€äº‹åŠ¡æ ‡è¯†ç¬¦ï¼Œä»¥å…è®¸ä»…æ‰§è¡Œå¯ä½¿ç”¨GTIDå®‰å…¨è®°å½•çš„è¯­å¥ï¼Œä»¥åŠç¦ç”¨å†™å…¥å†™å…¥äºŒè¿›åˆ¶æ—¥å¿—çš„äº‹ä»¶çš„æ ¡éªŒå’Œã€‚</p><blockquote><p>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯æ—©äº8.0.3çš„MySQLç‰ˆæœ¬ï¼Œå…¶ä¸­é»˜è®¤å€¼å·²é’ˆå¯¹å¤åˆ¶è¿›è¡Œäº†æ”¹è¿›ï¼Œåˆ™éœ€è¦å°†è¿™äº›è¡Œæ·»åŠ åˆ°æˆå‘˜çš„é€‰é¡¹æ–‡ä»¶ä¸­ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">log_bin=binlog</span><br><span class="line">log_slave_updates=ON</span><br><span class="line">binlog_format=ROW</span><br><span class="line">master_info_repository=TABLE</span><br><span class="line">relay_log_info_repository=TABLE</span><br></pre></td></tr></table></figure><p>è¿™äº›è®¾ç½®æŒ‡ç¤ºæœåŠ¡å™¨æ‰“å¼€äºŒè¿›åˆ¶æ—¥å¿—è®°å½•ï¼Œä½¿ç”¨åŸºäºè¡Œçš„æ ¼å¼ï¼Œå°†å¤åˆ¶å…ƒæ•°æ®å­˜å‚¨åœ¨ç³»ç»Ÿè¡¨è€Œä¸æ˜¯æ–‡ä»¶ä¸­ï¼Œå¹¶ç¦ç”¨äºŒè¿›åˆ¶æ—¥å¿—äº‹ä»¶æ ¡éªŒå’Œã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ ç¬¬18.8.1èŠ‚â€œç»„å¤åˆ¶è¦æ±‚â€ã€‚</p><h3 id="ç»„å¤åˆ¶è®¾ç½®"><a href="#ç»„å¤åˆ¶è®¾ç½®" class="headerlink" title="ç»„å¤åˆ¶è®¾ç½®"></a>ç»„å¤åˆ¶è®¾ç½®</h3><p>æ­¤æ—¶ï¼Œè¯¥my.cnfæ–‡ä»¶ç¡®ä¿é…ç½®æœåŠ¡å™¨å¹¶æŒ‡ç¤ºåœ¨ç»™å®šé…ç½®ä¸‹å®ä¾‹åŒ–å¤åˆ¶åŸºç¡€ç»“æ„ã€‚ä»¥ä¸‹éƒ¨åˆ†é…ç½®æœåŠ¡å™¨çš„â€œç»„å¤åˆ¶â€è®¾ç½®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">transaction_write_set_extraction=XXHASH64</span><br><span class="line">group_replication_group_name=&quot;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa&quot;</span><br><span class="line">group_replication_start_on_boot=off</span><br><span class="line">group_replication_local_address= &quot;127.0.0.1:24901&quot;</span><br><span class="line">group_replication_group_seeds= &quot;127.0.0.1:24901,127.0.0.1:24902,127.0.0.1:24903&quot;</span><br><span class="line">group_replication_bootstrap_group=off</span><br></pre></td></tr></table></figure><ul><li>é…ç½® transaction_write_set_extraction æŒ‡ç¤ºæœåŠ¡å™¨å¯¹äºæ¯ä¸ªäº‹åŠ¡ï¼Œå®ƒå¿…é¡»æ”¶é›†å†™é›†å¹¶ä½¿ç”¨XXHASH64æ•£åˆ—ç®—æ³•å°†å…¶ç¼–ç ä¸ºæ•£åˆ—ã€‚ä»MySQL 8.0.2å¼€å§‹ï¼Œæ­¤è®¾ç½®æ˜¯é»˜è®¤è®¾ç½®ï¼Œå› æ­¤å¯ä»¥çœç•¥æ­¤è¡Œã€‚</li><li>é…ç½® group_replication_group_name å‘Šè¯‰æ’ä»¶å®ƒæ­£åœ¨åŠ å…¥æˆ–åˆ›å»ºçš„ç»„è¢«å‘½åä¸ºâ€aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaaâ€ï¼Œgroup_replication_group_nameçš„å€¼ å¿…é¡»æ˜¯æœ‰æ•ˆçš„UUIDã€‚åœ¨äºŒè¿›åˆ¶æ—¥å¿—ä¸­ä¸ºç»„å¤åˆ¶äº‹ä»¶è®¾ç½®GTIDæ—¶ï¼Œå°†åœ¨å†…éƒ¨ä½¿ç”¨æ­¤UUIDã€‚ä½¿ç”¨SELECT UUID()ç”Ÿæˆä¸€ä¸ªUUIDã€‚</li><li>é…ç½® group_replication_start_on_boot æŒ‡ç¤ºæ’ä»¶åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶ä¸è‡ªåŠ¨å¯åŠ¨æ“ä½œã€‚è¿™åœ¨è®¾ç½®ç»„å¤åˆ¶æ—¶å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒç¡®ä¿æ‚¨å¯ä»¥åœ¨æ‰‹åŠ¨å¯åŠ¨æ’ä»¶ä¹‹å‰é…ç½®æœåŠ¡å™¨ã€‚é…ç½®æˆå‘˜åï¼Œæ‚¨å¯ä»¥è®¾ç½® group_replication_start_on_boot ä¸ºonï¼Œä»¥ä¾¿åœ¨æœåŠ¡å™¨å¼•å¯¼æ—¶è‡ªåŠ¨å¯åŠ¨Group Replicationã€‚</li><li>é…ç½® group_replication_local_address å‘Šè¯‰æ’ä»¶ä½¿ç”¨ç½‘ç»œåœ°å€127.0.0.1å’Œç«¯å£24901ä¸ç»„ä¸­çš„å…¶ä»–æˆå‘˜è¿›è¡Œå†…éƒ¨é€šä¿¡ã€‚</li></ul><blockquote><p>ç»„å¤åˆ¶å°†æ­¤åœ°å€ç”¨äºæ¶‰åŠç»„é€šä¿¡å¼•æ“ï¼ˆXComï¼ŒPaxoså˜ä½“ï¼‰çš„è¿œç¨‹å®ä¾‹çš„å†…éƒ¨æˆå‘˜åˆ°æˆå‘˜è¿æ¥ã€‚æ­¤åœ°å€å¿…é¡»ä¸ç”¨äºSQLçš„ä¸»æœºåå’Œç«¯å£ä¸åŒï¼Œå¹¶ä¸”ä¸å¾—ç”¨äºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚åœ¨è¿è¡Œç»„å¤åˆ¶æ—¶ï¼Œå¿…é¡»ä¸ºç»„æˆå‘˜ä¹‹é—´çš„å†…éƒ¨é€šä¿¡ä¿ç•™å®ƒã€‚</p></blockquote><p>é…ç½®çš„ç½‘ç»œåœ°å€ group_replication_local_address å¿…é¡»å¯ç”±æ‰€æœ‰ç»„æˆå‘˜è§£æã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ¯ä¸ªæœåŠ¡å™¨å®ä¾‹ä½äºå…·æœ‰å›ºå®šç½‘ç»œåœ°å€çš„å…¶ä»–è®¡ç®—æœºä¸Šï¼Œåˆ™å¯ä»¥ä½¿ç”¨è®¡ç®—æœºçš„IPåœ°å€ï¼Œä¾‹å¦‚10.0.0.1ã€‚å¦‚æœä½¿ç”¨ä¸»æœºåï¼Œåˆ™å¿…é¡»ä½¿ç”¨å®Œå…¨é™å®šåç§°ï¼Œå¹¶ç¡®ä¿å®ƒå¯ä»¥é€šè¿‡DNSè§£æï¼Œå¹¶ä¸”é…ç½®æ­£ç¡® /etc/hostsæ–‡ä»¶æˆ–å…¶ä»–åç§°è§£æè¿‡ç¨‹ã€‚ä»MySQL 8.0.14å¼€å§‹ï¼Œå¯ä»¥ä½¿ç”¨IPv6åœ°å€ï¼ˆæˆ–è§£æå®ƒä»¬çš„ä¸»æœºåï¼‰ä»¥åŠIPv4åœ°å€ã€‚ç»„å¯ä»¥åŒ…å«ä½¿ç”¨IPv6çš„æˆå‘˜å’Œä½¿ç”¨IPv4çš„æˆå‘˜çš„æ··åˆã€‚</p><p>å»ºè®®çš„ç«¯å£ group_replication_local_address æ˜¯33061ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨åœ¨ä¸€å°è®¡ç®—æœºä¸Šè¿è¡Œçš„ä¸‰ä¸ªæœåŠ¡å™¨å®ä¾‹ï¼Œå› æ­¤ç«¯å£24901åˆ°24903ç”¨äºå†…éƒ¨é€šä¿¡ç½‘ç»œåœ°å€ã€‚ group_replication_local_address Group Replicationä½¿ç”¨å®ƒä½œä¸ºå¤åˆ¶ç»„ä¸­ç»„æˆå‘˜çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚åªè¦ä¸»æœºåæˆ–IPåœ°å€éƒ½ä¸åŒï¼Œæ‚¨å°±å¯ä»¥ä¸ºå¤åˆ¶ç»„çš„æ‰€æœ‰æˆå‘˜ä½¿ç”¨ç›¸åŒçš„ç«¯å£ï¼Œå¹¶ä¸”å¦‚æœ¬æ•™ç¨‹æ‰€ç¤ºï¼Œåªè¦å…·æœ‰ç›¸åŒçš„ä¸»æœºåæˆ–IPåœ°å€ï¼Œå°±å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ä¸»æœºåæˆ–IPåœ°å€ã€‚æ¸¯å£éƒ½ä¸ä¸€æ ·ã€‚</p><ul><li>é…ç½® group_replication_group_seeds è®¾ç½®ç»„æˆå‘˜çš„ä¸»æœºåå’Œç«¯å£ï¼Œæ–°æˆå‘˜ä½¿ç”¨å®ƒä»¬å»ºç«‹ä¸ç»„çš„è¿æ¥ã€‚è¿™äº›æˆå‘˜ç§°ä¸ºç§å­æˆå‘˜ã€‚å»ºç«‹è¿æ¥åï¼Œå°†åˆ—å‡ºç»„æˆå‘˜èº«ä»½ä¿¡æ¯ performance_schema.replication_group_membersã€‚é€šå¸¸ï¼Œ group_replication_group_seeds åˆ—è¡¨åŒ…å«hostname:portæ¯ä¸ªç»„æˆå‘˜çš„åˆ—è¡¨ group_replication_local_addressï¼Œä½†è¿™ä¸æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œå¯ä»¥é€‰æ‹©ç»„æˆå‘˜çš„å­é›†ä½œä¸ºç§å­ã€‚</li></ul><blockquote><p>è¯¥hostname:portåˆ—åœ¨ group_replication_group_seeds æ˜¯ç§å­æ„ä»¶çš„å†…éƒ¨ç½‘ç»œåœ°å€ï¼Œç”±è¢«é…ç½® group_replication_local_address ï¼Œè€Œä¸æ˜¯SQL hostname:portç”¨äºå®¢æˆ·ç«¯è¿æ¥ï¼Œå¹¶ä¸”ä¾‹å¦‚åœ¨æ˜¾ç¤º performance_schema.replication_group_members è¡¨ä¸­ã€‚</p></blockquote><p>å¯åŠ¨è¯¥ç»„çš„æœåŠ¡å™¨ä¸ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œå› ä¸ºå®ƒæ˜¯åˆå§‹æœåŠ¡å™¨ï¼Œå› æ­¤ï¼Œå®ƒè´Ÿè´£å¼•å¯¼ç»„ã€‚æ¢å¥è¯è¯´ï¼Œå¼•å¯¼è¯¥ç»„çš„æœåŠ¡å™¨ä¸Šçš„ä»»ä½•ç°æœ‰æ•°æ®éƒ½æ˜¯ç”¨ä½œä¸‹ä¸€ä¸ªåŠ å…¥æˆå‘˜çš„æ•°æ®ã€‚ç¬¬äºŒä¸ªæœåŠ¡å™¨è¿æ¥è¦æ±‚ç»„ä¸­å”¯ä¸€çš„æˆå‘˜åŠ å…¥ï¼Œç¬¬äºŒä¸ªæœåŠ¡å™¨ä¸Šçš„ä»»ä½•ç¼ºå¤±æ•°æ®éƒ½ä»å¼•å¯¼æˆå‘˜ä¸Šçš„æ–½ä¸»æ•°æ®ä¸­å¤åˆ¶ï¼Œç„¶åç»„æ‰©å±•ã€‚åŠ å…¥çš„ç¬¬ä¸‰ä¸ªæœåŠ¡å™¨å¯ä»¥è¦æ±‚è¿™ä¸¤ä¸ªæœåŠ¡å™¨ä¸­çš„ä»»ä½•ä¸€ä¸ªåŠ å…¥ï¼Œæ•°æ®è¢«åŒæ­¥åˆ°æ–°æˆå‘˜ï¼Œç„¶åè¯¥ç»„å†æ¬¡æ‰©å±•ã€‚</p><blockquote><p>åœ¨åŒæ—¶åŠ å…¥å¤šä¸ªæœåŠ¡å™¨æ—¶ï¼Œè¯·ç¡®ä¿å®ƒä»¬æŒ‡å‘å·²åœ¨è¯¥ç»„ä¸­çš„ç§å­æˆå‘˜ã€‚ä¸è¦ä½¿ç”¨ä¹ŸåŠ å…¥è¯¥ç»„çš„æˆå‘˜ä½œä¸ºç§å­ï¼Œå› ä¸ºä»–ä»¬åœ¨è”ç³»æ—¶å¯èƒ½å°šæœªåŠ å…¥è¯¥ç»„ã€‚</p></blockquote><p>æœ€å¥½é¦–å…ˆå¯åŠ¨å¼•å¯¼ç¨‹åºæˆå‘˜ï¼Œç„¶åè®©å®ƒåˆ›å»ºç»„ã€‚ç„¶åä½¿å…¶æˆä¸ºæ­£åœ¨åŠ å…¥çš„å…¶ä½™æˆå‘˜çš„ç§å­æˆå‘˜ã€‚è¿™ç¡®ä¿äº†åœ¨è¿æ¥å…¶ä½™æˆå‘˜æ—¶å½¢æˆçš„ç»„ã€‚</p><p>ä¸æ”¯æŒåˆ›å»ºç»„å¹¶åŒæ—¶åŠ å…¥å¤šä¸ªæˆå‘˜ã€‚å®ƒå¯èƒ½æœ‰æ•ˆï¼Œä½†å¯èƒ½æ˜¯æ“ä½œç«äº‰ï¼Œç„¶ååŠ å…¥è¯¥ç»„çš„è¡Œä¸ºæœ€ç»ˆä¼šå‡ºé”™æˆ–è¶…æ—¶ã€‚</p><p>åŠ å…¥æˆå‘˜å¿…é¡»ä½¿ç”¨ç§å­æˆå‘˜åœ¨group_replication_group_seeds é€‰é¡¹ä¸­é€šå‘Šçš„ç›¸åŒåè®®ï¼ˆIPv4æˆ–IPv6ï¼‰ä¸ç§å­æˆå‘˜é€šä¿¡ ã€‚å‡ºäºç»„å¤åˆ¶çš„IPåœ°å€ç™½åå•çš„ç›®çš„ï¼Œç§å­æˆå‘˜ä¸Šçš„ç™½åå•å¿…é¡»åŒ…å«ç§å­æˆå‘˜æä¾›çš„åè®®çš„åŠ å…¥æˆå‘˜çš„IPåœ°å€ï¼Œæˆ–è€…è§£æä¸ºè¯¥åè®®çš„åœ°å€çš„ä¸»æœºåã€‚é™¤äº†åŠ å…¥æˆå‘˜ä¹‹å¤–ï¼Œè¿˜å¿…é¡»è®¾ç½®æ­¤åœ°å€æˆ–ä¸»æœºåå¹¶åˆ—å…¥ç™½åå• group_replication_local_address å¦‚æœè¯¥åœ°å€çš„åè®®ä¸ç§å­æˆå‘˜çš„é€šå‘Šåè®®ä¸åŒ¹é…ã€‚å¦‚æœåŠ å…¥æˆå‘˜æ²¡æœ‰é€‚å½“åè®®çš„ç™½åå•åœ°å€ï¼Œåˆ™æ‹’ç»å…¶è¿æ¥å°è¯•ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ ç¬¬18.5.1èŠ‚â€œIPåœ°å€ç™½åå•â€ã€‚</p><ul><li>é…ç½® group_replication_bootstrap_group æŒ‡ç¤ºæ’ä»¶æ˜¯å¦å¼•å¯¼ç»„ã€‚</li></ul><blockquote><p>æ­¤é€‰é¡¹åªèƒ½åœ¨ä»»ä½•æ—¶å€™åœ¨ä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹ä¸Šä½¿ç”¨ï¼Œé€šå¸¸æ˜¯ç¬¬ä¸€æ¬¡å¼•å¯¼ç»„æ—¶ï¼ˆæˆ–è€…åœ¨æ•´ä¸ªç»„å…³é—­å¹¶é‡æ–°å¤‡ä»½çš„æƒ…å†µä¸‹ï¼‰ã€‚å¦‚æœå¤šæ¬¡å¼•å¯¼ç»„ï¼Œä¾‹å¦‚å½“å¤šä¸ªæœåŠ¡å™¨å®ä¾‹è®¾ç½®äº†æ­¤é€‰é¡¹æ—¶ï¼Œåˆ™å¯ä»¥åˆ›å»ºä¸€ä¸ªäººå·¥åˆ†è£‚è„‘æƒ…æ™¯ï¼Œå…¶ä¸­å­˜åœ¨ä¸¤ä¸ªå…·æœ‰ç›¸åŒåç§°çš„ä¸åŒç»„ã€‚åœ¨ç¬¬ä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹è”æœºåç¦ç”¨æ­¤é€‰é¡¹ã€‚ç»„ä¸­æ‰€æœ‰æœåŠ¡å™¨çš„é…ç½®éå¸¸ç›¸ä¼¼ã€‚æ‚¨éœ€è¦æ›´æ”¹æœ‰å…³æ¯ä¸ªæœåŠ¡å™¨çš„ç»†èŠ‚ï¼ˆä¾‹å¦‚server_idï¼Œ datadirï¼Œ group_replication_local_addressï¼‰ã€‚æœ¬æ•™ç¨‹ç¨åå°†å¯¹æ­¤è¿›è¡Œè¯´æ˜ã€‚</p></blockquote><h2 id="3-ç”¨æˆ·å‡­è¯"><a href="#3-ç”¨æˆ·å‡­è¯" class="headerlink" title="3. ç”¨æˆ·å‡­è¯"></a>3. ç”¨æˆ·å‡­è¯</h2><p>ç»„å¤åˆ¶ä½¿ç”¨å¼‚æ­¥å¤åˆ¶åè®®æ¥å®ç° åˆ†å¸ƒå¼æ¢å¤è¿‡ç¨‹ä¾èµ–äºåä¸ºçš„å¤åˆ¶é€šé“group_replication_recoveryï¼Œè¯¥é€šé“ç”¨äºå°†æ¥è‡ªä¾›ä½“æˆå‘˜çš„äº‹åŠ¡è½¬ç§»åˆ°åŠ å…¥è¯¥ç»„çš„æˆå‘˜ã€‚å› æ­¤ï¼Œæ‚¨éœ€è¦è®¾ç½®å…·æœ‰æ­£ç¡®æƒé™çš„å¤åˆ¶ç”¨æˆ·ï¼Œä»¥ä¾¿ç»„å¤åˆ¶å¯ä»¥å»ºç«‹ç›´æ¥çš„æˆå‘˜åˆ°æˆå‘˜æ¢å¤å¤åˆ¶é€šé“ã€‚</p><p>ä½¿ç”¨é€‰é¡¹æ–‡ä»¶å¯åŠ¨æœåŠ¡å™¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql-8.0/bin/mysqld --defaults-file=data/s1/s1.cnf</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¯¥REPLICATION-SLAVEæƒé™åˆ›å»ºMySQLç”¨æˆ· ã€‚å¯ä»¥åœ¨äºŒè¿›åˆ¶æ—¥å¿—ä¸­æ•è·æ­¤è¿‡ç¨‹ï¼Œç„¶åæ‚¨å¯ä»¥ä¾é åˆ†å¸ƒå¼æ¢å¤æ¥å¤åˆ¶ç”¨äºåˆ›å»ºç”¨æˆ·çš„è¯­å¥ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ç¦ç”¨äºŒè¿›åˆ¶æ—¥å¿—è®°å½•ï¼Œç„¶ååœ¨æ¯ä¸ªæˆå‘˜ä¸Šæ‰‹åŠ¨åˆ›å»ºç”¨æˆ·ï¼Œä¾‹å¦‚ï¼Œå¦‚æœè¦é¿å…å°†æ›´æ”¹ä¼ æ’­åˆ°å…¶ä»–æœåŠ¡å™¨å®ä¾‹ã€‚è¦ç¦ç”¨äºŒè¿›åˆ¶æ—¥å¿—è®°å½•ï¼Œè¯·è¿æ¥åˆ°æœåŠ¡å™¨s1å¹¶å‘å‡ºä»¥ä¸‹è¯­å¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SET SQL_LOG_BIN=0;</span><br></pre></td></tr></table></figure><p>åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­rpl_userï¼Œå°†passwordæ˜¾ç¤ºå…·æœ‰å¯†ç  çš„ç”¨æˆ· ã€‚é…ç½®æœåŠ¡å™¨æ—¶ï¼Œè¯·ä½¿ç”¨åˆé€‚çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE USER rpl_user@&apos;%&apos; IDENTIFIED BY &apos;password&apos;;</span><br><span class="line">mysql&gt; GRANT REPLICATION SLAVE ON *.* TO rpl_user@&apos;%&apos;;</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p>å¦‚æœç¦ç”¨äº†äºŒè¿›åˆ¶æ—¥å¿—è®°å½•ï¼Œåˆ™åœ¨åˆ›å»ºç”¨æˆ·åå†æ¬¡å¯ç”¨å®ƒã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SET SQL_LOG_BIN=1;</span><br></pre></td></tr></table></figure><p>é…ç½®ç”¨æˆ·åï¼Œä½¿ç”¨è¯¥ CHANGE MASTER TOè¯­å¥å°†æœåŠ¡å™¨é…ç½®ä¸ºgroup_replication_recoveryåœ¨ä¸‹æ¬¡éœ€è¦ä»å¦ä¸€ä¸ªæˆå‘˜æ¢å¤å…¶çŠ¶æ€æ—¶ä½¿ç”¨å¤åˆ¶é€šé“çš„ç»™å®šå‡­æ® ã€‚å‘å‡ºä»¥ä¸‹ï¼Œæ›¿æ¢ rpl_userå’Œ passwordä¸åˆ›å»ºç”¨æˆ·æ—¶ä½¿ç”¨çš„å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CHANGE MASTER TO MASTER_USER=&apos;rpl_user&apos;, MASTER_PASSWORD=&apos;password&apos; \\</span><br><span class="line">      FOR CHANNEL &apos;group_replication_recovery&apos;;</span><br></pre></td></tr></table></figure><p>åˆ†å¸ƒå¼æ¢å¤æ˜¯åŠ å…¥ç»„çš„æœåŠ¡å™¨é‡‡å–çš„ç¬¬ä¸€æ­¥ï¼Œå¹¶ä¸”æ²¡æœ‰ä¸ç»„æˆå‘˜ç›¸åŒçš„äº‹åŠ¡é›†ã€‚å¦‚æœæ²¡æœ‰ä¸ºgroup_replication_recovery å¤åˆ¶é€šé“æ­£ç¡®è®¾ç½®è¿™äº›å‡­æ®ï¼Œå¹¶ä¸”rpl_userå¦‚å›¾æ‰€ç¤ºï¼Œåˆ™æœåŠ¡å™¨æ— æ³•è¿æ¥åˆ°ä¾›ä½“æˆå‘˜å¹¶è¿è¡Œåˆ†å¸ƒå¼æ¢å¤è¿‡ç¨‹ä»¥ä¸å…¶ä»–ç»„æˆå‘˜åŒæ­¥ï¼Œå› æ­¤æœ€ç»ˆæ— æ³•åŠ å…¥è¯¥ç»„ã€‚</p><p>åŒæ ·ï¼Œå¦‚æœæœåŠ¡å™¨æ— æ³•é€šè¿‡æœåŠ¡å™¨æ­£ç¡®è¯†åˆ«å…¶ä»–æˆå‘˜ï¼Œhostnameåˆ™æ¢å¤è¿‡ç¨‹å¯èƒ½ä¼šå¤±è´¥ã€‚å»ºè®®è¿è¡ŒMySQLçš„æ“ä½œç³»ç»Ÿå…·æœ‰æ­£ç¡®é…ç½®çš„å”¯ä¸€ hostnameï¼Œä½¿ç”¨DNSæˆ–æœ¬åœ°è®¾ç½®ã€‚è¿™hostnameå¯ä»¥Member_hoståœ¨performance_schema.replication_group_members è¡¨æ ¼çš„åˆ—ä¸­ è¿›è¡ŒéªŒè¯ ã€‚å¦‚æœå¤šä¸ªç»„æˆå‘˜å¤–éƒ¨åŒ–hostnameæ“ä½œç³»ç»Ÿçš„é»˜è®¤ è®¾ç½®ï¼Œåˆ™æˆå‘˜å¯èƒ½æ— æ³•è§£æä¸ºæ­£ç¡®çš„æˆå‘˜åœ°å€è€Œæ— æ³•åŠ å…¥è¯¥ç»„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨report_hosté…ç½®hostnameç”±æ¯ä¸ªæœåŠ¡å™¨å¤–éƒ¨åŒ–çš„å”¯ä¸€ã€‚</p><h3 id="ä½¿ç”¨ç»„å¤åˆ¶å’Œç¼“å­˜SHA-2ç”¨æˆ·å‡­æ®æ’ä»¶"><a href="#ä½¿ç”¨ç»„å¤åˆ¶å’Œç¼“å­˜SHA-2ç”¨æˆ·å‡­æ®æ’ä»¶" class="headerlink" title="ä½¿ç”¨ç»„å¤åˆ¶å’Œç¼“å­˜SHA-2ç”¨æˆ·å‡­æ®æ’ä»¶"></a>ä½¿ç”¨ç»„å¤åˆ¶å’Œç¼“å­˜SHA-2ç”¨æˆ·å‡­æ®æ’ä»¶</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨MySQL 8ä¸­åˆ›å»ºçš„ç”¨æˆ·ä½¿ç”¨ ç¼“å­˜SHA-2å¯æ’å…¥èº«ä»½éªŒè¯ã€‚å¦‚æœrpl_useræ‚¨é…ç½®åˆ†å¸ƒå¼æ¢å¤ä½¿ç”¨ç¼“å­˜SHA-2è®¤è¯æ’ä»¶å¹¶æ²¡æœ‰ä½¿ç”¨å®‰å…¨å¥—æ¥å­—å±‚æ”¯æŒï¼ˆSSLï¼‰ çš„group_replication_recovery å¤åˆ¶é€šé“ï¼ŒRSAå¯†é’¥ç”¨äºå¯†ç äº¤æ¢ï¼Œåˆ›å»ºSSLå’ŒRSAè¯ä¹¦å’Œå¯†é’¥ï¼Œæ‚¨å¯ä»¥å°†rpl_useråº”è¯¥ä»ç»„ä¸­æ¢å¤å…¶çŠ¶æ€çš„æˆå‘˜çš„å…¬é’¥å¤åˆ¶ åˆ°è¯¥ç»„ï¼Œä¹Ÿå¯ä»¥å°†æèµ è€…é…ç½®ä¸ºåœ¨è¯·æ±‚æ—¶æä¾›å…¬é’¥ã€‚</p><p>æ›´å®‰å…¨çš„æ–¹æ³•æ˜¯å°†å…¬é’¥å¤åˆ¶ rpl_useråˆ°åº”è¯¥ä»æèµ è€…æ¢å¤ç»„çŠ¶æ€çš„æˆå‘˜ã€‚ç„¶åï¼Œæ‚¨éœ€è¦group_replication_recovery_public_key_path åœ¨åŠ å…¥ç»„çš„æˆå‘˜ä¸Šé…ç½® ç³»ç»Ÿå˜é‡ï¼Œå¹¶ä¸ºå…¶æä¾›å…¬é’¥çš„è·¯å¾„rpl_userã€‚</p><p>å¯é€‰åœ°ï¼Œä¸å¤ªå®‰å…¨çš„æ–¹æ³•æ˜¯è®¾ç½® group_replication_recovery_get_public_key=ON æèµ è€…ï¼Œä»¥ä¾¿ä»–ä»¬rpl_useråœ¨åŠ å…¥ç»„æ—¶æä¾›æˆå‘˜çš„å…¬é’¥ ã€‚æ— æ³•éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œå› æ­¤åªæœ‰group_replication_recovery_get_public_key=ON åœ¨æ‚¨ç¡®å®šæ²¡æœ‰æœåŠ¡å™¨èº«ä»½è¢«æ³„éœ²çš„é£é™©æ—¶æ‰ä¼šè®¾ç½® ï¼Œä¾‹å¦‚é€šè¿‡ä¸­é—´äººæ”»å‡»ã€‚</p><h2 id="4-å¯åŠ¨ç»„å¤åˆ¶"><a href="#4-å¯åŠ¨ç»„å¤åˆ¶" class="headerlink" title="4. å¯åŠ¨ç»„å¤åˆ¶"></a>4. å¯åŠ¨ç»„å¤åˆ¶</h2><p>é…ç½®å¹¶å¯åŠ¨æœåŠ¡å™¨s1åï¼Œå®‰è£…ç»„å¤åˆ¶æ’ä»¶ã€‚è¿æ¥åˆ°æœåŠ¡å™¨å¹¶å‘å‡ºä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSTALL PLUGIN group_replication SONAME &apos;group_replication.so&apos;;</span><br></pre></td></tr></table></figure><blockquote><p>mysql.sessionåœ¨åŠ è½½ç»„å¤åˆ¶ä¹‹å‰ï¼Œç”¨æˆ·å¿…é¡»å­˜åœ¨ã€‚ MySQL 8.0.2ç‰ˆä¸­æ·»åŠ äº†mysql.sessionã€‚å¦‚æœä½¿ç”¨æ—©æœŸç‰ˆæœ¬åˆå§‹åŒ–æ•°æ®å­—å…¸ï¼Œåˆ™å¿…é¡»è¿è¡Œ mysql_upgradeè¿‡ç¨‹ã€‚å¦‚æœæœªè¿è¡Œå‡çº§ï¼Œåˆ™ç»„å¤åˆ¶æ— æ³•ä»¥é”™è¯¯æ¶ˆæ¯å¯åŠ¨å°è¯•ä½¿ç”¨ç”¨æˆ·è®¿é—®æœåŠ¡å™¨æ—¶å‡ºç°é”™è¯¯ï¼šmysql.session@localhostã€‚ç¡®ä¿ç”¨æˆ·åœ¨æœåŠ¡å™¨ä¸­ï¼Œå¹¶ä¸”åœ¨æœåŠ¡å™¨æ›´æ–°åè¿è¡Œäº†mysql_upgradeã€‚</p></blockquote><p>è¦æ£€æŸ¥æ’ä»¶æ˜¯å¦å·²æˆåŠŸå®‰è£…ï¼Œè¯·å‘å‡º SHOW PLUGINS;å¹¶æ£€æŸ¥è¾“å‡ºã€‚å®ƒåº”è¯¥æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW PLUGINS;</span><br><span class="line">+----------------------------+----------+--------------------+----------------------+-------------+</span><br><span class="line">| Name                       | Status   | Type               | Library              | License     |</span><br><span class="line">+----------------------------+----------+--------------------+----------------------+-------------+</span><br><span class="line">| binlog                     | ACTIVE   | STORAGE ENGINE     | NULL                 | PROPRIETARY |</span><br><span class="line"></span><br><span class="line">(...)</span><br><span class="line"></span><br><span class="line">| group_replication          | ACTIVE   | GROUP REPLICATION  | group_replication.so | PROPRIETARY |</span><br><span class="line">+----------------------------+----------+--------------------+----------------------+-------------+</span><br></pre></td></tr></table></figure><p>è¦å¯åŠ¨è¯¥ç»„ï¼Œè¯·æŒ‡ç¤ºæœåŠ¡å™¨s1å¼•å¯¼è¯¥ç»„ï¼Œç„¶åå¯åŠ¨ç»„å¤åˆ¶ã€‚æ­¤å¼•å¯¼ç¨‹åºåº”ä»…ç”±å•ä¸ªæœåŠ¡å™¨å®Œæˆï¼Œè¯¥æœåŠ¡å™¨å¯åŠ¨ç»„å¹¶ä¸”åªæ‰§è¡Œä¸€æ¬¡ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆbootstrapé…ç½®é€‰é¡¹çš„å€¼æœªä¿å­˜åœ¨é…ç½®æ–‡ä»¶ä¸­çš„åŸå› ã€‚å¦‚æœå®ƒä¿å­˜åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œåˆ™åœ¨é‡æ–°å¯åŠ¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨å¼•å¯¼å…·æœ‰ç›¸åŒåç§°çš„ç¬¬äºŒä¸ªç»„ã€‚è¿™å°†å¯¼è‡´ä¸¤ä¸ªå…·æœ‰ç›¸åŒåç§°çš„ä¸åŒç»„ã€‚åŒæ ·çš„æ¨ç†é€‚ç”¨äºåœ¨æ­¤é€‰é¡¹è®¾ç½®ä¸ºçš„æƒ…å†µä¸‹åœæ­¢å¹¶é‡æ–°å¯åŠ¨æ’ä»¶ONã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL group_replication_bootstrap_group=ON;</span><br><span class="line">START GROUP_REPLICATION;</span><br><span class="line">SET GLOBAL group_replication_bootstrap_group=OFF;</span><br></pre></td></tr></table></figure><p>ä¸€æ—¦START GROUP_REPLICATION è¯­å¥è¿”å›ï¼Œè¯¥é›†å›¢å·²å¯åŠ¨ã€‚æ‚¨å¯ä»¥æ£€æŸ¥è¯¥ç»„ç°åœ¨æ˜¯å¦å·²åˆ›å»ºï¼Œå¹¶ä¸”å…¶ä¸­åŒ…å«ä¸€ä¸ªæˆå‘˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM performance_schema.replication_group_members;</span><br><span class="line">+---------------------------+--------------------------------------+-------------+-------------+---------------+</span><br><span class="line">| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST | MEMBER_PORT | MEMBER_STATE  |</span><br><span class="line">+---------------------------+--------------------------------------+-------------+-------------+---------------+</span><br><span class="line">| group_replication_applier | ce9be252-2b71-11e6-b8f4-00212844f856 | myhost      |       24801 | ONLINE        |</span><br><span class="line">+---------------------------+--------------------------------------+-------------+-------------+---------------+</span><br></pre></td></tr></table></figure><p>æ­¤è¡¨ä¸­çš„ä¿¡æ¯ç¡®è®¤ç»„ä¸­æœ‰æˆå‘˜å…·æœ‰å”¯ä¸€æ ‡è¯†ç¬¦ ce9be252-2b71-11e6-b8f4-00212844f856ï¼Œå®ƒæ­£åœ¨ONLINEå¹¶ä¸”æ­£åœ¨myhost ä¾¦å¬ç«¯å£ä¸Šçš„å®¢æˆ·ç«¯è¿æ¥ 24801ã€‚</p><p>ä¸ºäº†è¯æ˜æœåŠ¡å™¨ç¡®å®åœ¨ä¸€ä¸ªç»„ä¸­å¹¶ä¸”å®ƒèƒ½å¤Ÿå¤„ç†è´Ÿè½½ï¼Œåˆ›å»ºä¸€ä¸ªè¡¨å¹¶å‘å…¶æ·»åŠ ä¸€äº›å†…å®¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE DATABASE test;</span><br><span class="line">mysql&gt; USE test;</span><br><span class="line">mysql&gt; CREATE TABLE t1 (c1 INT PRIMARY KEY, c2 TEXT NOT NULL);</span><br><span class="line">mysql&gt; INSERT INTO t1 VALUES (1, &apos;Luis&apos;);</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥è¡¨çš„å†…å®¹t1å’ŒäºŒè¿›åˆ¶æ—¥å¿—ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM t1;</span><br><span class="line">+----+------+</span><br><span class="line">| c1 | c2   |</span><br><span class="line">+----+------+</span><br><span class="line">|  1 | Luis |</span><br><span class="line">+----+------+</span><br><span class="line"></span><br><span class="line">mysql&gt; SHOW BINLOG EVENTS;</span><br><span class="line">+---------------+-----+----------------+-----------+-------------+--------------------------------------------------------------------+</span><br><span class="line">| Log_name      | Pos | Event_type     | Server_id | End_log_pos | Info                                                               |</span><br><span class="line">+---------------+-----+----------------+-----------+-------------+--------------------------------------------------------------------+</span><br><span class="line">| binlog.000001 |   4 | Format_desc    |         1 |         123 | Server ver: 8.0.2-gr080-log, Binlog ver: 4                        |</span><br><span class="line">| binlog.000001 | 123 | Previous_gtids |         1 |         150 |                                                                    |</span><br><span class="line">| binlog.000001 | 150 | Gtid           |         1 |         211 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1&apos;  |</span><br><span class="line">| binlog.000001 | 211 | Query          |         1 |         270 | BEGIN                                                              |</span><br><span class="line">| binlog.000001 | 270 | View_change    |         1 |         369 | view_id=14724817264259180:1                                        |</span><br><span class="line">| binlog.000001 | 369 | Query          |         1 |         434 | COMMIT                                                             |</span><br><span class="line">| binlog.000001 | 434 | Gtid           |         1 |         495 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:2&apos;  |</span><br><span class="line">| binlog.000001 | 495 | Query          |         1 |         585 | CREATE DATABASE test                                               |</span><br><span class="line">| binlog.000001 | 585 | Gtid           |         1 |         646 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:3&apos;  |</span><br><span class="line">| binlog.000001 | 646 | Query          |         1 |         770 | use `test`; CREATE TABLE t1 (c1 INT PRIMARY KEY, c2 TEXT NOT NULL) |</span><br><span class="line">| binlog.000001 | 770 | Gtid           |         1 |         831 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:4&apos;  |</span><br><span class="line">| binlog.000001 | 831 | Query          |         1 |         899 | BEGIN                                                              |</span><br><span class="line">| binlog.000001 | 899 | Table_map      |         1 |         942 | table_id: 108 (test.t1)                                            |</span><br><span class="line">| binlog.000001 | 942 | Write_rows     |         1 |         984 | table_id: 108 flags: STMT_END_F                                    |</span><br><span class="line">| binlog.000001 | 984 | Xid            |         1 |        1011 | COMMIT /* xid=38 */                                                |</span><br><span class="line">+---------------+-----+----------------+-----------+-------------+--------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œåˆ›å»ºäº†æ•°æ®åº“å’Œè¡¨å¯¹è±¡ï¼Œå¹¶å°†ç›¸åº”çš„DDLè¯­å¥å†™å…¥äºŒè¿›åˆ¶æ—¥å¿—ã€‚æ­¤å¤–ï¼Œæ•°æ®å·²æ’å…¥è¡¨ä¸­å¹¶å†™å…¥äºŒè¿›åˆ¶æ—¥å¿—ã€‚å½“ç»„æˆé•¿å¹¶ä¸”æ–°æˆå‘˜å°è¯•èµ¶ä¸Šå¹¶è”æœºæ—¶æ‰§è¡Œåˆ†å¸ƒå¼æ¢å¤æ—¶ï¼Œä¸‹ä¸€èŠ‚å°†è¯´æ˜äºŒè¿›åˆ¶æ—¥å¿—æ¡ç›®çš„é‡è¦æ€§ã€‚</p><h2 id="5-å‘ç»„æ·»åŠ å®ä¾‹"><a href="#5-å‘ç»„æ·»åŠ å®ä¾‹" class="headerlink" title="5. å‘ç»„æ·»åŠ å®ä¾‹"></a>5. å‘ç»„æ·»åŠ å®ä¾‹</h2><p>æ­¤æ—¶ï¼Œè¯¥ç»„ä¸­æœ‰ä¸€ä¸ªæˆå‘˜æœåŠ¡å™¨s1ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›æ•°æ®ã€‚ç°åœ¨æ˜¯æ—¶å€™é€šè¿‡æ·»åŠ å…ˆå‰é…ç½®çš„å…¶ä»–ä¸¤ä¸ªæœåŠ¡å™¨æ¥æ‰©å±•ç»„ã€‚</p><h3 id="æ·»åŠ ç¬¬äºŒä¸ªå®ä¾‹"><a href="#æ·»åŠ ç¬¬äºŒä¸ªå®ä¾‹" class="headerlink" title="æ·»åŠ ç¬¬äºŒä¸ªå®ä¾‹"></a>æ·»åŠ ç¬¬äºŒä¸ªå®ä¾‹</h3><p>ä¸ºäº†æ·»åŠ ç¬¬äºŒä¸ªå®ä¾‹ï¼ŒæœåŠ¡å™¨s2ï¼Œé¦–å…ˆä¸ºå®ƒåˆ›å»ºé…ç½®æ–‡ä»¶ã€‚é…ç½®ç±»ä¼¼äºç”¨äºæœåŠ¡å™¨s1çš„é…ç½®ï¼Œé™¤äº†è¯¸å¦‚æ•°æ®ç›®å½•çš„ä½ç½®ï¼Œs2å°†è¦ç›‘å¬çš„ç«¯å£æˆ–å…¶ä¹‹å¤–çš„é…ç½® server_idã€‚è¿™äº›ä¸åŒçš„è¡Œåœ¨ä¸‹é¢çš„åˆ—è¡¨ä¸­çªå‡ºæ˜¾ç¤ºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># server configuration</span><br><span class="line">datadir=&lt;full_path_to_data&gt;/data/s2</span><br><span class="line">basedir=&lt;full_path_to_bin&gt;/mysql-8.0/</span><br><span class="line"></span><br><span class="line">port=24802</span><br><span class="line">socket=&lt;full_path_to_sock_dir&gt;/s2.sock</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Replication configuration parameters</span><br><span class="line">#</span><br><span class="line">server_id=2</span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce_gtid_consistency=ON</span><br><span class="line">binlog_checksum=NONE</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Group Replication configuration</span><br><span class="line">#</span><br><span class="line">transaction_write_set_extraction=XXHASH64</span><br><span class="line">group_replication_group_name=&quot;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa&quot;</span><br><span class="line">group_replication_start_on_boot=off</span><br><span class="line">group_replication_local_address= &quot;127.0.0.1:24902&quot;</span><br><span class="line">group_replication_group_seeds= &quot;127.0.0.1:24901,127.0.0.1:24902,127.0.0.1:24903&quot;</span><br><span class="line">group_replication_bootstrap_group= off</span><br></pre></td></tr></table></figure><p>ä¸æœåŠ¡å™¨s1çš„è¿‡ç¨‹ç±»ä¼¼ï¼Œä½¿ç”¨é€‰é¡¹æ–‡ä»¶å¯åŠ¨æœåŠ¡å™¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql-8.0/bin/mysqld --defaults-file=data/s2/s2.cnf</span><br></pre></td></tr></table></figure><p>ç„¶åæŒ‰å¦‚ä¸‹æ–¹å¼é…ç½®æ¢å¤å‡­æ®ã€‚è¿™äº›å‘½ä»¤ä¸è®¾ç½®æœåŠ¡å™¨s1æ—¶ä½¿ç”¨çš„å‘½ä»¤ç›¸åŒï¼Œå› ä¸ºç”¨æˆ·åœ¨ç»„å†…å…±äº«ã€‚åœ¨s2ä¸Šå‘å¸ƒä»¥ä¸‹è¯­å¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SET SQL_LOG_BIN=0;</span><br><span class="line">CREATE USER rpl_user@&apos;%&apos; IDENTIFIED BY &apos;password&apos;;</span><br><span class="line">GRANT REPLICATION SLAVE ON *.* TO rpl_user@&apos;%&apos;;</span><br><span class="line">SET SQL_LOG_BIN=1;</span><br><span class="line">CHANGE MASTER TO MASTER_USER=&apos;rpl_user&apos;, MASTER_PASSWORD=&apos;password&apos; \\</span><br><span class="line">FOR CHANNEL &apos;group_replication_recovery&apos;;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ç¼“å­˜SHA-2èº«ä»½éªŒè¯æ’ä»¶ï¼ˆMySQL 8ä¸­çš„é»˜è®¤è®¾ç½®ï¼‰ï¼Œè¯·å‚é˜… ä½¿ç”¨ç»„å¤åˆ¶å’Œç¼“å­˜SHA-2ç”¨æˆ·å‡­æ®æ’ä»¶ã€‚</p></blockquote><p>å®‰è£…ç»„å¤åˆ¶æ’ä»¶å¹¶å¼€å§‹å°†æœåŠ¡å™¨åŠ å…¥ç»„çš„è¿‡ç¨‹ã€‚ä»¥ä¸‹ç¤ºä¾‹ä»¥ä¸éƒ¨ç½²æœåŠ¡å™¨s1æ—¶ç›¸åŒçš„æ–¹å¼å®‰è£…æ’ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSTALL PLUGIN group_replication SONAME &apos;group_replication.so&apos;;</span><br></pre></td></tr></table></figure><p>å°†æœåŠ¡å™¨s2æ·»åŠ åˆ°ç»„ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; START GROUP_REPLICATION;</span><br></pre></td></tr></table></figure><p>ä¸ä¹‹å‰çš„æ­¥éª¤ï¼ˆä¸s1ä¸Šæ‰§è¡Œçš„æ­¥éª¤ç›¸åŒï¼‰ä¸åŒï¼Œæ­¤å¤„çš„åŒºåˆ«åœ¨äºï¼Œ åœ¨å¯åŠ¨ç»„å¤åˆ¶ä¹‹å‰ä¸ä¼šå‘å‡ºSET GLOBAL group_replication_bootstrap_group=ON;ï¼Œå› ä¸ºè¯¥ç»„å·²ç”±æœåŠ¡å™¨s1åˆ›å»ºå¹¶å¼•å¯¼ã€‚æ­¤æ—¶ï¼Œåªéœ€å°†æœåŠ¡å™¨s2æ·»åŠ åˆ°ç°æœ‰ç»„ä¸­ã€‚</p><blockquote><p>å½“ç»„å¤åˆ¶æˆåŠŸå¯åŠ¨å¹¶ä¸”æœåŠ¡å™¨åŠ å…¥ç»„æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥ super_read_onlyå˜é‡ã€‚é€šè¿‡super_read_only åœ¨æˆå‘˜çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸ºONï¼Œå¯ä»¥ç¡®ä¿å› ä»»ä½•åŸå› å¯åŠ¨ç»„å¤åˆ¶æ—¶å‡ºç°æ•…éšœçš„æœåŠ¡å™¨ä¸æ¥å—äº‹åŠ¡ã€‚å¦‚æœæœåŠ¡å™¨åº”å°†è¯¥ç»„ä½œä¸ºè¯»å†™å®ä¾‹åŠ å…¥ï¼Œä¾‹å¦‚ä½œä¸ºå•ä¸»ç»„ä¸­çš„ä¸»è¦ç»„æˆ–å¤šä¸»ç»„çš„æˆå‘˜ï¼Œåˆ™å½“è¯¥ super_read_onlyå˜é‡è®¾ç½®ä¸ºONæ—¶ï¼Œåˆ™åœ¨åŠ å…¥æ—¶å°†å…¶è®¾ç½®ä¸ºOFFç¾¤ç»„ã€‚</p></blockquote><p>performance_schema.replication_group_members å†æ¬¡ æ£€æŸ¥ è¡¨æ˜¾ç¤ºè¯¥ç»„ä¸­ç°åœ¨æœ‰ä¸¤ä¸ª ONLINEæœåŠ¡å™¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM performance_schema.replication_group_members;</span><br><span class="line">+---------------------------+--------------------------------------+-------------+-------------+---------------+</span><br><span class="line">| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST | MEMBER_PORT | MEMBER_STATE  |</span><br><span class="line">+---------------------------+--------------------------------------+-------------+-------------+---------------+</span><br><span class="line">| group_replication_applier | 395409e1-6dfa-11e6-970b-00212844f856 | myhost      |       24801 | ONLINE        |</span><br><span class="line">| group_replication_applier | ac39f1e6-6dfa-11e6-a69d-00212844f856 | myhost      |       24802 | ONLINE        |</span><br><span class="line">+---------------------------+--------------------------------------+-------------+-------------+---------------+</span><br></pre></td></tr></table></figure><p>ç”±äºæœåŠ¡å™¨s2ä¹Ÿæ ‡è®°ä¸ºONLINEï¼Œå®ƒå¿…é¡»å·²ç»è‡ªåŠ¨èµ¶ä¸ŠæœåŠ¡å™¨s1ã€‚éªŒè¯å®ƒç¡®å®å·²ä¸æœåŠ¡å™¨s1åŒæ­¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW DATABASES LIKE &apos;test&apos;;</span><br><span class="line">+-----------------+</span><br><span class="line">| Database (test) |</span><br><span class="line">+-----------------+</span><br><span class="line">| test            |</span><br><span class="line">+-----------------+</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT * FROM test.t1;</span><br><span class="line">+----+------+</span><br><span class="line">| c1 | c2   |</span><br><span class="line">+----+------+</span><br><span class="line">|  1 | Luis |</span><br><span class="line">+----+------+</span><br><span class="line"></span><br><span class="line">mysql&gt; SHOW BINLOG EVENTS;</span><br><span class="line">+---------------+------+----------------+-----------+-------------+--------------------------------------------------------------------+</span><br><span class="line">| Log_name      | Pos  | Event_type     | Server_id | End_log_pos | Info                                                               |</span><br><span class="line">+---------------+------+----------------+-----------+-------------+--------------------------------------------------------------------+</span><br><span class="line">| binlog.000001 |    4 | Format_desc    |         2 |         123 | Server ver: 8.0.3-log, Binlog ver: 4                              |</span><br><span class="line">| binlog.000001 |  123 | Previous_gtids |         2 |         150 |                                                                    |</span><br><span class="line">| binlog.000001 |  150 | Gtid           |         1 |         211 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1&apos;  |</span><br><span class="line">| binlog.000001 |  211 | Query          |         1 |         270 | BEGIN                                                              |</span><br><span class="line">| binlog.000001 |  270 | View_change    |         1 |         369 | view_id=14724832985483517:1                                        |</span><br><span class="line">| binlog.000001 |  369 | Query          |         1 |         434 | COMMIT                                                             |</span><br><span class="line">| binlog.000001 |  434 | Gtid           |         1 |         495 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:2&apos;  |</span><br><span class="line">| binlog.000001 |  495 | Query          |         1 |         585 | CREATE DATABASE test                                               |</span><br><span class="line">| binlog.000001 |  585 | Gtid           |         1 |         646 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:3&apos;  |</span><br><span class="line">| binlog.000001 |  646 | Query          |         1 |         770 | use `test`; CREATE TABLE t1 (c1 INT PRIMARY KEY, c2 TEXT NOT NULL) |</span><br><span class="line">| binlog.000001 |  770 | Gtid           |         1 |         831 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:4&apos;  |</span><br><span class="line">| binlog.000001 |  831 | Query          |         1 |         890 | BEGIN                                                              |</span><br><span class="line">| binlog.000001 |  890 | Table_map      |         1 |         933 | table_id: 108 (test.t1)                                            |</span><br><span class="line">| binlog.000001 |  933 | Write_rows     |         1 |         975 | table_id: 108 flags: STMT_END_F                                    |</span><br><span class="line">| binlog.000001 |  975 | Xid            |         1 |        1002 | COMMIT /* xid=30 */                                                |</span><br><span class="line">| binlog.000001 | 1002 | Gtid           |         1 |        1063 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:5&apos;  |</span><br><span class="line">| binlog.000001 | 1063 | Query          |         1 |        1122 | BEGIN                                                              |</span><br><span class="line">| binlog.000001 | 1122 | View_change    |         1 |        1261 | view_id=14724832985483517:2                                        |</span><br><span class="line">| binlog.000001 | 1261 | Query          |         1 |        1326 | COMMIT                                                             |</span><br><span class="line">+---------------+------+----------------+-----------+-------------+--------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œç¬¬äºŒå°æœåŠ¡å™¨å·²æ·»åŠ åˆ°ç»„ä¸­ï¼Œå¹¶è‡ªåŠ¨ä»æœåŠ¡å™¨s1å¤åˆ¶äº†æ›´æ”¹ã€‚æ ¹æ®åˆ†å¸ƒå¼æ¢å¤è¿‡ç¨‹ï¼Œè¿™æ„å‘³ç€åœ¨åŠ å…¥ç»„ä¹‹åå¹¶ä¸”åœ¨è¢«å£°æ˜åœ¨çº¿ä¹‹å‰ï¼ŒæœåŠ¡å™¨s2å·²ç»è‡ªåŠ¨è¿æ¥åˆ°æœåŠ¡å™¨s1å¹¶ä»ä¸­è·å–ä¸¢å¤±çš„æ•°æ®ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå°†äº‹åŠ¡ä»ç¼ºå°‘çš„s1çš„äºŒè¿›åˆ¶æ—¥å¿—å¤åˆ¶åˆ°å®ƒåŠ å…¥ç»„çš„æ—¶é—´ç‚¹ã€‚</p><h3 id="æ·»åŠ å…¶ä»–å®ä¾‹"><a href="#æ·»åŠ å…¶ä»–å®ä¾‹" class="headerlink" title="æ·»åŠ å…¶ä»–å®ä¾‹"></a>æ·»åŠ å…¶ä»–å®ä¾‹</h3><p>å‘ç»„æ·»åŠ å…¶ä»–å®ä¾‹ä¸æ·»åŠ ç¬¬äºŒä¸ªæœåŠ¡å™¨çš„æ­¥éª¤é¡ºåºåŸºæœ¬ç›¸åŒï¼Œåªæ˜¯å¿…é¡»æ›´æ”¹é…ç½®ï¼Œå› ä¸ºå¿…é¡»æ›´æ”¹æœåŠ¡å™¨s2ã€‚æ€»ç»“æ‰€éœ€çš„å‘½ä»¤ï¼š</p><ol><li>åˆ›å»ºé…ç½®æ–‡ä»¶</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># server configuration</span><br><span class="line">datadir=&lt;full_path_to_data&gt;/data/s3</span><br><span class="line">basedir=&lt;full_path_to_bin&gt;/mysql-8.0/</span><br><span class="line"></span><br><span class="line">port=24803</span><br><span class="line">socket=&lt;full_path_to_sock_dir&gt;/s3.sock</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Replication configuration parameters</span><br><span class="line">#</span><br><span class="line">server_id=3</span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce_gtid_consistency=ON</span><br><span class="line">binlog_checksum=NONE</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Group Replication configuration</span><br><span class="line">#</span><br><span class="line">group_replication_group_name=&quot;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa&quot;</span><br><span class="line">group_replication_start_on_boot=off</span><br><span class="line">group_replication_local_address= &quot;127.0.0.1:24903&quot;</span><br><span class="line">group_replication_group_seeds= &quot;127.0.0.1:24901,127.0.0.1:24902,127.0.0.1:24903&quot;</span><br><span class="line">group_replication_bootstrap_group= off</span><br></pre></td></tr></table></figure><ol start="2"><li>å¯åŠ¨æœåŠ¡å™¨</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql-8.0/bin/mysqld --defaults-file=data/s3/s3.cnf</span><br></pre></td></tr></table></figure><ol start="3"><li>é…ç½®group_replication_recoveryé€šé“çš„æ¢å¤å‡­æ®ã€‚</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SET SQL_LOG_BIN=0;</span><br><span class="line">CREATE USER rpl_user@&apos;%&apos; IDENTIFIED BY &apos;password&apos;;</span><br><span class="line">GRANT REPLICATION SLAVE ON *.* TO rpl_user@&apos;%&apos;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line">SET SQL_LOG_BIN=1;</span><br><span class="line">CHANGE MASTER TO MASTER_USER=&apos;rpl_user&apos;, MASTER_PASSWORD=&apos;password&apos;  \\</span><br><span class="line">FOR CHANNEL &apos;group_replication_recovery&apos;;</span><br></pre></td></tr></table></figure><ol start="4"><li>å®‰è£…Group Replicationæ’ä»¶å¹¶å¯åŠ¨å®ƒã€‚</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSTALL PLUGIN group_replication SONAME &apos;group_replication.so&apos;;</span><br><span class="line">START GROUP_REPLICATION;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼ŒæœåŠ¡å™¨s3å·²å¯åŠ¨å¹¶æ­£åœ¨è¿è¡Œï¼Œå·²åŠ å…¥è¯¥ç»„å¹¶èµ¶ä¸Šè¯¥ç»„ä¸­çš„å…¶ä»–æœåŠ¡å™¨ã€‚performance_schema.replication_group_members å†æ¬¡å’¨è¯¢ è¡¨è¯å®äº†è¿™ç§æƒ…å†µã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM performance_schema.replication_group_members;</span><br><span class="line">+---------------------------+--------------------------------------+-------------+-------------+---------------+</span><br><span class="line">| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST | MEMBER_PORT | MEMBER_STATE  |</span><br><span class="line">+---------------------------+--------------------------------------+-------------+-------------+---------------+</span><br><span class="line">| group_replication_applier | 395409e1-6dfa-11e6-970b-00212844f856 | myhost      |       24801 | ONLINE        |</span><br><span class="line">| group_replication_applier | 7eb217ff-6df3-11e6-966c-00212844f856 | myhost      |       24803 | ONLINE        |</span><br><span class="line">| group_replication_applier | ac39f1e6-6dfa-11e6-a69d-00212844f856 | myhost      |       24802 | ONLINE        |</span><br><span class="line">+---------------------------+--------------------------------------+-------------+-------------+---------------+</span><br></pre></td></tr></table></figure><p>åœ¨æœåŠ¡å™¨s2æˆ–æœåŠ¡å™¨s1ä¸Šå‘å‡ºç›¸åŒçš„æŸ¥è¯¢ä¼šäº§ç”Ÿç›¸åŒçš„ç»“æœã€‚æ­¤å¤–ï¼Œæ‚¨å¯ä»¥éªŒè¯æœåŠ¡å™¨s3æ˜¯å¦ä¹Ÿèµ¶ä¸Šäº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW DATABASES LIKE &apos;test&apos;;</span><br><span class="line">+-----------------+</span><br><span class="line">| Database (test) |</span><br><span class="line">+-----------------+</span><br><span class="line">| test            |</span><br><span class="line">+-----------------+</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT * FROM test.t1;</span><br><span class="line">+----+------+</span><br><span class="line">| c1 | c2   |</span><br><span class="line">+----+------+</span><br><span class="line">|  1 | Luis |</span><br><span class="line">+----+------+</span><br><span class="line"></span><br><span class="line">mysql&gt; SHOW BINLOG EVENTS;</span><br><span class="line">+---------------+------+----------------+-----------+-------------+--------------------------------------------------------------------+</span><br><span class="line">| Log_name      | Pos  | Event_type     | Server_id | End_log_pos | Info                                                               |</span><br><span class="line">+---------------+------+----------------+-----------+-------------+--------------------------------------------------------------------+</span><br><span class="line">| binlog.000001 |    4 | Format_desc    |         3 |         123 | Server ver: 8.0.3-log, Binlog ver: 4                              |</span><br><span class="line">| binlog.000001 |  123 | Previous_gtids |         3 |         150 |                                                                    |</span><br><span class="line">| binlog.000001 |  150 | Gtid           |         1 |         211 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1&apos;  |</span><br><span class="line">| binlog.000001 |  211 | Query          |         1 |         270 | BEGIN                                                              |</span><br><span class="line">| binlog.000001 |  270 | View_change    |         1 |         369 | view_id=14724832985483517:1                                        |</span><br><span class="line">| binlog.000001 |  369 | Query          |         1 |         434 | COMMIT                                                             |</span><br><span class="line">| binlog.000001 |  434 | Gtid           |         1 |         495 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:2&apos;  |</span><br><span class="line">| binlog.000001 |  495 | Query          |         1 |         585 | CREATE DATABASE test                                               |</span><br><span class="line">| binlog.000001 |  585 | Gtid           |         1 |         646 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:3&apos;  |</span><br><span class="line">| binlog.000001 |  646 | Query          |         1 |         770 | use `test`; CREATE TABLE t1 (c1 INT PRIMARY KEY, c2 TEXT NOT NULL) |</span><br><span class="line">| binlog.000001 |  770 | Gtid           |         1 |         831 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:4&apos;  |</span><br><span class="line">| binlog.000001 |  831 | Query          |         1 |         890 | BEGIN                                                              |</span><br><span class="line">| binlog.000001 |  890 | Table_map      |         1 |         933 | table_id: 108 (test.t1)                                            |</span><br><span class="line">| binlog.000001 |  933 | Write_rows     |         1 |         975 | table_id: 108 flags: STMT_END_F                                    |</span><br><span class="line">| binlog.000001 |  975 | Xid            |         1 |        1002 | COMMIT /* xid=29 */                                                |</span><br><span class="line">| binlog.000001 | 1002 | Gtid           |         1 |        1063 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:5&apos;  |</span><br><span class="line">| binlog.000001 | 1063 | Query          |         1 |        1122 | BEGIN                                                              |</span><br><span class="line">| binlog.000001 | 1122 | View_change    |         1 |        1261 | view_id=14724832985483517:2                                        |</span><br><span class="line">| binlog.000001 | 1261 | Query          |         1 |        1326 | COMMIT                                                             |</span><br><span class="line">| binlog.000001 | 1326 | Gtid           |         1 |        1387 | SET @@SESSION.GTID_NEXT= &apos;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:6&apos;  |</span><br><span class="line">| binlog.000001 | 1387 | Query          |         1 |        1446 | BEGIN                                                              |</span><br><span class="line">| binlog.000001 | 1446 | View_change    |         1 |        1585 | view_id=14724832985483517:3                                        |</span><br><span class="line">| binlog.000001 | 1585 | Query          |         1 |        1650 | COMMIT                                                             |</span><br><span class="line">+---------------+------+----------------+-----------+-------------+--------------------------------------------------------------------+</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;1-éƒ¨ç½²ç»„å¤åˆ¶å®ä¾‹&quot;&gt;&lt;a href=&quot;#1-éƒ¨ç½²ç»„å¤åˆ¶å®ä¾‹&quot; class=&quot;headerlink&quot; title=&quot;1. éƒ¨ç½²ç»„å¤åˆ¶å®ä¾‹&quot;&gt;&lt;/a&gt;1. éƒ¨ç½²ç»„å¤åˆ¶å®ä¾‹&lt;/h2&gt;&lt;p&gt;å‡å®šMySQL Serverå·²ä¸‹è½½å¹¶è§£å‹ç¼©
      
    
    </summary>
    
      <category term="database" scheme="http://yoursite.com/categories/database/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="mysql" scheme="http://yoursite.com/tags/mysql/"/>
    
      <category term="mgr" scheme="http://yoursite.com/tags/mgr/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Powerline ç¾åŒ–ç»ˆç«¯</title>
    <link href="http://yoursite.com/2019/01/29/powerline/"/>
    <id>http://yoursite.com/2019/01/29/powerline/</id>
    <published>2019-01-28T16:00:00.000Z</published>
    <updated>2019-07-23T07:16:47.146Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="å®‰è£…-python3"><a href="#å®‰è£…-python3" class="headerlink" title="å®‰è£… python3"></a>å®‰è£… python3</h2><p>Ubuntu</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@ubuntu ~]<span class="comment"># sudo apt install python3 python3-pip</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-powerline"><a href="#å®‰è£…-powerline" class="headerlink" title="å®‰è£… powerline"></a>å®‰è£… powerline</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@ubuntu ~]# python3 -m pip install powerline-status</span><br><span class="line">[root@ubuntu ~]# python3 -m pip show powerline-status</span><br><span class="line">Name: powerline-status</span><br><span class="line">Version: 2.7</span><br><span class="line">Summary: The ultimate statusline/prompt utility.</span><br><span class="line">Home-page: https://github.com/powerline/powerline</span><br><span class="line">Author: Kim Silkebaekken</span><br><span class="line">Author-email: kim.silkebaekken+vim@gmail.com</span><br><span class="line">License: MIT</span><br><span class="line">Location: /usr/local/lib/python3.6/dist-packages</span><br><span class="line">Requires:</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®-bash"><a href="#è®¾ç½®-bash" class="headerlink" title="è®¾ç½® bash"></a>è®¾ç½® bash</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@ubuntu ~]<span class="comment"># vim ~/.bashrc</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">powerline-daemon -q</span><br><span class="line">POWERLINE_BASH_CONTINUATION=1</span><br><span class="line">POWERLINE_BASH_SELECT=1</span><br><span class="line">. /usr/local/lib/python3.6/dist-packages/powerline/bindings/bash/powerline.sh</span><br></pre></td></tr></table></figure><ul><li>æ•ˆæœå›¾</li></ul><h2 id="è®¾ç½®-vim"><a href="#è®¾ç½®-vim" class="headerlink" title="è®¾ç½® vim"></a>è®¾ç½® vim</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@ubuntu ~]<span class="comment"># vim ~/.vimrc</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set rtp+=/usr/local/lib/python3.6/dist-packages/powerline/bindings/vim/</span><br><span class="line">set laststatus=2</span><br><span class="line">set t_Co=256</span><br></pre></td></tr></table></figure><ul><li>æ•ˆæœå›¾</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;å®‰è£…-python3&quot;&gt;&lt;a href=&quot;#å®‰è£…-python3&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£… python3&quot;&gt;&lt;/a&gt;å®‰è£… python3&lt;/h2&gt;&lt;p&gt;Ubuntu&lt;/p&gt;
&lt;figure 
      
    
    </summary>
    
      <category term="tools" scheme="http://yoursite.com/categories/tools/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="powerline" scheme="http://yoursite.com/tags/powerline/"/>
    
  </entry>
  
  <entry>
    <title>MySQL å¸¸ç”¨å‡½æ•°</title>
    <link href="http://yoursite.com/2019/01/15/mysql_function/"/>
    <id>http://yoursite.com/2019/01/15/mysql_function/</id>
    <published>2019-01-14T16:00:00.000Z</published>
    <updated>2019-07-23T07:16:30.560Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="æ–‡æœ¬å¤„ç†å‡½æ•°"><a href="#æ–‡æœ¬å¤„ç†å‡½æ•°" class="headerlink" title="æ–‡æœ¬å¤„ç†å‡½æ•°"></a>æ–‡æœ¬å¤„ç†å‡½æ•°</h2><table><thead><tr><th>å‡½æ•°å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>left( )</td><td>è¿”å›ä¸²å·¦è¾¹çš„å­—ç¬¦</td></tr><tr><td>right( )</td><td>è¿”å›ä¸²å³è¾¹çš„å­—ç¬¦</td></tr><tr><td>length( )</td><td>è¿”å›ä¸²çš„é•¿åº¦</td></tr><tr><td>locate( )</td><td>æ‰¾å‡ºä¸²çš„ä¸€ä¸ªå­ä¸²</td></tr><tr><td>lower( )</td><td>å°†ä¸²è½¬æ¢ä¸ºå°å†™</td></tr><tr><td>upper( )</td><td>å°†ä¸²è½¬æ¢ä¸ºå¤§å†™</td></tr><tr><td>ltrim( )</td><td>å»æ‰ä¸²å·¦è¾¹çš„ç©ºæ ¼</td></tr><tr><td>rtrim( )</td><td>å»æ‰ä¸²å³è¾¹çš„ç©ºæ ¼</td></tr><tr><td>soundex( )</td><td>è¿”å›ä¸²çš„SOUNDEXå€¼</td></tr><tr><td>substring( )</td><td>è¿”å›å­ä¸²çš„å­—ç¬¦</td></tr><tr><td>## æ—¥æœŸå’Œæ—¶é—´å¤„ç†å‡½æ•°</td><td></td></tr></tbody></table><table><thead><tr><th>å‡½æ•°å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>adddate( )</td><td>å¢åŠ ä¸€ä¸ªæ—¥æœŸï¼ˆå¤©ã€å‘¨ç­‰ï¼‰</td></tr><tr><td>addtime( )</td><td>å¢åŠ ä¸€ä¸ªæ—¶é—´ï¼ˆæ—¶ã€åˆ†ç­‰ï¼‰</td></tr><tr><td>curdate( )</td><td>è¿”å›å½“å‰æ—¥æœŸ</td></tr><tr><td>curtime( )</td><td>è¿”å›å½“å‰æ—¶é—´</td></tr><tr><td>date( )</td><td>è¿”å›æ—¥æœŸæ—¶é—´çš„æ—¥æœŸéƒ¨åˆ†</td></tr><tr><td>datediff( )</td><td>è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹å·®</td></tr><tr><td>date_add( )</td><td>é«˜åº¦çµæ´»çš„æ—¥æœŸè¿ç®—å‡½æ•°</td></tr><tr><td>date_format( )</td><td>è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ—¥æœŸæˆ–æ—¶é—´ä¸²</td></tr><tr><td>day( )</td><td>è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¤©æ•°éƒ¨åˆ†</td></tr><tr><td>dayofweek( )</td><td>å¯¹äºä¸€ä¸ªæ—¥æœŸï¼Œè¿”å›å¯¹åº”çš„æ˜ŸæœŸå‡ </td></tr><tr><td>hour( )</td><td>è¿”å›ä¸€ä¸ªæ—¶é—´çš„å°æ—¶éƒ¨åˆ†</td></tr><tr><td>minute( )</td><td>è¿”å›ä¸€ä¸ªæ—¶é—´çš„åˆ†é’Ÿéƒ¨åˆ†</td></tr><tr><td>month( )</td><td>è¿”å›ä¸€ä¸ªæ—¥æœŸçš„æœˆä»½éƒ¨åˆ†</td></tr><tr><td>now( )</td><td>è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td></tr><tr><td>second( )</td><td>è¿”å›ä¸€ä¸ªæ—¶é—´çš„ç§’éƒ¨åˆ†</td></tr><tr><td>time( )</td><td>è¿”å›ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„æ—¶é—´éƒ¨åˆ†</td></tr><tr><td>year( )</td><td>è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¹´ä»½éƒ¨åˆ†</td></tr></tbody></table><h2 id="æ•°å€¼å¤„ç†å‡½æ•°"><a href="#æ•°å€¼å¤„ç†å‡½æ•°" class="headerlink" title="æ•°å€¼å¤„ç†å‡½æ•°"></a>æ•°å€¼å¤„ç†å‡½æ•°</h2><table><thead><tr><th>å‡½æ•°å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>abs( )</td><td>è¿”å›ä¸€ä¸ªæ•°çš„ç»å¯¹å€¼</td></tr><tr><td>cos( )</td><td>è¿”å›ä¸€ä¸ªè§’åº¦çš„ä½™å¼¦</td></tr><tr><td>exp( )</td><td>è¿”å›ä¸€ä¸ªæ•°çš„æŒ‡æ•°å€¼</td></tr><tr><td>mod( )</td><td>è¿”å›é™¤æ“ä½œçš„ä½™æ•°</td></tr><tr><td>pi( )</td><td>è¿”å›åœ†å‘¨ç‡</td></tr><tr><td>rand( )</td><td>è¿”å›ä¸€ä¸ªéšæœºæ•°</td></tr><tr><td>sin( )</td><td>è¿”å›ä¸€ä¸ªè§’åº¦çš„æ­£å¼¦</td></tr><tr><td>sqrt( )</td><td>è¿”å›ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹</td></tr><tr><td>tan( )</td><td>è¿”å›ä¸€ä¸ªè§’åº¦çš„æ­£åˆ‡</td></tr></tbody></table><h2 id="èšé›†å‡½æ•°"><a href="#èšé›†å‡½æ•°" class="headerlink" title="èšé›†å‡½æ•°"></a>èšé›†å‡½æ•°</h2><table><thead><tr><th>å‡½æ•°å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>avg( )</td><td>è¿”å›æŸåˆ—çš„å¹³å‡å€¼</td></tr><tr><td>count( )</td><td>è¿”å›æŸåˆ—çš„è¡Œæ•°</td></tr><tr><td>max( )</td><td>è¿”å›æŸåˆ—çš„æœ€å¤§å€¼</td></tr><tr><td>min( )</td><td>è¿”å›æŸåˆ—çš„æœ€å°å€¼</td></tr><tr><td>sum( )</td><td>è¿”å›æŸåˆ—å€¼ä¹‹å’Œ</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;æ–‡æœ¬å¤„ç†å‡½æ•°&quot;&gt;&lt;a href=&quot;#æ–‡æœ¬å¤„ç†å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;æ–‡æœ¬å¤„ç†å‡½æ•°&quot;&gt;&lt;/a&gt;æ–‡æœ¬å¤„ç†å‡½æ•°&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°å&lt;/th&gt;
&lt;th&gt;
      
    
    </summary>
    
      <category term="database" scheme="http://yoursite.com/categories/database/"/>
    
    
      <category term="mysql" scheme="http://yoursite.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>uWSGI éƒ¨ç½² Django åº”ç”¨</title>
    <link href="http://yoursite.com/2019/01/07/uwsgi/"/>
    <id>http://yoursite.com/2019/01/07/uwsgi/</id>
    <published>2019-01-06T16:00:00.000Z</published>
    <updated>2019-07-23T07:17:22.755Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><ul><li>demoé¡¹ç›®çš„ç›®å½•ç»“æ„</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">demo/</span><br><span class="line">â”œâ”€â”€ db.sqlite3</span><br><span class="line">â”œâ”€â”€ demo</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ __init__.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ __pycache__</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.cpython-36.pyc</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ settings.cpython-36.pyc</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ urls.cpython-36.pyc</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ wsgi.cpython-36.pyc</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ settings.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ urls.py</span><br><span class="line">â”‚Â Â  â””â”€â”€ wsgi.py</span><br><span class="line">â”œâ”€â”€ manage.py</span><br><span class="line">â””â”€â”€ requirements.txt</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…ç›¸å…³å·¥å…·å’Œä¾èµ–"><a href="#å®‰è£…ç›¸å…³å·¥å…·å’Œä¾èµ–" class="headerlink" title="å®‰è£…ç›¸å…³å·¥å…·å’Œä¾èµ–"></a>å®‰è£…ç›¸å…³å·¥å…·å’Œä¾èµ–</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@uwsgi ~]<span class="comment"># yum -y install git wget httpd vim # å®‰è£…ç›¸å…³å·¥å…·</span></span><br><span class="line">[root@uwsgi ~]<span class="comment"># yum -y install gcc zlib* openssl-devel # å®‰è£…ç¼–è¯‘å·¥å…·å’Œä¾èµ–åº“</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-Python-ç¯å¢ƒ"><a href="#å®‰è£…-Python-ç¯å¢ƒ" class="headerlink" title="å®‰è£… Python ç¯å¢ƒ"></a>å®‰è£… Python ç¯å¢ƒ</h2><p>rhelç³»åˆ—æ— æ³•é€šè¿‡yumç›´æ¥å®‰è£…python3ï¼Œéœ€è¦æºç ç¼–è¯‘å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@uwsgi ~]<span class="comment"># pwd # æŸ¥çœ‹å½“å‰ç›®å½•</span></span><br><span class="line">/root</span><br><span class="line">[root@uwsgi ~]<span class="comment"># wget https://www.python.org/ftp/python/3.6.5/Python-3.6.5.tgz # ä¸‹è½½python3.6.5</span></span><br><span class="line">[root@uwsgi ~]<span class="comment"># tar -zxvf Python-3.6.5.tgz # è§£å‹</span></span><br><span class="line">[root@uwsgi ~]<span class="comment"># cd Python-3.6.5</span></span><br><span class="line"></span><br><span class="line">[root@uwsgi Python-3.6.5]<span class="comment"># pwd # æŸ¥çœ‹å½“å‰ç›®å½•</span></span><br><span class="line">/root/Python-3.6.5</span><br><span class="line">[root@uwsgi Python-3.6.5]<span class="comment"># ./configure # ç¼–è¯‘</span></span><br><span class="line">[root@uwsgi Python-3.6.5]<span class="comment"># make &amp;&amp; make install # å®‰è£…</span></span><br><span class="line">[root@uwsgi Python-3.6.5]<span class="comment"># which python3 # æŸ¥çœ‹python3çš„è·¯å¾„</span></span><br><span class="line">/usr/<span class="built_in">local</span>/bin/python3</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-uWSGI"><a href="#å®‰è£…-uWSGI" class="headerlink" title="å®‰è£… uWSGI"></a>å®‰è£… uWSGI</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@uwsgi ~]<span class="comment"># python3 -m pip install uwsgi</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…é…ç½®è™šæ‹Ÿç¯å¢ƒ"><a href="#å®‰è£…é…ç½®è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="å®‰è£…é…ç½®è™šæ‹Ÿç¯å¢ƒ"></a>å®‰è£…é…ç½®è™šæ‹Ÿç¯å¢ƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@uwsgi ~]<span class="comment"># python3 -m pip install virtualenv # å®‰è£…è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">[root@uwsgi ~]<span class="comment"># virtualenv -p /usr/local/bin/python3 /venv # é…ç½®è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">[root@uwsgi ~]<span class="comment"># source /venv/bin/activate # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">(venv) [root@uwsgi ~]<span class="comment"># pip install -r /root/demo/requirements.txt # å®‰è£…é¡¹ç›®ä¾èµ–</span></span><br><span class="line">(venv) [root@uwsgi ~]<span class="comment"># pip freeze # æŸ¥çœ‹ä¾èµ–åº“æ˜¯å¦å®‰è£…</span></span><br><span class="line">(venv) [root@uwsgi ~]<span class="comment"># deactivate # å–æ¶ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">[root@uwsgi ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹-ALLOW-HOSTS"><a href="#ä¿®æ”¹-ALLOW-HOSTS" class="headerlink" title="ä¿®æ”¹ ALLOW_HOSTS"></a>ä¿®æ”¹ ALLOW_HOSTS</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@uwsgi ~]<span class="comment"># vim demo/demo/settings.py # ç¼–è¾‘é¡¹ç›®ä¸­çš„ settings.py</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALLOWED_HOSTS = [<span class="string">"192.168.41.130"</span>,]</span><br></pre></td></tr></table></figure><h2 id="é…ç½®-uWSGI"><a href="#é…ç½®-uWSGI" class="headerlink" title="é…ç½® uWSGI"></a>é…ç½® uWSGI</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@uwsgi ~]<span class="comment"># mkdir -p /var/log/uwsgi # åˆ›å»º uwsgi çš„æ—¥å¿—ç›®å½•</span></span><br><span class="line">[root@uwsgi ~]<span class="comment"># vim /etc/uwsgi.ini # åˆ›å»º uwsgi.ini é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[uwsgi]</span><br><span class="line">chdir=/root/demo</span><br><span class="line">http=192.168.41.130:8000</span><br><span class="line">home=/venv</span><br><span class="line">module=demo.wsgi:application</span><br><span class="line">master=True</span><br><span class="line">pidfile=/tmp/demo.pid</span><br><span class="line">max-requests=5000</span><br><span class="line">daemonize=/var/log/uwsgi/demo.log</span><br><span class="line">env=LANG=en_US.UTF-8</span><br><span class="line">buffer-size=32768</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨-uWSGI"><a href="#å¯åŠ¨-uWSGI" class="headerlink" title="å¯åŠ¨ uWSGI"></a>å¯åŠ¨ uWSGI</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@uwsgi ~]<span class="comment"># uwsgi --init /etc/uwsgi.ini # ä»¥ /etc/uwsgi.ini é…ç½®å¯åŠ¨ uwsgi</span></span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><table><thead><tr><th>è·¯å¾„</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>/root/demo</td><td>é¡¹ç›®è·¯å¾„</td></tr><tr><td>/usr/local/bin/python3</td><td>python3é»˜è®¤å®‰è£…è·¯å¾„</td></tr><tr><td>/etc/uwsgi.ini</td><td>uwsgié…ç½®æ–‡ä»¶</td></tr><tr><td>/var/log/uwsgi/demo.log</td><td>uwsgiæ—¥å¿—æ–‡ä»¶</td></tr><tr><td>/venv</td><td>pythonè™šæ‹Ÿç¯å¢ƒè·¯å¾„</td></tr></tbody></table><p>æœªå®‰è£…zlib*ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zipimport.ZipImportError: can&apos;t decompress data; zlib not available # ç¼–è¯‘æ—¶æŠ¥é”™</span><br></pre></td></tr></table></figure><p>æœªå®‰è£…opensslã€openssl-develï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available # pip å®‰è£… uwsgi æ—¶æŠ¥é”™</span><br></pre></td></tr></table></figure><p>uwsgi æ— æ³•è®¿é—®ï¼Œæ—¥å¿—æŠ¥é”™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invalid request block size: 21573 (max 4096)...skip # åœ¨ /etc/uwsgi.ini ä¸­æ·»åŠ  buffer-size=32768</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;demoé¡¹ç›®çš„ç›®å½•ç»“æ„&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/s
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ oh-my-posh ç¾åŒ– PowerShell</title>
    <link href="http://yoursite.com/2019/01/05/oh-my-posh/"/>
    <id>http://yoursite.com/2019/01/05/oh-my-posh/</id>
    <published>2019-01-04T16:00:00.000Z</published>
    <updated>2019-07-23T07:16:43.319Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><p>è‹±æ–‡å­—ä½“æ˜¯æ”¯æŒPowerLineçš„DejaVuSansMonoå­—ä½“ï¼Œä¸­æ–‡å­—ä½“æ˜¯æ–‡æ³‰é©¿ç­‰å®½å¾®ç±³é»‘å­—ä½“ï¼‰ï¼Œå¹¶å°†ç»ˆç«¯å­—ä½“è®¾ç½®ä¸ºæ”¯æŒPowerLineçš„å­—ä½“ã€‚<br>ç„¶åå¼€å§‹å®‰è£…oh-my-poshï¼ˆè¯¥æ­¥éª¤å¯èƒ½éœ€è¦æŸç§â€œè¾ƒä¸ºç¨³å®šâ€çš„ç½‘ç»œç¯å¢ƒï¼‰ã€‚åœ¨ç®¡ç†å‘˜æƒé™çš„PowerShellä¸‹æ‰§è¡ŒæŒ‡ä»¤</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-ExecutionPolicy</span> Bypass</span><br></pre></td></tr></table></figure><p>è¯¥æŒ‡ä»¤æ—¨åœ¨å…è®¸åŠ è½½å¹¶è¿è¡Œä»»æ„è„šæœ¬ã€‚å¯èƒ½ä¼šé€ æˆå®‰å…¨é—®é¢˜ï¼Œä½†æ˜¯åªè¦æœ‰æ€æ¯’è½¯ä»¶åœ¨å°±æ— éœ€æ‹…å¿ƒï¼Œæ¯•ç«Ÿæ²¡æœ‰äººä¼šæ— èŠåˆ°å¯¹ä¸€ä¸ªæ™®é€šçš„è®¡ç®—æœºç”¨æˆ·è¿›è¡Œé’ˆå¯¹æ€§æ”»å‡»ã€‚</p><p>ç„¶åå®‰è£…oh-my-poshçš„ä¾èµ–å’Œoh-my-poshæœ¬èº«</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Module</span> posh-git -Scope CurrentUser</span><br><span class="line"><span class="built_in">Install-Module</span> oh-my-posh -Scope CurrentUser</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆä¹‹åï¼Œå¯ä»¥é€šè¿‡</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Import-Module</span> oh-my-posh</span><br></pre></td></tr></table></figure><p>æ¥å°è¯•å¯ç”¨è¿™ä¸ªæ¨¡ç»„ã€‚ä¹‹åå°±å¯ä»¥ä½¿ç”¨</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Themeä¸»é¢˜å</span><br></pre></td></tr></table></figure><p>è¿™ç§æ ¼å¼çš„æŒ‡ä»¤æ¥åˆ‡æ¢ä¸åŒçš„æ˜¾ç¤ºé£æ ¼ã€‚ç¤ºä¾‹å›¾ä¸­çš„ä¸»é¢˜æ˜¯åŸºäºAgnosteræ”¹é€ çš„ï¼Œé»˜è®¤ä¸»é¢˜æ–‡ä»¶ä½äº</p><p>ITä¹‹å®¶å­¦é™¢ï¼šä½¿ç”¨oh-my-poshç¾åŒ–Win10 PowerShell</p><p>æ¥ä¸‹æ¥ä¾¿æ˜¯åœ¨PowerShellå¯åŠ¨æ—¶åŠ è½½è¿™ä¸ªæ¨¡ç»„äº†ã€‚ç±»ä¼¼äºLinux Bashçš„.bashrcï¼ŒPowerShellä¹Ÿæä¾›ç±»ä¼¼çš„Profileæ–‡ä»¶ç”¨äºåœ¨å¯åŠ¨æ—¶æ‰§è¡ŒæŒ‡ä»¤ã€‚è¾“å…¥</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Test-Path</span> <span class="variable">$profile</span></span><br></pre></td></tr></table></figure><p>å¹¶æ‰§è¡Œï¼Œä»¥ç¡®å®šprofileæ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœè¿”å›Falseï¼Œåˆ™åº”è¯¥æ‰§è¡Œï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">New-Item</span> -path <span class="variable">$profile</span> -type fileâ€“force</span><br></pre></td></tr></table></figure><p>æ¥æ–°å»ºä¸€ä¸ªæ–‡ä»¶ã€‚ç„¶åå»å¾€Profileçš„ç›®å½•ï¼ˆé€šå¸¸æ˜¯ä½ çš„æ–‡æ¡£ä¸‹çš„WindowsPowerShellç›®å½•ä¸‹ï¼‰ï¼Œä¿®æ”¹é‚£ä¸ªåç¼€ä¸ºps1çš„Profileæ–‡ä»¶ï¼ŒåŠ å…¥ä¸€è¡ŒImport-Module oh-my-poshå³å¯ã€‚</p><p>ä¸€åˆ‡å®Œæˆä¹‹åï¼ŒPowerShellåº”è¯¥æ¯”åŸå…ˆç¾è§‚äº†ä¸å°‘ï¼Œè€Œä¸”æç¤ºç¬¦çš„åŠŸèƒ½æ›´å¼ºäº†ã€‚åŸºäºoh-my-poshæ¡†æ¶ï¼Œè¿˜èƒ½è‡ªå·±ç¼–å†™æ›´å¤šçš„ä¸»é¢˜ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;p&gt;è‹±æ–‡å­—ä½“æ˜¯æ”¯æŒPowerLineçš„DejaVuSansMonoå­—ä½“ï¼Œä¸­æ–‡å­—ä½“æ˜¯æ–‡æ³‰é©¿ç­‰å®½å¾®ç±³é»‘å­—ä½“ï¼‰ï¼Œå¹¶å°†ç»ˆç«¯å­—ä½“è®¾ç½®ä¸ºæ”¯æŒPowerLineçš„å­—ä½“ã€‚&lt;br&gt;ç„¶åå¼€å§‹å®‰è£…oh-my-poshï¼ˆè¯¥æ­¥éª¤å¯èƒ½éœ€è¦æŸç§â€œè¾ƒä¸ºç¨³å®šâ€çš„ç½‘ç»œç¯å¢ƒï¼‰ã€‚
      
    
    </summary>
    
      <category term="tools" scheme="http://yoursite.com/categories/tools/"/>
    
    
      <category term="windows" scheme="http://yoursite.com/tags/windows/"/>
    
      <category term="powershell" scheme="http://yoursite.com/tags/powershell/"/>
    
  </entry>
  
  <entry>
    <title>jenkins å…¥é—¨æŒ‡å—</title>
    <link href="http://yoursite.com/2019/01/04/jenkins/"/>
    <id>http://yoursite.com/2019/01/04/jenkins/</id>
    <published>2019-01-03T16:00:00.000Z</published>
    <updated>2019-07-23T07:16:06.219Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><p>sudo wget -O /etc/yum.repos.d/jenkins.repo <a href="https://pkg.jenkins.io/redhat-stable/jenkins.repo" target="_blank" rel="noopener">https://pkg.jenkins.io/redhat-stable/jenkins.repo</a><br>sudo rpm â€“import <a href="https://pkg.jenkins.io/redhat-stable/jenkins.io.key" target="_blank" rel="noopener">https://pkg.jenkins.io/redhat-stable/jenkins.io.key</a></p><p>yum install jenkins</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;p&gt;sudo wget -O /etc/yum.repos.d/jenkins.repo &lt;a href=&quot;https://pkg.jenkins.io/redhat-stable/jenkins.repo&quot; target=&quot;_blank&quot;
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="jenkins" scheme="http://yoursite.com/tags/jenkins/"/>
    
      <category term="ci" scheme="http://yoursite.com/tags/ci/"/>
    
  </entry>
  
  <entry>
    <title>gitlab-ce å…¥å‘æŒ‡å—</title>
    <link href="http://yoursite.com/2019/01/03/gitlab/"/>
    <id>http://yoursite.com/2019/01/03/gitlab/</id>
    <published>2019-01-02T16:00:00.000Z</published>
    <updated>2019-07-23T07:15:42.175Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="æ›´æ–°è½¯ä»¶åŒ…"><a href="#æ›´æ–°è½¯ä»¶åŒ…" class="headerlink" title="æ›´æ–°è½¯ä»¶åŒ…"></a>æ›´æ–°è½¯ä»¶åŒ…</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update -y</span><br></pre></td></tr></table></figure><h2 id="é…ç½®é˜²ç«å¢™"><a href="#é…ç½®é˜²ç«å¢™" class="headerlink" title="é…ç½®é˜²ç«å¢™"></a>é…ç½®é˜²ç«å¢™</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># vim /etc/sysctl.conf</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.ip_forward = 1</span><br></pre></td></tr></table></figure><ul><li>å¯ç”¨å¹¶å¯åŠ¨é˜²ç«å¢™</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># systemctl enable firewalld</span></span><br><span class="line">[root@gitlab ~]<span class="comment"># systemctl start firewalld</span></span><br></pre></td></tr></table></figure><ul><li>æ”¾é€š HTTPã€HTTPS</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># firewall-cmd --add-service=http --permanent</span></span><br><span class="line">[root@gitlab ~]<span class="comment"># firewall-cmd --add-service=https --permanent</span></span><br></pre></td></tr></table></figure><ul><li>é‡è½½å…¥é˜²ç«å¢™</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># systemctl reload firewalld</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-postfix"><a href="#å®‰è£…-postfix" class="headerlink" title="å®‰è£… postfix"></a>å®‰è£… postfix</h2><p>GitLab éœ€è¦ä½¿ç”¨ postfix æ¥å‘é€é‚®ä»¶ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ SMTP æœåŠ¡å™¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># vim /etc/postfix/main.cf</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># inet_protocols = all</span><br><span class="line">inet_protocols = ipv4</span><br></pre></td></tr></table></figure><ul><li>å¯ç”¨å¹¶å¯åŠ¨ postfix</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># systemctl restart postfix</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®-swap"><a href="#é…ç½®-swap" class="headerlink" title="é…ç½® swap"></a>é…ç½® swap</h2><p>ç”±äº GitLab è¾ƒä¸ºæ¶ˆè€—èµ„æºï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºäº¤æ¢åˆ†åŒºï¼Œä»¥é™ä½ç‰©ç†å†…å­˜çš„å‹åŠ›ã€‚<br>åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦‚æœæœåŠ¡å™¨é…ç½®å¤Ÿé«˜ï¼Œåˆ™ä¸å¿…é…ç½®äº¤æ¢åˆ†åŒºã€‚</p><ul><li>æ–°å»º 2 GB å¤§å°çš„äº¤æ¢åˆ†åŒº</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># dd if=/dev/zero of=/root/swapfile bs=1M count=2048</span></span><br></pre></td></tr></table></figure><ul><li>æ ¼å¼åŒ–ä¸ºäº¤æ¢åˆ†åŒºæ–‡ä»¶å¹¶å¯ç”¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># mkswap /root/swapfile</span></span><br><span class="line">[root@gitlab ~]<span class="comment"># swapon /root/swapfile</span></span><br></pre></td></tr></table></figure><ul><li>æ·»åŠ è‡ªå¯ç”¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># vim /etc/fstab</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/root/swapfile swap swap defaults 0 0</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-GitLab"><a href="#å®‰è£…-GitLab" class="headerlink" title="å®‰è£… GitLab"></a>å®‰è£… GitLab</h2><ul><li>å°†è½¯ä»¶æºä¿®æ”¹ä¸ºå›½å†…æº</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># vim /etc/yum.repos.d/gitlab-ce.repo</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[gitlab-ce]</span><br><span class="line">name=Gitlab CE Repository</span><br><span class="line">baseurl=https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el$releasever/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure><ul><li>å®‰è£… GitLab</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># yum makecache</span></span><br><span class="line">[root@gitlab ~]<span class="comment"># yum install -y gitlab-ce</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">     *.                  *.</span><br><span class="line">    ***                 ***</span><br><span class="line">   *****               *****</span><br><span class="line">  .******             *******</span><br><span class="line">  ********            ********</span><br><span class="line"> ,,,,,,,,,***********,,,,,,,,,</span><br><span class="line">,,,,,,,,,,,*********,,,,,,,,,,,</span><br><span class="line">.,,,,,,,,,,,*******,,,,,,,,,,,,</span><br><span class="line">    ,,,,,,,,,*****,,,,,,,,,.</span><br><span class="line">       ,,,,,,,****,,,,,,</span><br><span class="line">          .,,,***,,,,</span><br><span class="line">              ,*,.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   _______ __  __          __</span><br><span class="line">  / ____(_) /_/ /   ____ _/ /_</span><br><span class="line"> / / __/ / __/ /   / __ `/ __ \</span><br><span class="line">/ /_/ / / /_/ /___/ /_/ / /_/ /</span><br><span class="line">\____/_/\__/_____/\__,_/_.___/</span><br><span class="line"></span><br><span class="line">Thank you for installing GitLab!</span><br></pre></td></tr></table></figure><h2 id="é…ç½®-HTTPS-è¯ä¹¦"><a href="#é…ç½®-HTTPS-è¯ä¹¦" class="headerlink" title="é…ç½® HTTPS è¯ä¹¦"></a>é…ç½® HTTPS è¯ä¹¦</h2><ul><li>ç”Ÿæˆ key æ–‡ä»¶</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># openssl genrsa -out "/etc/gitlab/ssl/gitlab.example.com.key"</span></span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Generating RSA private key, 2048 bit long modulus</span><br><span class="line">.........................................................................................................+++</span><br><span class="line">..............................................................+++</span><br><span class="line">e is 65537 (0x10001)</span><br></pre></td></tr></table></figure><ul><li>ç”Ÿæˆ csr æ–‡ä»¶</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ssl]<span class="comment"># openssl req -new -key "/etc/gitlab/ssl/gitlab.example.com.key" -out "/etc/gitlab/ssl/gitlab.example.com.csr"</span></span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter &apos;.&apos;, the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Country Name (2 letter code) [XX]:cn</span><br><span class="line">State or Province Name (full name) []:sz</span><br><span class="line">Locality Name (eg, city) [Default City]:sz</span><br><span class="line">Organization Name (eg, company) [Default Company Ltd]:example</span><br><span class="line">Organizational Unit Name (eg, section) []:</span><br><span class="line">Common Name (eg, your name or your server&apos;s hostname) []:gitlab.example.com</span><br><span class="line">Email Address []:admin@example.com</span><br><span class="line"></span><br><span class="line">Please enter the following &apos;extra&apos; attributes</span><br><span class="line">to be sent with your certificate request</span><br><span class="line">A challenge password []:password</span><br><span class="line">An optional company name []:</span><br></pre></td></tr></table></figure><ul><li>ç”Ÿæˆ crt æ–‡ä»¶ </li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># openssl x509 -req -days 365 -in "/etc/gitlab/ssl/gitlab.example.com.csr" -signkey "/etc/gitlab/ssl/gitlab.example.com.key" -out "/etc/gitlab/ssl/gitlab.example.com.crt"</span></span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Signature ok</span><br><span class="line">subject=/C=cn/ST=sz/L=sz/O=example/CN=gitlab.example.com/emailAddress=admin@example.com</span><br><span class="line">Getting Private key</span><br></pre></td></tr></table></figure><ul><li>ç”Ÿæˆ dhparams.pem</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ssl]<span class="comment"># openssl dhparam -out /etc/gitlab/ssl/dhparams.pem 2048</span></span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–-GitLab"><a href="#åˆå§‹åŒ–-GitLab" class="headerlink" title="åˆå§‹åŒ– GitLab"></a>åˆå§‹åŒ– GitLab</h2><ul><li>é…ç½® GitLab</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># vim /etc/gitlab/gitlab.rb</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">external_url &apos;http://gitlab.example.com&apos;</span><br><span class="line">nginx[&apos;redirect_http_to_https&apos;] = true</span><br><span class="line">nginx[&apos;ssl_certificate&apos;] = &quot;/etc/gitlab/ssl/gitlab.example.com.crt&quot;</span><br><span class="line">nginx[&apos;ssl_certificate_key&apos;] = &quot;/etc/gitlab/ssl/gitlab.example.com.key&quot;</span><br><span class="line">nginx[&apos;ssl_dhparam&apos;] = &quot;/etc/gitlab/ssl/dhparams.pem&quot;</span><br></pre></td></tr></table></figure><ul><li>åˆå§‹åŒ– GitLab</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># gitlab-ctl reconfigure</span></span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹ nginx é…ç½®</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># vim /var/opt/gitlab/nginx/conf/gitlab-http.conf</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen *:80;</span><br><span class="line"></span><br><span class="line">  rewrite ^(.*)$ https://$host$1 permanent; # æ–°å¢</span><br><span class="line"></span><br><span class="line">  server_name gitlab.example.com;</span><br><span class="line">  server_tokens off; ## Don&apos;t show the nginx version number, a security best practice</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    return 301 https://gitlab.example.com:443$request_uri;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  access_log  /var/log/gitlab/nginx/gitlab_access.log gitlab_access;</span><br><span class="line">  error_log   /var/log/gitlab/nginx/gitlab_error.log;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é‡å¯ gitlab</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># gitlab-ctl restart</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;æ›´æ–°è½¯ä»¶åŒ…&quot;&gt;&lt;a href=&quot;#æ›´æ–°è½¯ä»¶åŒ…&quot; class=&quot;headerlink&quot; title=&quot;æ›´æ–°è½¯ä»¶åŒ…&quot;&gt;&lt;/a&gt;æ›´æ–°è½¯ä»¶åŒ…&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="gitlab" scheme="http://yoursite.com/tags/gitlab/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Ambari éƒ¨ç½² Hadoop é›†ç¾¤</title>
    <link href="http://yoursite.com/2018/12/18/ambari/"/>
    <id>http://yoursite.com/2018/12/18/ambari/</id>
    <published>2018-12-17T16:00:00.000Z</published>
    <updated>2019-07-23T07:15:03.007Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="é…ç½®æœ¬åœ°yumæº"><a href="#é…ç½®æœ¬åœ°yumæº" class="headerlink" title="é…ç½®æœ¬åœ°yumæº"></a>é…ç½®æœ¬åœ°yumæº</h2><h3 id="å®‰è£…httpd"><a href="#å®‰è£…httpd" class="headerlink" title="å®‰è£…httpd"></a>å®‰è£…httpd</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install httpd -y</span><br></pre></td></tr></table></figure><h3 id="åœ¨å®˜æ–¹ä¸‹è½½é•œåƒæ–‡ä»¶"><a href="#åœ¨å®˜æ–¹ä¸‹è½½é•œåƒæ–‡ä»¶" class="headerlink" title="åœ¨å®˜æ–¹ä¸‹è½½é•œåƒæ–‡ä»¶"></a>åœ¨å®˜æ–¹ä¸‹è½½é•œåƒæ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.6.1.0/ambari.repo</span><br><span class="line">wget http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.4.0/hdp.repo</span><br><span class="line">wget http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.6.1.0/ambari-2.6.1.0-centos7.tar.gz</span><br><span class="line">wget http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7/HDP-UTILS-1.1.0.22-centos7.tar.gz</span><br><span class="line">wget http://public-repo-1.hortonworks.com/HDP-GPL/centos7/2.x/updates/2.6.4.0/HDP-GPL-2.6.4.0-centos7-rpm.tar.gz</span><br><span class="line">wget http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.4.0/HDP-2.6.4.0-centos7-rpm.tar.gz</span><br></pre></td></tr></table></figure><h3 id="å°†å¯¹åº”çš„taråŒ…è§£å‹åˆ°httpdçš„æ–‡ä»¶ç›®å½•"><a href="#å°†å¯¹åº”çš„taråŒ…è§£å‹åˆ°httpdçš„æ–‡ä»¶ç›®å½•" class="headerlink" title="å°†å¯¹åº”çš„taråŒ…è§£å‹åˆ°httpdçš„æ–‡ä»¶ç›®å½•"></a>å°†å¯¹åº”çš„taråŒ…è§£å‹åˆ°httpdçš„æ–‡ä»¶ç›®å½•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www/html</span><br><span class="line">tar -zxvf ambari-2.6.1.0-centos7.tar.gz</span><br><span class="line">tar -zxvf HDP-2.6.4.0-centos7-rpm.tar.gz </span><br><span class="line">tar -zxvf HDP-GPL-2.6.4.0-centos7-rpm.tar.gz </span><br><span class="line">tar -zxvf HDP-UTILS-1.1.0.22-centos7.tar.gz</span><br></pre></td></tr></table></figure><h3 id="é…ç½®åŸºç¡€æºï¼Œåˆ›å»ºhadoopçš„repoæ–‡ä»¶"><a href="#é…ç½®åŸºç¡€æºï¼Œåˆ›å»ºhadoopçš„repoæ–‡ä»¶" class="headerlink" title="é…ç½®åŸºç¡€æºï¼Œåˆ›å»ºhadoopçš„repoæ–‡ä»¶"></a>é…ç½®åŸºç¡€æºï¼Œåˆ›å»ºhadoopçš„repoæ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ambari æº</span></span><br><span class="line">vim /etc/yum.repo.d/ambari.repo</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[ambari-2.6.1.0]</span><br><span class="line">name=ambari Version - ambari-2.6.1.0</span><br><span class="line">baseurl=http://192.168.10.11/ambari/centos7/2.6.1.0-143</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://192.168.10.11/ambari/centos7/2.6.1.0-143/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins</span><br><span class="line">enabled=1</span><br><span class="line">priority=1</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> hadoopæº</span></span><br><span class="line">vim /etc/yum.repo.d/hdp.repo</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#VERSION_NUMBER=2.6.4.0-91</span><br><span class="line">[HDP-2.6.4.0]</span><br><span class="line">name=HDP Version - HDP-2.6.4.0</span><br><span class="line">baseurl=http://192.168.10.11/HDP/centos7/2.6.4.0-91</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://192.168.10.11/HDP/centos7/2.6.4.0-91/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins</span><br><span class="line">enabled=1</span><br><span class="line">priority=1</span><br><span class="line"></span><br><span class="line">[HDP-UTILS-1.1.0.22]</span><br><span class="line">name=HDP-UTILS Version - HDP-UTILS-1.1.0.22</span><br><span class="line">baseurl=http://192.168.10.11/HDP-UTILS/centos7/1.1.0.22/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://192.168.10.11/HDP-UTILS/centos7/1.1.0.22/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins</span><br><span class="line">enabled=1</span><br><span class="line">priority=1</span><br><span class="line"></span><br><span class="line">[HDP-GPL-2.6.4.0]</span><br><span class="line">name=HDP-GPL Version - HDP-GPL-2.6.4.0</span><br><span class="line">baseurl=http://192.168.10.11/HDP-GPL/centos7/2.6.4.0-91</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://192.168.10.11/HDP-GPL/centos7/2.6.4.0-91/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins</span><br><span class="line">enabled=1</span><br><span class="line">priority=1</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨httpd"><a href="#å¯åŠ¨httpd" class="headerlink" title="å¯åŠ¨httpd"></a>å¯åŠ¨httpd</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable httpd</span><br><span class="line">systemctl start httpd</span><br></pre></td></tr></table></figure><h3 id="å°†æœ¬åœ°æºçš„repoé…ç½®æ‹·è´åˆ°å…¶å®ƒèŠ‚ç‚¹ï¼Œå¹¶åˆ›å»ºç¼“å­˜"><a href="#å°†æœ¬åœ°æºçš„repoé…ç½®æ‹·è´åˆ°å…¶å®ƒèŠ‚ç‚¹ï¼Œå¹¶åˆ›å»ºç¼“å­˜" class="headerlink" title="å°†æœ¬åœ°æºçš„repoé…ç½®æ‹·è´åˆ°å…¶å®ƒèŠ‚ç‚¹ï¼Œå¹¶åˆ›å»ºç¼“å­˜"></a>å°†æœ¬åœ°æºçš„repoé…ç½®æ‹·è´åˆ°å…¶å®ƒèŠ‚ç‚¹ï¼Œå¹¶åˆ›å»ºç¼“å­˜</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp /etc/yum.repos.d/ambari.repo 192.168.135.4:/etc/yum.repos.d/</span><br><span class="line">scp /etc/yum.repos.d/ambari.repo 192.168.135.5:/etc/yum.repos.d/</span><br><span class="line">scp /etc/yum.repos.d/hdp.repo 192.168.135.6:/etc/yum.repos.d/</span><br></pre></td></tr></table></figure><p>åœ¨å„ä¸ªèŠ‚ç‚¹åˆ›å»ºç¼“å­˜ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line">yum makecache fast</span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–ç¯å¢ƒ"><a href="#åˆå§‹åŒ–ç¯å¢ƒ" class="headerlink" title="åˆå§‹åŒ–ç¯å¢ƒ"></a>åˆå§‹åŒ–ç¯å¢ƒ</h2><h3 id="å„ä¸ªèŠ‚ç‚¹å®‰è£…java-1-8-0-openjdk"><a href="#å„ä¸ªèŠ‚ç‚¹å®‰è£…java-1-8-0-openjdk" class="headerlink" title="å„ä¸ªèŠ‚ç‚¹å®‰è£…java-1.8.0-openjdk"></a>å„ä¸ªèŠ‚ç‚¹å®‰è£…java-1.8.0-openjdk</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install java-1.8.0-openjdk -y</span><br></pre></td></tr></table></figure><h3 id="è§£æä¸»æœºå"><a href="#è§£æä¸»æœºå" class="headerlink" title="è§£æä¸»æœºå"></a>è§£æä¸»æœºå</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo "192.168.135.4 node2" &gt;&gt; /etc/hosts</span><br><span class="line">echo "192.168.135.5 node3" &gt;&gt; /etc/hosts</span><br><span class="line">echo "192.168.135.6 node4" &gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºä¸»æœºä¿¡ä»»å…³ç³»"><a href="#åˆ›å»ºä¸»æœºä¿¡ä»»å…³ç³»" class="headerlink" title="åˆ›å»ºä¸»æœºä¿¡ä»»å…³ç³»"></a>åˆ›å»ºä¸»æœºä¿¡ä»»å…³ç³»</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br><span class="line">ssh-copy-id node-1</span><br><span class="line">ssh-copy-id node-2</span><br><span class="line">ssh-copy-id node-3</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…é…ç½®æ•°æ®åº“"><a href="#å®‰è£…é…ç½®æ•°æ®åº“" class="headerlink" title="å®‰è£…é…ç½®æ•°æ®åº“"></a>å®‰è£…é…ç½®æ•°æ®åº“</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install mariadb-server -y</span><br><span class="line">systemctl enable mariadb</span><br><span class="line">systemctl start mariadb</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">password</span>=<span class="keyword">password</span>(<span class="string">'123456'</span>);</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> root@localhost <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'123456'</span>;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> root@<span class="string">'%'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'123456'</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> ambari <span class="keyword">default</span> <span class="built_in">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> ambari.* <span class="keyword">to</span> ambari@localhost <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'bigdata'</span>;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> ambari.* <span class="keyword">to</span> ambari@<span class="string">'%'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'bigdata'</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> hive <span class="keyword">default</span> <span class="built_in">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> hive.* <span class="keyword">to</span> hive@localhost <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'hive'</span>;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> hive.* <span class="keyword">to</span> hive@<span class="string">'%'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'hive'</span>;</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…AmabriæœåŠ¡"><a href="#å®‰è£…AmabriæœåŠ¡" class="headerlink" title="å®‰è£…AmabriæœåŠ¡"></a>å®‰è£…AmabriæœåŠ¡</h2><h3 id="åœ¨node-1ä¸Šå®‰è£…ambari-server-å¹¶å¯åŠ¨é…ç½®å‘å¯¼"><a href="#åœ¨node-1ä¸Šå®‰è£…ambari-server-å¹¶å¯åŠ¨é…ç½®å‘å¯¼" class="headerlink" title="åœ¨node-1ä¸Šå®‰è£…ambari-server,å¹¶å¯åŠ¨é…ç½®å‘å¯¼"></a>åœ¨node-1ä¸Šå®‰è£…ambari-server,å¹¶å¯åŠ¨é…ç½®å‘å¯¼</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install ambari-server -y</span><br><span class="line">ambari-server setup</span><br></pre></td></tr></table></figure><h3 id="æŒ‰ç…§é…ç½®å‘å¯¼ä¿¡æ¯ã€é…ç½®ç”¨æˆ·ã€java-home"><a href="#æŒ‰ç…§é…ç½®å‘å¯¼ä¿¡æ¯ã€é…ç½®ç”¨æˆ·ã€java-home" class="headerlink" title="æŒ‰ç…§é…ç½®å‘å¯¼ä¿¡æ¯ã€é…ç½®ç”¨æˆ·ã€java_home"></a>æŒ‰ç…§é…ç½®å‘å¯¼ä¿¡æ¯ã€é…ç½®ç”¨æˆ·ã€java_home</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">ambari-server setup</span><br><span class="line">Using python  /usr/bin/python</span><br><span class="line">Setup ambari-server</span><br><span class="line">Checking SELinux...</span><br><span class="line">SELinux status is 'disabled'</span><br><span class="line">Customize user account for ambari-server daemon [y/n] (n)? y</span><br><span class="line">Enter user account for ambari-server daemon (root):ambari  </span><br><span class="line">Adjusting ambari-server permissions and ownership...</span><br><span class="line">Checking firewall status...</span><br><span class="line">Checking JDK...</span><br><span class="line">[1] Oracle JDK 1.8 + Java Cryptography Extension (JCE) Policy Files 8</span><br><span class="line">[2] Oracle JDK 1.7 + Java Cryptography Extension (JCE) Policy Files 7</span><br><span class="line">[3] Custom JDK</span><br><span class="line">==============================================================================</span><br><span class="line">Enter choice (1): 3</span><br><span class="line">WARNING: JDK must be installed on all hosts and JAVA_HOME must be valid on all hosts.</span><br><span class="line">WARNING: JCE Policy files are required for configuring Kerberos security. If you plan to use Kerberos,please make sure JCE Unlimited Strength Jurisdiction Policy Files are valid on all hosts.</span><br><span class="line">Path to JAVA_HOME: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.161-0.b14.el7_4.x86_64/jre  # å¡«å†™java_home</span><br><span class="line">Validating JDK on Ambari Server...done.</span><br><span class="line">Checking GPL software agreement...</span><br><span class="line">GPL License for LZO: https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html</span><br><span class="line">Enable Ambari Server to download and install GPL Licensed LZO packages [y/n] (n)? n</span><br><span class="line">Completing setup...</span><br><span class="line">Configuring database...</span><br><span class="line">Enter advanced database configuration [y/n] (n)? y  </span><br><span class="line">Configuring database...</span><br><span class="line">==============================================================================</span><br><span class="line">Choose one of the following options:</span><br><span class="line">[1] - PostgreSQL (Embedded)</span><br><span class="line">[2] - Oracle</span><br><span class="line">[3] - MySQL / MariaDB</span><br><span class="line">[4] - PostgreSQL</span><br><span class="line">[5] - Microsoft SQL Server (Tech Preview)</span><br><span class="line">[6] - SQL Anywhere</span><br><span class="line">[7] - BDB</span><br><span class="line">==============================================================================</span><br><span class="line">Enter choice (1): 3</span><br><span class="line">Hostname (localhost): </span><br><span class="line">Port (3306): </span><br><span class="line">Database name (ambari): </span><br><span class="line">Username (ambari): </span><br><span class="line">Enter Database Password (bigdata): </span><br><span class="line">Configuring ambari database...</span><br><span class="line">WARNING: Before starting Ambari Server, you must copy the MySQL JDBC driver JAR file to /usr/share/java and set property "server.jdbc.driver.path=[path/to/custom_jdbc_driver]" in ambari.properties.</span><br><span class="line">Press &lt;enter&gt; to continue.</span><br></pre></td></tr></table></figure><h3 id="åˆ°ä¸Šé¢ä¸€æ­¥æ—¶ï¼Œæ ¹æ®æç¤ºä¸Šä¼ mysqlçš„jdbcé©±åŠ¨ï¼Œå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šjdbcé©±åŠ¨æ–‡ä»¶ä½ç½®ï¼š"><a href="#åˆ°ä¸Šé¢ä¸€æ­¥æ—¶ï¼Œæ ¹æ®æç¤ºä¸Šä¼ mysqlçš„jdbcé©±åŠ¨ï¼Œå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šjdbcé©±åŠ¨æ–‡ä»¶ä½ç½®ï¼š" class="headerlink" title="åˆ°ä¸Šé¢ä¸€æ­¥æ—¶ï¼Œæ ¹æ®æç¤ºä¸Šä¼ mysqlçš„jdbcé©±åŠ¨ï¼Œå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šjdbcé©±åŠ¨æ–‡ä»¶ä½ç½®ï¼š"></a>åˆ°ä¸Šé¢ä¸€æ­¥æ—¶ï¼Œæ ¹æ®æç¤ºä¸Šä¼ mysqlçš„jdbcé©±åŠ¨ï¼Œå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šjdbcé©±åŠ¨æ–‡ä»¶ä½ç½®ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/share/java</span><br><span class="line">ll</span><br><span class="line">tar xf mysql-connector-java-5.1.45.tar.gz </span><br><span class="line">mv mysql-connector-java-5.1.45/mysql-connector-java-5.1.45-bin.jar ./</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</span></span><br><span class="line">vim /etc/ambari-server/conf/ambari.properties</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.jdbc.driver.path=/usr/share/java/mysql-connector-java-5.1.45-bin.jar</span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæˆåç»§ç»­ï¼Œä¼šå‡ºç°å¦‚ä¸‹æç¤ºï¼š</p><p>Press <enter> to continue.<br>Configuring remote database connection propertiesâ€¦<br>WARNING: Before starting Ambari Server, you must run the following DDL against the database to create the schema: /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql<br>Proceed with configuring remote database connection properties [y/n] (y)? </enter></p><h3 id="å‡ºç°ä¸Šè¿°æç¤ºæ—¶ï¼Œæ ¹æ®ä¿¡æ¯å¯¼å…¥æ•°æ®åº“"><a href="#å‡ºç°ä¸Šè¿°æç¤ºæ—¶ï¼Œæ ¹æ®ä¿¡æ¯å¯¼å…¥æ•°æ®åº“" class="headerlink" title="å‡ºç°ä¸Šè¿°æç¤ºæ—¶ï¼Œæ ¹æ®ä¿¡æ¯å¯¼å…¥æ•°æ®åº“"></a>å‡ºç°ä¸Šè¿°æç¤ºæ—¶ï¼Œæ ¹æ®ä¿¡æ¯å¯¼å…¥æ•°æ®åº“</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p ambari &lt; /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ambari-server start</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;é…ç½®æœ¬åœ°yumæº&quot;&gt;&lt;a href=&quot;#é…ç½®æœ¬åœ°yumæº&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®æœ¬åœ°yumæº&quot;&gt;&lt;/a&gt;é…ç½®æœ¬åœ°yumæº&lt;/h2&gt;&lt;h3 id=&quot;å®‰è£…httpd&quot;&gt;&lt;a href=&quot;#å®‰è£…h
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="ambari" scheme="http://yoursite.com/tags/ambari/"/>
    
      <category term="hadoop" scheme="http://yoursite.com/tags/hadoop/"/>
    
  </entry>
  
  <entry>
    <title>Ansible è‡ªåŠ¨åŒ–è¿ç»´å®æˆ˜</title>
    <link href="http://yoursite.com/2018/12/17/ansible/"/>
    <id>http://yoursite.com/2018/12/17/ansible/</id>
    <published>2018-12-16T16:00:00.000Z</published>
    <updated>2019-07-23T07:15:13.338Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="Ad-Hocå‘½ä»¤ç®€ä»‹"><a href="#Ad-Hocå‘½ä»¤ç®€ä»‹" class="headerlink" title="Ad-Hocå‘½ä»¤ç®€ä»‹"></a>Ad-Hocå‘½ä»¤ç®€ä»‹</h2><h3 id="å¹¶è¡Œå’ŒShellå‘½ä»¤"><a href="#å¹¶è¡Œå’ŒShellå‘½ä»¤" class="headerlink" title="å¹¶è¡Œå’ŒShellå‘½ä»¤"></a>å¹¶è¡Œå’ŒShellå‘½ä»¤</h3><p>è®©æˆ‘ä»¬ä½¿ç”¨Ansibleçš„å‘½ä»¤è¡Œå·¥å…·é‡å¯atlantaçš„æ‰€æœ‰WebæœåŠ¡å™¨ï¼Œä¸€æ¬¡10ä¸ªã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬è®¾ç½®SSHä»£ç†ï¼Œä»¥ä¾¿å®ƒèƒ½è®°ä½æˆ‘ä»¬çš„å‡­æ®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-agent bash</span><br><span class="line">ssh-add ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure><p>playbook</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/OS/OSRELEASE/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;Ad-Hocå‘½ä»¤ç®€ä»‹&quot;&gt;&lt;a href=&quot;#Ad-Hocå‘½ä»¤ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;Ad-Hocå‘½ä»¤ç®€ä»‹&quot;&gt;&lt;/a&gt;Ad-Hocå‘½ä»¤ç®€ä»‹&lt;/h2&gt;&lt;h3 id=&quot;å¹¶è¡Œå’ŒShellå‘½ä»¤&quot;&gt;&lt;a
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="ansible" scheme="http://yoursite.com/tags/ansible/"/>
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Arch Linux å…¥å‘æŒ‡å—</title>
    <link href="http://yoursite.com/2018/12/16/archlinux_install/"/>
    <id>http://yoursite.com/2018/12/16/archlinux_install/</id>
    <published>2018-12-15T16:00:00.000Z</published>
    <updated>2019-07-23T07:15:16.271Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="ç³»ç»Ÿå®‰è£…"><a href="#ç³»ç»Ÿå®‰è£…" class="headerlink" title="ç³»ç»Ÿå®‰è£…"></a>ç³»ç»Ÿå®‰è£…</h2><h3 id="è¿æ¥ç½‘ç»œ"><a href="#è¿æ¥ç½‘ç»œ" class="headerlink" title="è¿æ¥ç½‘ç»œ"></a>è¿æ¥ç½‘ç»œ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wifi-menu</span><br></pre></td></tr></table></figure><h3 id="ç£ç›˜åˆ†åŒº"><a href="#ç£ç›˜åˆ†åŒº" class="headerlink" title="ç£ç›˜åˆ†åŒº"></a>ç£ç›˜åˆ†åŒº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br><span class="line">fdisk /dev/sda</span><br><span class="line"><span class="comment"># 1. å…ˆå°†ç¡¬ç›˜æ ¼å¼è½¬æ¢ä¸º GPT</span></span><br><span class="line"><span class="comment"># 2. åˆ›å»º sda1 EFI åˆ†åŒº 200M</span></span><br><span class="line"><span class="comment"># 3. åˆ›å»º ada2 boot åˆ†åŒº 1G</span></span><br><span class="line"><span class="comment"># 4. å‰©ä¸‹çš„ sda3 Linux LVM åˆ†åŒº</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼åŒ–ä¸‰ä¸ªåˆ†åŒº</span></span><br><span class="line">mkfs.vfat -F32 /dev/sda1</span><br><span class="line">mkfs.ext4 /dev/sda2</span><br><span class="line">mkfs.xfs /dev/sda3</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹ç¡¬ç›˜çš„åˆ†åŒºæƒ…å†µ"><a href="#æŸ¥çœ‹ç¡¬ç›˜çš„åˆ†åŒºæƒ…å†µ" class="headerlink" title="æŸ¥çœ‹ç¡¬ç›˜çš„åˆ†åŒºæƒ…å†µ"></a>æŸ¥çœ‹ç¡¬ç›˜çš„åˆ†åŒºæƒ…å†µ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk -l</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå¹¶æŒ‚è½½ç›®å½•"><a href="#åˆ›å»ºå¹¶æŒ‚è½½ç›®å½•" class="headerlink" title="åˆ›å»ºå¹¶æŒ‚è½½ç›®å½•"></a>åˆ›å»ºå¹¶æŒ‚è½½ç›®å½•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€å®šè¦å…ˆæŒ‚è½½ /mnt</span></span><br><span class="line">mount /dev/sda3 /mnt</span><br><span class="line"><span class="comment"># åˆ›å»º boot æ–‡ä»¶å¤¹å¹¶æŒ‚è½½</span></span><br><span class="line">mkdir /mnt/boot</span><br><span class="line">mount /dev/sda2 /mnt/boot</span><br><span class="line"><span class="comment"># åˆ›å»º efi æ–‡ä»¶å¤¹å¹¶æŒ‚è½½</span></span><br><span class="line">mkdir /mnt/boot/efi</span><br><span class="line">mount /dev/sda1 /mnt/boot/efi</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…åŸºæœ¬ç³»ç»Ÿ"><a href="#å®‰è£…åŸºæœ¬ç³»ç»Ÿ" class="headerlink" title="å®‰è£…åŸºæœ¬ç³»ç»Ÿ"></a>å®‰è£…åŸºæœ¬ç³»ç»Ÿ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacstrap /mnt base</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆ-fstab"><a href="#ç”Ÿæˆ-fstab" class="headerlink" title="ç”Ÿæˆ fstab"></a>ç”Ÿæˆ fstab</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br></pre></td></tr></table></figure><h3 id="Change-root-åˆ°æ–°å®‰è£…çš„ç³»ç»Ÿ"><a href="#Change-root-åˆ°æ–°å®‰è£…çš„ç³»ç»Ÿ" class="headerlink" title="Change root åˆ°æ–°å®‰è£…çš„ç³»ç»Ÿ"></a>Change root åˆ°æ–°å®‰è£…çš„ç³»ç»Ÿ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arch-chroot /mnt</span><br><span class="line">pacman -S vim net-tools</span><br></pre></td></tr></table></figure><h3 id="Locale"><a href="#Locale" class="headerlink" title="Locale"></a>Locale</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¾‘åœ°åŒºä¿¡æ¯ç”Ÿæˆæ–‡ä»¶</span></span><br><span class="line">vim /etc/locale.gen</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆåœ°åŒºä¿¡æ¯</span></span><br><span class="line">locale-gen</span><br><span class="line"><span class="comment"># å†™è¿›é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">echo</span> LANG=zh_CN.UTF-8 &gt; /etc/locale.conf</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®æ—¶åŒº"><a href="#è®¾ç½®æ—¶åŒº" class="headerlink" title="è®¾ç½®æ—¶åŒº"></a>è®¾ç½®æ—¶åŒº</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -S /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">hwclock --localtime</span><br></pre></td></tr></table></figure><h3 id="ä¸»æœºå"><a href="#ä¸»æœºå" class="headerlink" title="ä¸»æœºå"></a>ä¸»æœºå</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo myhostname &gt; /etc/hostname</span><br><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure><h3 id="Root-å¯†ç "><a href="#Root-å¯†ç " class="headerlink" title="Root å¯†ç "></a>Root å¯†ç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-GRUB"><a href="#å®‰è£…-GRUB" class="headerlink" title="å®‰è£… GRUB"></a>å®‰è£… GRUB</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pacman -S grub-efi-x86_64</span><br><span class="line">pacman -S efibootmgr</span><br><span class="line">grub-install --efi-directory=/boot/efi --bootloader-id=arch --recheck</span><br><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure><h3 id="é‡å¯"><a href="#é‡å¯" class="headerlink" title="é‡å¯"></a>é‡å¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br><span class="line">umount /mnt/boot/efi</span><br><span class="line">umount /mnt/boot</span><br><span class="line">umount /mnt</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…å›¾å½¢åŒ–ç•Œé¢"><a href="#å®‰è£…å›¾å½¢åŒ–ç•Œé¢" class="headerlink" title="å®‰è£…å›¾å½¢åŒ–ç•Œé¢"></a>å®‰è£…å›¾å½¢åŒ–ç•Œé¢</h2><h3 id="è®¾ç½®-archlinux-æº"><a href="#è®¾ç½®-archlinux-æº" class="headerlink" title="è®¾ç½® archlinux æº"></a>è®¾ç½® archlinux æº</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°æºå¹¶ä¸”å®‰è£…yaourt"><a href="#æ›´æ–°æºå¹¶ä¸”å®‰è£…yaourt" class="headerlink" title="æ›´æ–°æºå¹¶ä¸”å®‰è£…yaourt:"></a>æ›´æ–°æºå¹¶ä¸”å®‰è£…yaourt:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Syu yaourt</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…é©±åŠ¨"><a href="#å®‰è£…é©±åŠ¨" class="headerlink" title="å®‰è£…é©±åŠ¨"></a>å®‰è£…é©±åŠ¨</h3><ul><li>è§¦æ‘¸æ¿é©±åŠ¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xf86-input-libinput xf86-input-synaptics</span><br></pre></td></tr></table></figure><ul><li>æ˜¾ç¤ºé©±åŠ¨</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xf86-video-intel</span><br><span class="line">pacman -S mesa-libgl libva-intel-driver libvdpau-va-glmesa-demos</span><br><span class="line">pacman -S nvidia nvidia-settings</span><br></pre></td></tr></table></figure><ul><li>å£°éŸ³</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S alsa-utils</span><br></pre></td></tr></table></figure><ul><li>æ— çº¿ç½‘å¡å®‰è£…BCM4322</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pacman -S linux-firmware</span><br><span class="line">pacman -S linux-headers</span><br><span class="line">yaourt -S broadcom-wl-dkms</span><br></pre></td></tr></table></figure><ul><li>å®‰è£…Deepinæ¡Œé¢ç¯å¢ƒ</li></ul><p>1.å®‰è£…Xorgå’Œå…¶å·¥å…·åŒ…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xorg-server xorg-xinit</span><br></pre></td></tr></table></figure><p>2.DDEåŸºæœ¬ç¯å¢ƒå®‰è£…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pacman -S deepin deepin-extra lightdm</span><br><span class="line">pacman -S file-roller evince gedit thunderbird gpicview</span><br><span class="line">pacman -S unrar unzip p7zip</span><br></pre></td></tr></table></figure><p>3.ä¿®æ”¹lightdm.confä½¿ç”¨ç™»å½•ç®¡ç†å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/lightdm/lightdm.conf</span><br><span class="line">greeter-session=lightdm-deepin-greeter</span><br><span class="line">systemctl enable lightdm</span><br></pre></td></tr></table></figure><p>4.é…ç½®ç½‘ç»œè¿æ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S networkmanager</span><br><span class="line">systemctl enable NetworkManager</span><br></pre></td></tr></table></figure><ul><li>å®‰è£…å¸¸ç”¨è½¯ä»¶</li></ul><p>1.æœç‹—è¾“å…¥æ³•å®‰è£…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S fcitx fcitx-configtool</span><br><span class="line">pacman -S fcitx-sougoupinyin</span><br></pre></td></tr></table></figure><p>åœ¨ç”¨æˆ·ç›®å½•ä¸‹æ·»åŠ ä¸ªé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nano ~/.xprofile</span><br><span class="line">export GTK_IM_MODULE=fcitx</span><br><span class="line">export QT_IM_MODULE=fcitx</span><br><span class="line">export XMODIFIERS=@im=fcitx</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S openccÂ  ï¼ˆç®€ä½“å’Œç¹ä½“äº’ç›¸è½¬æ¢çš„åº“ï¼‰</span><br></pre></td></tr></table></figure><p>2.æµè§ˆå™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pacman -S chromium</span><br><span class="line">pacman -S google-chrome</span><br><span class="line">pacman -S firefox</span><br><span class="line">pacman -S git</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;ç³»ç»Ÿå®‰è£…&quot;&gt;&lt;a href=&quot;#ç³»ç»Ÿå®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;ç³»ç»Ÿå®‰è£…&quot;&gt;&lt;/a&gt;ç³»ç»Ÿå®‰è£…&lt;/h2&gt;&lt;h3 id=&quot;è¿æ¥ç½‘ç»œ&quot;&gt;&lt;a href=&quot;#è¿æ¥ç½‘ç»œ&quot; class=&quot;headerlin
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="archlinux" scheme="http://yoursite.com/tags/archlinux/"/>
    
  </entry>
  
  <entry>
    <title>Linux æ–‡æœ¬å¤„ç†å™¨ä¹‹ awk</title>
    <link href="http://yoursite.com/2018/12/15/awk/"/>
    <id>http://yoursite.com/2018/12/15/awk/</id>
    <published>2018-12-14T16:00:00.000Z</published>
    <updated>2019-07-23T07:15:19.255Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">awk  <span class="string">'BEGIN&#123;FS="[:]"&#125; &#123;aa+=$3&#125; END&#123;print "æ‰€ç”¨çš„UIDçš„å’Œæ˜¯:",aa&#125;'</span> passwd</span><br><span class="line">FSawk <span class="string">'BEGIN&#123;FS="[:]"&#125; /root/&#123;print $1,$2&#125;'</span> passwd</span><br><span class="line">OFSawk <span class="string">'BEGIN&#123;FS="[:]";OFS="---"&#125; /root/&#123;print $1,$2&#125;'</span> passwd</span><br><span class="line">NFawk -F: <span class="string">'&#123;print NF&#125;'</span> passwd</span><br><span class="line">RSawk <span class="string">'BEGIN&#123;FS="[,]";RS=" "&#125;&#123;print $2&#125;'</span> bb.txt</span><br><span class="line">ORSawk <span class="string">'BEGIN&#123;FS="[:]";ORS="---"&#125;&#123;print $0&#125;'</span> passwd</span><br><span class="line">FILENAMEawk -F<span class="string">"[:]"</span> <span class="string">'&#123;print FILENAME&#125;'</span> passwd</span><br><span class="line">NRawk <span class="string">'&#123;print NR&#125;'</span> a.txt b.txt</span><br><span class="line">FNRawk <span class="string">'&#123;print NR&#125;'</span> a.txt b.txt</span><br><span class="line"><span class="comment"># NR==FNR æ­¤æ—¶å¤„ç†çš„æ˜¯ç¬¬ä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># NR!=FNR æ­¤æ—¶å¤„ç†çš„æ˜¯ç¬¬äºŒä¸ªæ–‡ä»¶</span></span><br><span class="line">awk <span class="string">'NR==FNR&#123;print FILENAME&#125; NR!=FNR&#123;print FILENAME&#125;'</span> a.txt b.txt</span><br><span class="line"><span class="keyword">if</span>awk -F[:] <span class="string">'&#123;if($3&lt;=1000)&#123;print $1"æ˜¯rootç”¨æˆ·"&#125;else&#123;print $1"æ˜¯æ™®é€šç”¨æˆ·"&#125;&#125;'</span> /etc/passwd</span><br></pre></td></tr></table></figure><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>å˜é‡å</td><td>å±æ€§</td></tr><tr><td>$0</td><td>å½“å‰è®°å½•</td></tr><tr><td>$1~$n</td><td>å½“å‰è®°å½•çš„ç¬¬nä¸ªå­—æ®µ</td></tr><tr><td>FS</td><td>è¾“å…¥å­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºç©ºæ ¼</td></tr><tr><td>RS</td><td>è¾“å…¥è®°å½•åˆ†å‰²ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦</td></tr><tr><td>NF</td><td>å½“å‰è®°å½•ä¸­çš„å­—æ®µä¸ªæ•°ï¼Œå°±æ˜¯æœ‰å¤šå°‘åˆ—</td></tr><tr><td>NR</td><td>å·²ç»è¯»å‡ºçš„è®°å½•æ•°ï¼Œå°±æ˜¯è¡Œå·ï¼Œä»1å¼€å§‹</td></tr><tr><td>OFS</td><td>è¾“å‡ºå­—ç¬¦åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¹Ÿæ˜¯ç©ºæ ¼</td></tr><tr><td>ORS</td><td>è¾“å‡ºçš„è®°å½•åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/sp
      
    
    </summary>
    
      <category term="shell" scheme="http://yoursite.com/categories/shell/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="shell" scheme="http://yoursite.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>CentOS Oracle 12c å®‰è£…æŒ‡å—</title>
    <link href="http://yoursite.com/2018/12/14/centos_install_oracle12c/"/>
    <id>http://yoursite.com/2018/12/14/centos_install_oracle12c/</id>
    <published>2018-12-13T16:00:00.000Z</published>
    <updated>2019-07-23T07:15:29.545Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="1-ä¼˜åŒ–ã€å®‰è£…å¿…è¦çš„å·¥å…·"><a href="#1-ä¼˜åŒ–ã€å®‰è£…å¿…è¦çš„å·¥å…·" class="headerlink" title="1. ä¼˜åŒ–ã€å®‰è£…å¿…è¦çš„å·¥å…·"></a>1. ä¼˜åŒ–ã€å®‰è£…å¿…è¦çš„å·¥å…·</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ yum -y install unzip vim lrzsz</span><br><span class="line">[root@oracle12c ~]$ setenforce 0</span><br><span class="line">[root@oracle12c ~]$ sed -i &apos;s/SELINUX=enforcing/SELINUX=disabled/&apos; /etc/selinux/config</span><br><span class="line">[root@oracle12c ~]$ reboot</span><br><span class="line">[root@oracle12c ~]$ sed -i &apos;s/^GSSAPIAuthentication yes$/GSSAPIAuthentication no/&apos; /etc/ssh/sshd_config</span><br><span class="line">[root@oracle12c ~]$ sed -i &apos;s/#UseDNS yes/UseDNS no/&apos; /etc/ssh/sshd_config</span><br><span class="line">[root@oracle12c ~]$ service sshd restart</span><br></pre></td></tr></table></figure><h2 id="2-å®‰è£…ä¾èµ–"><a href="#2-å®‰è£…ä¾èµ–" class="headerlink" title="2. å®‰è£…ä¾èµ–"></a>2. å®‰è£…ä¾èµ–</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ yum -y install binutils compat-libcap1 compat-libstdc++-33 compat-libstdc++-33*.i686 elfutils-libelf-devel gcc gcc-c++ glibc*.i686 glibc glibc-devel glibc-devel*.i686 ksh libgcc*.i686 libgcc libstdc++ libstdc++*.i686 libstdc++-devel libstdc++-devel*.i686 libaio libaio*.i686 libaio-devel libaio-devel*.i686 make sysstat unixODBC unixODBC*.i686 unixODBC-devel unixODBC-devel*.i686 libXp</span><br></pre></td></tr></table></figure><h2 id="3-å»ºç«‹ç”¨æˆ·å’Œç»„"><a href="#3-å»ºç«‹ç”¨æˆ·å’Œç»„" class="headerlink" title="3. å»ºç«‹ç”¨æˆ·å’Œç»„"></a>3. å»ºç«‹ç”¨æˆ·å’Œç»„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ groupadd oinstall</span><br><span class="line">[root@oracle12c ~]$ groupadd dba</span><br><span class="line">[root@oracle12c ~]$ groupadd oper</span><br><span class="line">[root@oracle12c ~]$ useradd -g oinstall -G dba,oper oracle</span><br><span class="line">[root@oracle12c ~]$ echo oracle | passwd --stdin oracle</span><br></pre></td></tr></table></figure><h2 id="4-åˆ›å»ºå®‰è£…ã€å¤‡ä»½ç›®å½•"><a href="#4-åˆ›å»ºå®‰è£…ã€å¤‡ä»½ç›®å½•" class="headerlink" title="4. åˆ›å»ºå®‰è£…ã€å¤‡ä»½ç›®å½•"></a>4. åˆ›å»ºå®‰è£…ã€å¤‡ä»½ç›®å½•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ mkdir -p /u01/app/oracle/product/12.2.0</span><br><span class="line">[root@oracle12c ~]$ chown -R oracle:oinstall /u01</span><br></pre></td></tr></table></figure><h2 id="5-æ›´æ”¹å…±äº«å†…å­˜"><a href="#5-æ›´æ”¹å…±äº«å†…å­˜" class="headerlink" title="5. æ›´æ”¹å…±äº«å†…å­˜"></a>5. æ›´æ”¹å…±äº«å†…å­˜</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ echo &quot;shmfs /dev/shm tmpfs size=12g 0&quot; &gt;&gt; /etc/fstab</span><br></pre></td></tr></table></figure><h2 id="6-ä¿®æ”¹å†…æ ¸å‚æ•°"><a href="#6-ä¿®æ”¹å†…æ ¸å‚æ•°" class="headerlink" title="6. ä¿®æ”¹å†…æ ¸å‚æ•°"></a>6. ä¿®æ”¹å†…æ ¸å‚æ•°</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ vim /etc/sysctl.conf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fs.file-max = 6815744</span><br><span class="line">kernel.sem = 250 32000 100 128</span><br><span class="line">kernel.shmmni = 4096</span><br><span class="line">kernel.shmall = 4294967296</span><br><span class="line">kernel.shmmax = 4398046511104</span><br><span class="line">kernel.panic_on_oops = 1</span><br><span class="line">net.core.rmem_default = 262144</span><br><span class="line">net.core.rmem_max = 4194304</span><br><span class="line">net.core.wmem_default = 262144</span><br><span class="line">net.core.wmem_max = 1048576</span><br><span class="line">net.ipv4.conf.all.rp_filter = 2</span><br><span class="line">net.ipv4.conf.default.rp_filter = 2</span><br><span class="line">fs.aio-max-nr = 1048576</span><br><span class="line">net.ipv4.ip_local_port_range = 9000 65500</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ sysctl -p</span><br></pre></td></tr></table></figure><h2 id="7-æ”¹æ–‡ä»¶é™åˆ¶"><a href="#7-æ”¹æ–‡ä»¶é™åˆ¶" class="headerlink" title="7. æ”¹æ–‡ä»¶é™åˆ¶"></a>7. æ”¹æ–‡ä»¶é™åˆ¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ vim /etc/security/limits.conf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">oracle soft nproc 2047</span><br><span class="line">oracle hard nproc 16384</span><br><span class="line">oracle soft nofile 1024</span><br><span class="line">oracle hard nofile 65536</span><br><span class="line">oracle soft stack 10240</span><br></pre></td></tr></table></figure><h2 id="8-ä¿®æ”¹ç™»é™†é…ç½®æ–‡ä»¶"><a href="#8-ä¿®æ”¹ç™»é™†é…ç½®æ–‡ä»¶" class="headerlink" title="8. ä¿®æ”¹ç™»é™†é…ç½®æ–‡ä»¶"></a>8. ä¿®æ”¹ç™»é™†é…ç½®æ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ vim /etc/pam.d/login</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">session required pam_limits.so</span><br></pre></td></tr></table></figure><h2 id="9-ä¿®æ”¹-ulimit"><a href="#9-ä¿®æ”¹-ulimit" class="headerlink" title="9. ä¿®æ”¹ ulimit"></a>9. ä¿®æ”¹ ulimit</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ vim /etc/profile</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if [ $USER = &quot;oracle&quot; ]; then</span><br><span class="line">    if [ $SHELL = &quot;/bin/ksh&quot; ]; then</span><br><span class="line">        ulimit -p 16384</span><br><span class="line">        ulimit -n 65536a</span><br><span class="line">    else</span><br><span class="line">        ulimit -u 16384 -n 65536</span><br><span class="line">    fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h2 id="10-ä¿®æ”¹ç¯å¢ƒå˜é‡"><a href="#10-ä¿®æ”¹ç¯å¢ƒå˜é‡" class="headerlink" title="10. ä¿®æ”¹ç¯å¢ƒå˜é‡"></a>10. ä¿®æ”¹ç¯å¢ƒå˜é‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ vim ~/.bash_profile</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PATH=$PATH:$HOME/.local/bin:$HOME/bin:$ORACLE_HOME/bin</span><br><span class="line">ORACLE_BASE=/u01/app/oracle</span><br><span class="line">ORACLE_HOME=$ORACLE_BASE/product/12.2.0</span><br><span class="line">ORACLE_SID=orcl</span><br><span class="line">export ORACLE_BASE ORACLE_HOME ORACLE_SID</span><br><span class="line">export NLS_LANG=&quot;AMERICAN_AMERICA.UTF8&quot;</span><br><span class="line">export PATH</span><br></pre></td></tr></table></figure><h2 id="11-ä¿®æ”¹-hosts-æ–‡ä»¶"><a href="#11-ä¿®æ”¹-hosts-æ–‡ä»¶" class="headerlink" title="11. ä¿®æ”¹ hosts æ–‡ä»¶"></a>11. ä¿®æ”¹ hosts æ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ vim /etc/hosts</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ipaddr] oracle12c</span><br></pre></td></tr></table></figure><h2 id="12-ä¸Šä¼ å®‰è£…åŒ…-linuxx64-12201-database-zip"><a href="#12-ä¸Šä¼ å®‰è£…åŒ…-linuxx64-12201-database-zip" class="headerlink" title="12. ä¸Šä¼ å®‰è£…åŒ… linuxx64_12201_database.zip"></a>12. ä¸Šä¼ å®‰è£…åŒ… linuxx64_12201_database.zip</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[oracle@oracle12c ~]$ rz</span><br></pre></td></tr></table></figure><h2 id="13-é™é»˜å®‰è£…æ•°æ®åº“è½¯ä»¶"><a href="#13-é™é»˜å®‰è£…æ•°æ®åº“è½¯ä»¶" class="headerlink" title="13. é™é»˜å®‰è£…æ•°æ®åº“è½¯ä»¶"></a>13. é™é»˜å®‰è£…æ•°æ®åº“è½¯ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[oracle@oracle12c ~]$ cd database</span><br><span class="line">[oracle@oracle12c database]$ ./runInstaller  -silent -ignoreSysPrereqs -ignorePrereq -responseFile /home/oracle/database/response/db_install.rsp</span><br></pre></td></tr></table></figure><p>/home/oracle/database/response/db_install.rsp</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">oracle.install.responseFileVersion=/oracle/install/rspfmt_dbinstall_response_schema_v12.2.0</span><br><span class="line">oracle.install.option=INSTALL_DB_SWONLY</span><br><span class="line">UNIX_GROUP_NAME=dba</span><br><span class="line">INVENTORY_LOCATION=/u01/app/oracle/oraInventory</span><br><span class="line">ORACLE_HOME=/u01/app/oracle/product/12.2.0</span><br><span class="line">ORACLE_BASE=/u01/app/oracle</span><br><span class="line">oracle.install.db.InstallEdition=EE</span><br><span class="line">oracle.install.db.OSDBA_GROUP=dba</span><br><span class="line">oracle.install.db.OSOPER_GROUP=dba</span><br><span class="line">oracle.install.db.OSBACKUPDBA_GROUP=dba</span><br><span class="line">oracle.install.db.OSDGDBA_GROUP=dba</span><br><span class="line">oracle.install.db.OSKMDBA_GROUP=dba</span><br><span class="line">oracle.install.db.OSRACDBA_GROUP=dba</span><br><span class="line">oracle.install.db.CLUSTER_NODES=</span><br><span class="line">oracle.install.db.isRACOneInstall=false</span><br><span class="line">SECURITY_UPDATES_VIA_MYORACLESUPPORT=false</span><br><span class="line">DECLINE_SECURITY_UPDATES=true</span><br></pre></td></tr></table></figure><h2 id="14-å»ºç«‹æ•°æ®åº“"><a href="#14-å»ºç«‹æ•°æ®åº“" class="headerlink" title="14. å»ºç«‹æ•°æ®åº“"></a>14. å»ºç«‹æ•°æ®åº“</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[oracle@oracle12c ~]$ $ORACLE_HOME/bin/dbca -silent -createDatabase -templateName General_Purpose.dbc -gdbname orcl -sid orcl -responseFile NO_VALUE -characterSet AL32UTF8 -memoryPercentage 50 -emConfiguration LOCAL</span><br></pre></td></tr></table></figure><p>root ç”¨æˆ·ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ /oracle/oraInventory/orainstRoot.sh</span><br><span class="line">[root@oracle12c ~]$ /oracle/product/12.2.0/root.sh</span><br></pre></td></tr></table></figure><h2 id="15-ä¿®æ”¹å‚æ•°"><a href="#15-ä¿®æ”¹å‚æ•°" class="headerlink" title="15. ä¿®æ”¹å‚æ•°"></a>15. ä¿®æ”¹å‚æ•°</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[oracle@oracle12c ~]$ sqlplus / as sysdba</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; alter system set sga_target=0 scope=spfile;</span><br><span class="line">SQL&gt; alter system set pga_aggregate_target=0 scope=spfile;</span><br><span class="line">SQL&gt; alter system set db_files=2000 scope=spfile;</span><br><span class="line">SQL&gt; alter system set memory_max_target=12g scope=spfile;</span><br><span class="line">SQL&gt; alter system set memory_target=8g scope=spfile;</span><br><span class="line">SQL&gt; alter system set LOG_ARCHIVE_DEST_1='LOCATION=/backup/arch' scope=spfile;</span><br><span class="line">SQL&gt; alter SYSTEM set db_recovery_file_dest_size=4096M scope=spfile;</span><br><span class="line">SQL&gt; alter system set undo_retention=3600 scope=spfile;</span><br><span class="line">SQL&gt; alter system set processes=6000 scope=spfile;</span><br><span class="line">SQL&gt; alter system set sessions=8000 scope=spfile;</span><br><span class="line">SQL&gt; alter system set open_cursors=2000 scope=both;</span><br><span class="line">SQL&gt; create pfile='/tmp/pfile01.ora' from spfile;</span><br><span class="line">SQL&gt; alter system set filesystemio_options='asynch' scope=spfile;</span><br><span class="line">SQL&gt; alter system set disk_asynch_io=true SCOPE=SPFILE;</span><br><span class="line">SQL&gt; create directory expdp_dir as '/backup/expdp';</span><br><span class="line">SQL&gt; grant write,read on directory expdp_dir to public;</span><br><span class="line">SQL&gt; alter database add logfile group 4 '/u01/app/oracle/oradata/orcl/redo04.log' size 1G;</span><br><span class="line">SQL&gt; alter database add logfile group 5 '/u01/app/oracle/oradata/orcl/redo05.log' size 1G;</span><br><span class="line">SQL&gt; alter database add logfile group 6 '/u01/app/oracle/oradata/orcl/redo06.log' size 1G;</span><br><span class="line">SQL&gt; alter system switch logfile;</span><br><span class="line">SQL&gt; alter system switch logfile;</span><br><span class="line">SQL&gt; alter system switch logfile;</span><br><span class="line">SQL&gt; alter system checkpoint;</span><br><span class="line">SQL&gt; alter database drop logfile group 1;</span><br><span class="line">SQL&gt; alter database drop logfile group 2;</span><br><span class="line">SQL&gt; alter database drop logfile group 3;</span><br><span class="line">SQL&gt; host rm -rf /u01/app/oracle/oradata/orcl/redo0[1-3].log</span><br><span class="line">SQL&gt; alter database add logfile group 1 '/u01/app/oracle/oradata/orcl/redo01.log' size  1G;</span><br><span class="line">SQL&gt; alter database add logfile group 2 '/u01/app/oracle/oradata/orcl/redo02.log' size  1G;</span><br><span class="line">SQL&gt; alter database add logfile group 3 '/u01/app/oracle/oradata/orcl/redo03.log' size  1G; </span><br><span class="line">SQL&gt; alter system switch logfile;</span><br><span class="line">SQL&gt; alter system switch logfile;</span><br><span class="line">SQL&gt; alter system switch logfile;</span><br><span class="line">SQL&gt; alter system checkpoint;</span><br><span class="line">SQL&gt; shutdown immediate</span><br><span class="line">SQL&gt; startup mount</span><br><span class="line">SQL&gt; alter database archivelog;</span><br><span class="line">SQL&gt; alter database open;</span><br><span class="line">SQL&gt; alter profile default limit FAILED_LOGIN_ATTEMPTS unlimited;</span><br><span class="line">SQL&gt; create pfile='/tmp/pfile02.ora' from spfile;</span><br></pre></td></tr></table></figure><h2 id="16-ä¿®æ”¹-Oracle-æœåŠ¡å¯åŠ¨é…ç½®"><a href="#16-ä¿®æ”¹-Oracle-æœåŠ¡å¯åŠ¨é…ç½®" class="headerlink" title="16. ä¿®æ”¹ Oracle æœåŠ¡å¯åŠ¨é…ç½®"></a>16. ä¿®æ”¹ Oracle æœåŠ¡å¯åŠ¨é…ç½®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oracle12c ~]$ vim /etc/oratab</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">orcl:/u01/app/oracle/product/12.2.0:Y</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;1-ä¼˜åŒ–ã€å®‰è£…å¿…è¦çš„å·¥å…·&quot;&gt;&lt;a href=&quot;#1-ä¼˜åŒ–ã€å®‰è£…å¿…è¦çš„å·¥å…·&quot; class=&quot;headerlink&quot; title=&quot;1. ä¼˜åŒ–ã€å®‰è£…å¿…è¦çš„å·¥å…·&quot;&gt;&lt;/a&gt;1. ä¼˜åŒ–ã€å®‰è£…å¿…è¦çš„å·¥å…·&lt;/h2&gt;&lt;figure clas
      
    
    </summary>
    
      <category term="database" scheme="http://yoursite.com/categories/database/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="oracle" scheme="http://yoursite.com/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>Docker å…¥å‘æŒ‡å—</title>
    <link href="http://yoursite.com/2018/12/12/docker/"/>
    <id>http://yoursite.com/2018/12/12/docker/</id>
    <published>2018-12-11T16:00:00.000Z</published>
    <updated>2019-07-23T07:15:32.979Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="1-Docker-å®‰è£…"><a href="#1-Docker-å®‰è£…" class="headerlink" title="1. Docker å®‰è£…"></a>1. Docker å®‰è£…</h2><ul><li>Ubuntu</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…·</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt -y install apt-transport-https ca-certificates curl software-properties-common</span><br><span class="line"><span class="comment"># step 2: å®‰è£…GPGè¯ä¹¦</span></span><br><span class="line">curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line"><span class="comment"># Step 3: å†™å…¥è½¯ä»¶æºä¿¡æ¯</span></span><br><span class="line">sudo add-apt-repository <span class="string">"deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu <span class="variable">$(lsb_release -cs)</span> stable"</span></span><br><span class="line"><span class="comment"># Step 4: æ›´æ–°å¹¶å®‰è£… Docker-CE</span></span><br><span class="line">sudo apt -y update</span><br><span class="line">sudo apt -y install docker-ce</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE:</span></span><br><span class="line"><span class="comment"># Step 1: æŸ¥æ‰¾Docker-CEçš„ç‰ˆæœ¬:</span></span><br><span class="line"><span class="comment"># apt-cache madison docker-ce</span></span><br><span class="line"><span class="comment">#   docker-ce | 17.03.1~ce-0~ubuntu-xenial | http://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages</span></span><br><span class="line"><span class="comment">#   docker-ce | 17.03.0~ce-0~ubuntu-xenial | http://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages</span></span><br><span class="line"><span class="comment"># Step 2: å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE: (VERSION ä¾‹å¦‚ä¸Šé¢çš„ 17.03.1~ce-0~ubuntu-xenial)</span></span><br><span class="line"><span class="comment"># sudo apt-get -y install docker-ce=[VERSION]</span></span><br></pre></td></tr></table></figure><ul><li>CentOS</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…·</span></span><br><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"><span class="comment"># Step 2: æ·»åŠ è½¯ä»¶æºä¿¡æ¯</span></span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"><span class="comment"># Step 3: æ›´æ–°å¹¶å®‰è£… Docker-CE</span></span><br><span class="line">yum makecache fast</span><br><span class="line">yum -y install docker-ce</span><br><span class="line"><span class="comment"># Step 4: å¼€å¯DockeræœåŠ¡</span></span><br><span class="line">service docker start</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼š</span></span><br><span class="line"><span class="comment"># å®˜æ–¹è½¯ä»¶æºé»˜è®¤å¯ç”¨äº†æœ€æ–°çš„è½¯ä»¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç¼–è¾‘è½¯ä»¶æºçš„æ–¹å¼è·å–å„ä¸ªç‰ˆæœ¬çš„è½¯ä»¶åŒ…ã€‚ä¾‹å¦‚å®˜æ–¹å¹¶æ²¡æœ‰å°†æµ‹è¯•ç‰ˆæœ¬çš„è½¯ä»¶æºç½®ä¸ºå¯ç”¨ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼€å¯ã€‚åŒç†å¯ä»¥å¼€å¯å„ç§æµ‹è¯•ç‰ˆæœ¬ç­‰ã€‚</span></span><br><span class="line"><span class="comment"># vim /etc/yum.repos.d/docker-ce.repo</span></span><br><span class="line"><span class="comment">#   å°† [docker-ce-test] ä¸‹æ–¹çš„ enabled=0 ä¿®æ”¹ä¸º enabled=1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE:</span></span><br><span class="line"><span class="comment"># Step 1: æŸ¥æ‰¾Docker-CEçš„ç‰ˆæœ¬:</span></span><br><span class="line"><span class="comment"># yum list docker-ce.x86_64 --showduplicates | sort -r</span></span><br><span class="line"><span class="comment">#   Loading mirror speeds from cached hostfile</span></span><br><span class="line"><span class="comment">#   Loaded plugins: branch, fastestmirror, langpacks</span></span><br><span class="line"><span class="comment">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            docker-ce-stable</span></span><br><span class="line"><span class="comment">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            @docker-ce-stable</span></span><br><span class="line"><span class="comment">#   docker-ce.x86_64            17.03.0.ce-1.el7.centos            docker-ce-stable</span></span><br><span class="line"><span class="comment">#   Available Packages</span></span><br><span class="line"><span class="comment"># Step2 : å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE: (VERSION ä¾‹å¦‚ä¸Šé¢çš„ 17.03.0.ce.1-1.el7.centos)</span></span><br><span class="line"><span class="comment"># sudo yum -y install docker-ce-[VERSION]</span></span><br></pre></td></tr></table></figure><h2 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h2><h2 id="3-å¸¸è§é—®é¢˜"><a href="#3-å¸¸è§é—®é¢˜" class="headerlink" title="3. å¸¸è§é—®é¢˜"></a>3. å¸¸è§é—®é¢˜</h2><ul><li>é˜²ç«å¢™çš„é—®é¢˜</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CentOS 7 firewalld è®¾ç½®ï¼Œæ·»åŠ ç›¸åº”ç«¯å£</span></span><br><span class="line">firewall-cmd --permanent --add-port 80/tcp</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><ul><li>IPv4 forwarding is disabled. Networking will not work.</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim  /usr/lib/sysctl.d/00-system.conf åœ¨æœ€åæ·»åŠ ä¸€è¡Œ</span></span><br><span class="line">net.ipv4.ip_forward=1</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;1-Docker-å®‰è£…&quot;&gt;&lt;a href=&quot;#1-Docker-å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;1. Docker å®‰è£…&quot;&gt;&lt;/a&gt;1. Docker å®‰è£…&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Ubuntu&lt;
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="docker" scheme="http://yoursite.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>æ­å»ºåŸºäº HDFS ç¢ç‰‡æ–‡ä»¶å­˜å‚¨æœåŠ¡</title>
    <link href="http://yoursite.com/2018/12/10/hdfs/"/>
    <id>http://yoursite.com/2018/12/10/hdfs/</id>
    <published>2018-12-09T16:00:00.000Z</published>
    <updated>2019-07-23T07:15:46.102Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="å‡†å¤‡-Java-ç¯å¢ƒ"><a href="#å‡†å¤‡-Java-ç¯å¢ƒ" class="headerlink" title="å‡†å¤‡ Java ç¯å¢ƒ"></a>å‡†å¤‡ Java ç¯å¢ƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install java-1.8.0-openjdk*</span><br><span class="line">java -version</span><br><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><figure class="highlight profile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/lib/jvm/jre<span class="number">-1.8</span><span class="number">.0</span>-openjdk</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h2 id="å‡†å¤‡-HDFS-ç¯å¢ƒ"><a href="#å‡†å¤‡-HDFS-ç¯å¢ƒ" class="headerlink" title="å‡†å¤‡ HDFS ç¯å¢ƒ"></a>å‡†å¤‡ HDFS ç¯å¢ƒ</h2><h3 id="é…ç½®-SSH"><a href="#é…ç½®-SSH" class="headerlink" title="é…ç½® SSH"></a>é…ç½® SSH</h3><p>å…ˆåæ‰§è¡Œå¦‚ä¸‹ä¸¤è¡Œå‘½ä»¤ï¼Œé…ç½® SSH ä»¥æ— å¯†ç æ¨¡å¼ç™»é™†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t dsa -P <span class="string">''</span> -f ~/.ssh/id_dsa</span><br><span class="line">cat ~/.ssh/id_dsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>æ¥ç€å¯ä»¥éªŒè¯ä¸‹ï¼Œåœ¨ä¸è¾“å…¥å¯†ç çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥èƒ½ä½¿ç”¨ ssh å‘½ä»¤æˆåŠŸè¿æ¥æœ¬æœºï¼š</p><h3 id="å®‰è£…-Hadoop"><a href="#å®‰è£…-Hadoop" class="headerlink" title="å®‰è£… Hadoop"></a>å®‰è£… Hadoop</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»º /data/hadoop ç›®å½•ï¼Œç„¶åè¿›å…¥è¯¥ç›®å½•ï¼š</span></span><br><span class="line">mkdir -p /data/hadoop &amp;&amp; <span class="built_in">cd</span> <span class="variable">$_</span></span><br><span class="line"><span class="comment"># ä¸‹è½½å¹¶è§£å‹ Hadoopï¼š</span></span><br><span class="line">wget http://archive.apache.org/dist/hadoop/core/hadoop-2.7.1/hadoop-2.7.1.tar.gz</span><br><span class="line">tar -zxvf hadoop-2.7.1.tar.gz</span><br><span class="line">mv hadoop-2.7.1 hadoop &amp;&amp; mv <span class="variable">$_</span> /usr/<span class="built_in">local</span>/</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ Hadoop ç¯å¢ƒé…ç½®æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/<span class="built_in">local</span>/hadoop/etc/hadoop/hadoop-env.sh</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/lib/jvm/jre-1.8.0-openjdk</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ä¸‹ Hadoop çš„ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/hadoop/bin/hadoop version</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹-Hadoop-é…ç½®"><a href="#ä¿®æ”¹-Hadoop-é…ç½®" class="headerlink" title="ä¿®æ”¹ Hadoop é…ç½®"></a>ä¿®æ”¹ Hadoop é…ç½®</h2><p>ç”±äºæˆ‘ä»¬çš„å®è·µç¯å¢ƒæ˜¯åœ¨å•æœºä¸‹è¿›è¡Œçš„ï¼Œæ‰€ä»¥æ­¤å¤„æŠŠ Hadoop é…ç½®ä¸ºä¼ªåˆ†å¸ƒå¼æ¨¡å¼ã€‚<br>æ–°å»ºè‹¥å¹²ä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬åœ¨åç»­çš„é…ç½®ä¸­ä»¥åŠ HDFS å’Œ Hadoop çš„å¯åŠ¨è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨åˆ°è¿™äº›æ–‡ä»¶å¤¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/hadoop &amp;&amp; mkdir -p tmp dfs/name dfs/data</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ HDFS é…ç½®æ–‡ä»¶ core-site.xml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/<span class="built_in">local</span>/hadoop/etc/hadoop/core-site.xml</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/hadoop/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://localhost:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ HDFS é…ç½®æ–‡ä»¶ hdfs-site.xml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/hadoop/etc/hadoop/hdfs-site.xml</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/dfs/name<span class="tag">&lt;/<span class="name">value</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/dfs/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.permissions<span class="tag">&lt;/<span class="name">name</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ HDFS é…ç½®æ–‡ä»¶ yarn-site.xml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/<span class="built_in">local</span>/hadoop/etc/hadoop/yarn-site.xml</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨ Hadoop</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/hadoop/bin/</span><br><span class="line"><span class="comment"># å¯¹ HDFS æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ ¼å¼åŒ–ï¼š</span></span><br><span class="line">./hdfs namenode -format</span><br><span class="line"><span class="comment"># æ¥ç€è¿›å…¥å¦‚ä¸‹ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/hadoop/sbin/</span><br><span class="line"><span class="comment"># å…ˆåæ‰§è¡Œå¦‚ä¸‹ä¸¤ä¸ªè„šæœ¬å¯åŠ¨ Hadoop</span></span><br><span class="line">./start-dfs.sh</span><br><span class="line">./start-yarn.sh</span><br><span class="line"><span class="comment"># éªŒè¯ Hadoop æ˜¯å¦å¯åŠ¨æˆåŠŸï¼š</span></span><br><span class="line">jps</span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨ä¸­è®¿é—®å¦‚ä¸‹é“¾æ¥ï¼Œåº”è¯¥èƒ½æ­£å¸¸è®¿é—®ï¼š</p><p>http://&lt;æ‚¨çš„ IP åœ°å€&gt;:50070/explorer.html#/<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®è·µä¸‹å¦‚ä½•å°†ç¢ç‰‡æ–‡ä»¶å­˜å‚¨åˆ° HDFS ä¸­ã€‚</p><h2 id="å­˜å‚¨ç¢ç‰‡æ–‡ä»¶"><a href="#å­˜å‚¨ç¢ç‰‡æ–‡ä»¶" class="headerlink" title="å­˜å‚¨ç¢ç‰‡æ–‡ä»¶"></a>å­˜å‚¨ç¢ç‰‡æ–‡ä»¶</h2><h3 id="å‡†å¤‡ç¢ç‰‡æ–‡ä»¶"><a href="#å‡†å¤‡ç¢ç‰‡æ–‡ä»¶" class="headerlink" title="å‡†å¤‡ç¢ç‰‡æ–‡ä»¶"></a>å‡†å¤‡ç¢ç‰‡æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç›®å½•ç”¨äºå­˜æ”¾ç¢ç‰‡æ–‡ä»¶ï¼Œè¿›å…¥è¯¥ç›®å½•ï¼š</span></span><br><span class="line"></span><br><span class="line">mkdir -p /data/file &amp;&amp; <span class="built_in">cd</span> /data/file</span><br><span class="line"><span class="comment"># æ–°å»ºä¸€æ‰¹ç¢ç‰‡æ–‡ä»¶åˆ°è¯¥ç›®å½•ä¸‹</span></span><br><span class="line">i=1; <span class="keyword">while</span> [ <span class="variable">$i</span> -le 99 ]; <span class="keyword">do</span> name=`<span class="built_in">printf</span> <span class="string">"test%02d.txt"</span>  <span class="variable">$i</span>`; touch <span class="string">"<span class="variable">$name</span>"</span>; i=$((<span class="variable">$i</span>+1)); <span class="keyword">done</span></span><br><span class="line">ls</span><br></pre></td></tr></table></figure><h3 id="å°†ç¢ç‰‡æ–‡ä»¶å­˜å‚¨åœ¨-HDFS-ä¸­"><a href="#å°†ç¢ç‰‡æ–‡ä»¶å­˜å‚¨åœ¨-HDFS-ä¸­" class="headerlink" title="å°†ç¢ç‰‡æ–‡ä»¶å­˜å‚¨åœ¨ HDFS ä¸­"></a>å°†ç¢ç‰‡æ–‡ä»¶å­˜å‚¨åœ¨ HDFS ä¸­</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ HDFS ä¸Šæ–°å»ºç›®å½•</span></span><br><span class="line">/usr/<span class="built_in">local</span>/hadoop/bin/hadoop fs -mkdir /dest</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œåœ¨æµè§ˆå™¨æ˜¯è®¿é—®å¦‚ä¸‹é“¾æ¥ï¼Œå¯ä»¥çœ‹åˆ° /dest ç›®å½•å·²åˆ›å»ºï¼Œä½†æ˜¯æš‚æ—¶è¿˜æ²¡æœ‰å†…å®¹ï¼š</p><p>http://&lt;æ‚¨çš„ IP åœ°å€&gt;:50070/explorer.html#/dest  </p><h3 id="ä¸Šä¼ ç¢ç‰‡æ–‡ä»¶"><a href="#ä¸Šä¼ ç¢ç‰‡æ–‡ä»¶" class="headerlink" title="ä¸Šä¼ ç¢ç‰‡æ–‡ä»¶"></a>ä¸Šä¼ ç¢ç‰‡æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">groupadd supergroup</span><br><span class="line">usermod -a -G supergroup root</span><br><span class="line"><span class="comment"># å°†ä¹‹å‰åˆ›å»ºçš„ç¢ç‰‡æ–‡ä»¶ä¸Šä¼ åˆ° HDFS ä¸­ï¼š</span></span><br><span class="line"><span class="built_in">cd</span> /data/file &amp;&amp; /usr/<span class="built_in">local</span>/hadoop/bin/hadoop fs -put *.txt /dest</span><br><span class="line">/usr/<span class="built_in">local</span>/hadoop/bin/hadoop fs -ls /dest</span><br><span class="line"><span class="comment"># åœ¨ä¸Šä¼ ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€å…ˆåˆ›å»º HDFS ç”¨æˆ·ç»„ supergroupï¼Œç„¶åå°† root ç”¨æˆ·æ·»åŠ åˆ°è¯¥ç»„ä¸­ï¼Œå¦åˆ™ä¼šå› æƒé™é—®é¢˜é¡µæŠ¥å‘Šå¼‚å¸¸ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="è®¿é—®æœåŠ¡"><a href="#è®¿é—®æœåŠ¡" class="headerlink" title="è®¿é—®æœåŠ¡"></a>è®¿é—®æœåŠ¡</h3><p>åœ¨æµè§ˆå™¨æ˜¯è®¿é—®å¦‚ä¸‹é“¾æ¥ï¼Œå¯ä»¥çœ‹åˆ° /dest ç›®å½•çš„æ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://&lt;æ‚¨çš„ IP åœ°å€&gt;:50070/explorer.html#/dest</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;å‡†å¤‡-Java-ç¯å¢ƒ&quot;&gt;&lt;a href=&quot;#å‡†å¤‡-Java-ç¯å¢ƒ&quot; class=&quot;headerlink&quot; title=&quot;å‡†å¤‡ Java ç¯å¢ƒ&quot;&gt;&lt;/a&gt;å‡†å¤‡ Java ç¯å¢ƒ&lt;/h2&gt;&lt;figure class=&quot;highlig
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="hadoop" scheme="http://yoursite.com/tags/hadoop/"/>
    
  </entry>
  
  <entry>
    <title>Hexo æ‰“é€ é™æ€åšå®¢</title>
    <link href="http://yoursite.com/2018/12/09/hexo/"/>
    <id>http://yoursite.com/2018/12/09/hexo/</id>
    <published>2018-12-08T16:00:00.000Z</published>
    <updated>2019-07-23T07:15:49.414Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹ä¸»é¡µé…ç½®æ–‡ä»¶-config-yml"><a href="#ä¿®æ”¹ä¸»é¡µé…ç½®æ–‡ä»¶-config-yml" class="headerlink" title="ä¿®æ”¹ä¸»é¡µé…ç½®æ–‡ä»¶ _config.yml"></a>ä¿®æ”¹ä¸»é¡µé…ç½®æ–‡ä»¶ _config.yml</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder : true</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…æœ¬åœ°å›¾ç‰‡æ’ä»¶"><a href="#å®‰è£…æœ¬åœ°å›¾ç‰‡æ’ä»¶" class="headerlink" title="å®‰è£…æœ¬åœ°å›¾ç‰‡æ’ä»¶"></a>å®‰è£…æœ¬åœ°å›¾ç‰‡æ’ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆæ–°çš„åšæ–‡"><a href="#ç”Ÿæˆæ–°çš„åšæ–‡" class="headerlink" title="ç”Ÿæˆæ–°çš„åšæ–‡"></a>ç”Ÿæˆæ–°çš„åšæ–‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n &quot;xxx&quot;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ /source/_posts/ ä¸‹ä¼šç”ŸæˆåŒåæ–‡ä»¶å¤¹</p><h2 id="åšæ–‡å¼•å…¥å›¾ç‰‡"><a href="#åšæ–‡å¼•å…¥å›¾ç‰‡" class="headerlink" title="åšæ–‡å¼•å…¥å›¾ç‰‡"></a>åšæ–‡å¼•å…¥å›¾ç‰‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](xxx/xxx.jpg)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;c
      
    
    </summary>
    
      <category term="tools" scheme="http://yoursite.com/categories/tools/"/>
    
    
      <category term="blog" scheme="http://yoursite.com/tags/blog/"/>
    
      <category term="hexo" scheme="http://yoursite.com/tags/hexo/"/>
    
      <category term="nodejs" scheme="http://yoursite.com/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>history æ·»åŠ æ—¶é—´æˆ³</title>
    <link href="http://yoursite.com/2018/12/08/bash_history/"/>
    <id>http://yoursite.com/2018/12/08/bash_history/</id>
    <published>2018-12-07T16:00:00.000Z</published>
    <updated>2019-07-23T07:15:22.346Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="æ·»åŠ ç¯å¢ƒå˜é‡"><a href="#æ·»åŠ ç¯å¢ƒå˜é‡" class="headerlink" title="æ·»åŠ ç¯å¢ƒå˜é‡"></a>æ·»åŠ ç¯å¢ƒå˜é‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]# vim /etc/profile</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HISTTIMEFORMAT=<span class="string">"%Y-%m-%d %H:%M:%S"</span></span><br><span class="line"><span class="built_in">export</span> HISTTIMEFORMAT</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;

&lt;h2 id=&quot;æ·»åŠ ç¯å¢ƒå˜é‡&quot;&gt;&lt;a href=&quot;#æ·»åŠ ç¯å¢ƒå˜é‡&quot; class=&quot;headerlink&quot; title=&quot;æ·»åŠ ç¯å¢ƒå˜é‡&quot;&gt;&lt;/a&gt;æ·»åŠ ç¯å¢ƒå˜é‡&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="shell" scheme="http://yoursite.com/tags/shell/"/>
    
  </entry>
  
</feed>
